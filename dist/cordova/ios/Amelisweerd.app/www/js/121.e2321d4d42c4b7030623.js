"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[121],{8121:(t,e,r)=>{r.r(e),r.d(e,{default:()=>j});var s=r(3673),a=r(2323);const o={class:"row q-mb-sm"},l={class:"col"},i={class:"row calendar-row"},n={class:"hour-col"},u={key:0,class:"hour-label"};function h(t,e,r,h,c,d){const m=(0,s.up)("q-input"),p=(0,s.up)("q-separator"),f=(0,s.up)("calendar-loop"),T=(0,s.up)("q-page"),g=(0,s.up)("q-page-container");return(0,s.wg)(),(0,s.j4)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(T,{class:"q-pa-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s._)("div",l,[(0,s.Wm)(m,{modelValue:c.date,"onUpdate:modelValue":e[0]||(e[0]=t=>c.date=t),filled:"",type:"date"},null,8,["modelValue"])])]),(0,s._)("div",i,[(0,s._)("div",n,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.hours,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,a.C_)(d.hourRowClass(t)),style:(0,a.j5)(d.loopStyle)},[t<d.hours?((0,s.wg)(),(0,s.iD)("div",u,(0,a.zw)(d.timeText(t)),1)):(0,s.kq)("",!0)],6)))),128))]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.courseLoops,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,style:(0,a.j5)({width:d.columnWidth}),class:"calendar-col"},[(0,s._)("div",{class:(0,a.C_)([{"border-left":0!==e},"calendar-header"])},(0,a.zw)(t.crlName),3),(0,s.Wm)(p),(0,s.Wm)(f,{data:c.data,fact:c.fact,hours:d.hours,loop:t,loopKey:e,minTime:d.minTime},null,8,["data","fact","hours","loop","loopKey","minTime"])],4)))),128))])])),_:1})])),_:1})}const c={class:"row"};function d(t,e,r,o,l,i){const n=(0,s.up)("start-time");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",{style:(0,a.j5)(i.loopStyle),class:"col"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.starts,((t,e)=>((0,s.wg)(),(0,s.j4)(n,{key:e,fact:r.fact,start:t},null,8,["fact","start"])))),128))],4)])}function m(t,e,r,o,l,i){return(0,s.wg)(),(0,s.iD)("div",{style:(0,a.j5)(i.timeSlotStyle),class:"row slot"},(0,a.zw)(i.text),5)}const p={props:{start:{type:Object,required:!0},fact:{type:Number,required:!0}},computed:{text(){let t=this.$filters.minuteToTime(this.start.sttTimeFrom)+" ";return null===this.start.sttDescr?"":this.start.sttDescr.length>0?t+this.start.sttDescr:void 0!==this.start.sttPlayerName1?t+this.start.sttPlayerName1:"&nbsp"},timeSlotStyle(){let t=(this.start.sttTimeTo-this.start.sttTimeFrom)*this.fact+"px",e="#FFFFFF",r="white";return 1===this.start.sttRefType?(e=this.start.sttGrpColor1,r=this.start.sttGrpFontColor1):this.start.sttRefType>1?e="blue":this.start.sttRefType<0&&(r="black",e="lightblue"),{backgroundColor:e,height:t,color:r,borderBottom:this.start.sttGrpColor1?"1px solid white":""}}}};var f=r(4260);const T=(0,f.Z)(p,[["render",m],["__scopeId","data-v-5f1be404"]]),g=T,w={components:{StartTime:g},props:{data:Array,loop:Object,minTime:Number,fact:Number,loopKey:Number,hours:Number},computed:{starts(){return this.data.filter((t=>t.sttCrlNr===this.loop.sttCrlNr))},lMinTime(){return this.starts.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},loopStyle(){let t=Math.floor(this.minTime/60);return{width:"100%",paddingTop:(this.lMinTime-60*t)*this.fact+"px",borderLeft:this.loopKey>0?"1px solid lightgrey":"",height:60*this.hours*this.fact+"px"}}}},y=(0,f.Z)(w,[["render",d]]),b=y,C={components:{calendarLoop:b},data(){return{fact:3,data:[],date:null}},created(){this.date=this.$dayjs().format("YYYY-MM-DD")},watch:{date(){this.loadCalendar()}},computed:{courseLoops(){if(0===this.data.length)return[];const t=new Set;return this.data.filter((e=>{const r=`${e.sttCrlNr}-${e.crlName}`;return!t.has(r)&&(t.add(r),!0)})).map((t=>({sttCrlNr:t.sttCrlNr,crlName:t.crlName})))},columnWidth(){let t=this.courseLoops.length;return"calc((100% - 40px) / "+t+")"},minTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},maxTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom>t?e.sttTimeFrom:t),null)},hours(){return Math.ceil((this.maxTime-this.minTime)/60)+1},loopStyle(){return{paddingTop:60*this.fact-8+"px",height:60*this.fact+"px"}},startHour(){return Math.floor(this.minTime/60)}},methods:{async loadCalendar(){this.data=[],this.data=await this.$http.get("calendar?date="+this.date)},hourRowClass(t){return t<this.hours?"hour-row":""},timeText(t){return this.$filters.minuteToTime(60*(this.startHour+t))},closePopup(){this.$refs.myPopup.hide()}}};var v=r(2652),N=r(4379),_=r(4842),x=r(5869),F=r(3944),D=r(7518),k=r.n(D);const S=(0,f.Z)(C,[["render",h]]),j=S;k()(C,"components",{QPageContainer:v.Z,QPage:N.Z,QInput:_.Z,QSeparator:x.Z,QPopupProxy:F.Z})}}]);