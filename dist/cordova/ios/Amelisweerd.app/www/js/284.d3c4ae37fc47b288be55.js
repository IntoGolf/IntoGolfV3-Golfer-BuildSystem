"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[284],{7284:(t,e,s)=>{s.r(e),s.d(e,{default:()=>q});var r=s(2852),o=s(3100);const a={class:"row q-mb-sm"},i={class:"col"},l={class:"row calendar-row"},n={class:"hour-col"},h={key:0,class:"hour-label"};function u(t,e,s,u,m,c){const d=(0,r.g2)("q-input"),p=(0,r.g2)("q-separator"),T=(0,r.g2)("calendar-loop"),f=(0,r.g2)("q-page"),g=(0,r.g2)("q-page-container");return(0,r.uX)(),(0,r.Wv)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"q-pa-sm"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",a,[(0,r.Lk)("div",i,[(0,r.bF)(d,{modelValue:m.date,"onUpdate:modelValue":e[0]||(e[0]=t=>m.date=t),filled:"",type:"date"},null,8,["modelValue"])])]),(0,r.Lk)("div",l,[(0,r.Lk)("div",n,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.hours,((t,e)=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:(0,o.C4)(c.hourRowClass(t)),style:(0,o.Tr)(c.loopStyle)},[t<c.hours?((0,r.uX)(),(0,r.CE)("div",h,(0,o.v_)(c.timeText(t)),1)):(0,r.Q3)("",!0)],6)))),128))]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.courseLoops,((t,e)=>((0,r.uX)(),(0,r.CE)("div",{key:e,style:(0,o.Tr)({width:c.columnWidth}),class:"calendar-col"},[(0,r.Lk)("div",{class:(0,o.C4)([{"border-left":0!==e},"calendar-header"])},(0,o.v_)(t.crlName),3),(0,r.bF)(p),(0,r.bF)(T,{data:m.data,fact:m.fact,hours:c.hours,loop:t,loopKey:e,minTime:c.minTime},null,8,["data","fact","hours","loop","loopKey","minTime"])],4)))),128))])])),_:1})])),_:1})}s(5398),s(1344),s(3161),s(2e3),s(3887),s(4516),s(3422);const m={class:"row"};function c(t,e,s,a,i,l){const n=(0,r.g2)("start-time");return(0,r.uX)(),(0,r.CE)("div",m,[(0,r.Lk)("div",{style:(0,o.Tr)(l.loopStyle),class:"col loop-col"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.starts,((t,e)=>((0,r.uX)(),(0,r.Wv)(n,{key:e,fact:s.fact,minTime:s.minTime,start:t},null,8,["fact","minTime","start"])))),128))],4)])}function d(t,e,s,a,i,l){return(0,r.uX)(),(0,r.CE)("div",{style:(0,o.Tr)(l.timeSlotStyle),class:"row slot",onClick:e[0]||(e[0]=(...t)=>l.showBooking&&l.showBooking(...t))},(0,o.v_)(l.text),5)}const p={props:{start:{type:Object,required:!0},fact:{type:Number,required:!0},minTime:{type:Number,required:!0}},computed:{top(){return(this.start.sttTimeFrom-this.minTime)*this.fact+"px"},showDialog(){return 3===this.$store.getters["currentUser/usrHasCalendar"]},text(){let t=this.$filters.minuteToTime(this.start.sttTimeFrom)+" ";return null===this.start.sttDescr||this.start.isEvent?"":this.start.sttDescr.length>0?t+this.start.sttDescr:void 0!==this.start.sttPlayerName1?t+this.start.sttPlayerName1:t+" aantal spelers: "+this.start.sttPlayers},timeSlotStyle(){let t=(this.start.sttTimeTo-this.start.sttTimeFrom)*this.fact+"px",e="#FFFFFF",s="white";return 1===this.start.sttRefType?(e=this.start.sttGrpColor1,s=this.start.sttGrpFontColor1):this.start.sttRefType>1?e="blue":this.start.sttRefType<0&&(s="black",e="lightblue"),console.log(this.top),{backgroundColor:e,height:t,color:s,top:this.top}}},methods:{showBooking(){if(1!==this.start.sttRefType||!this.showDialog)return;let t=this.start.sttDescr.split("|").map((t=>t.trim())),e="- "+t.join("<br> - ");this.$q.dialog({title:"Speler(s) op flight:",message:e,html:!0,persistent:!0}).onOk((()=>{}))}}};var T=s(6317);const f=(0,T.A)(p,[["render",d],["__scopeId","data-v-4e16dacf"]]),g=f,y={components:{StartTime:g},props:{data:Array,loop:Object,minTime:Number,fact:Number,loopKey:Number,hours:Number},computed:{starts(){return this.data.filter((t=>t.sttCrlNr===this.loop.sttCrlNr))},lMinTime(){return this.starts.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},loopStyle(){let t=Math.floor(this.minTime/60);return console.log(t),{width:"100%",paddingTop:(this.lMinTime-60*t)*this.fact+"px",borderLeft:this.loopKey>0?"1px solid lightgrey":"",height:60*this.hours*this.fact+"px"}}}},b=(0,T.A)(y,[["render",c],["__scopeId","data-v-42b3b018"]]),C=b,k={components:{calendarLoop:C},data(){return{fact:3,data:[],date:null}},created(){this.date=this.$dayjs().format("YYYY-MM-DD")},watch:{date(){this.loadCalendar()}},computed:{courseLoops(){if(0===this.data.length)return[];const t=new Set;return this.data.filter((e=>{const s=`${e.sttCrlNr}-${e.crlName}`;return!t.has(s)&&(t.add(s),!0)})).map((t=>({sttCrlNr:t.sttCrlNr,crlName:t.crlName})))},columnWidth(){let t=this.courseLoops.length;return"calc((100% - 40px) / "+t+")"},minTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},maxTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom>t?e.sttTimeFrom:t),null)},hours(){return Math.ceil((this.maxTime-this.minTime)/60)+1},loopStyle(){return{paddingTop:60*this.fact-8+"px",height:60*this.fact+"px"}},startHour(){return Math.floor(this.minTime/60)}},methods:{async loadCalendar(){this.data=[],this.data=await this.$http.get("calendar?date="+this.date)},hourRowClass(t){return t<this.hours?"hour-row":""},timeText(t){return this.$filters.minuteToTime(60*(this.startHour+t))},closePopup(){this.$refs.myPopup.hide()}}};var v=s(7984),F=s(2507),w=s(7316),N=s(1177),x=s(5194),_=s(1082),S=s.n(_);const L=(0,T.A)(k,[["render",u]]),q=L;S()(k,"components",{QPageContainer:v.A,QPage:F.A,QInput:w.A,QSeparator:N.A,QPopupProxy:x.A})}}]);