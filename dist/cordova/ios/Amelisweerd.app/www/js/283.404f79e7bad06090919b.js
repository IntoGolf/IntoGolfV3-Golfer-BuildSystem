"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[283],{8283:(e,t,o)=>{o.r(t),o.d(t,{default:()=>q});o(5663);var l=o(3673);const r={key:0,class:"row cordova-hide fixed-bottom"},s={class:"row q-mt-sm"},i={class:"col text-center"},a=(0,l._)("div",{class:"row q-mt-md q-mb-md"},[(0,l._)("div",{class:"col text-center text-h5"},"Login met uw account")],-1),n={class:"text-center"};function c(e,t,o,c,u,d){const p=(0,l.up)("q-btn"),m=(0,l.up)("q-img"),g=(0,l.up)("q-input"),h=(0,l.up)("q-icon"),w=(0,l.up)("q-card-section"),f=(0,l.up)("q-card"),b=(0,l.up)("q-page-container");return(0,l.wg)(),(0,l.j4)(b,null,{default:(0,l.w5)((()=>[null!==e.settings?((0,l.wg)(),(0,l.iD)("div",r,[d.canSignIn?((0,l.wg)(),(0,l.j4)(p,{key:0,color:"primary",flat:"",label:"Inschrijven",onClick:t[0]||(t[0]=t=>e.$router.push("sign-up"))})):(0,l.kq)("",!0),d.canBookPublic?((0,l.wg)(),(0,l.j4)(p,{key:1,color:"primary",flat:"",label:"Starttijd",onClick:t[1]||(t[1]=t=>e.$router.push("teetimes"))})):(0,l.kq)("",!0),d.canBookCourse?((0,l.wg)(),(0,l.j4)(p,{key:2,color:"primary",flat:"",label:"Les",onClick:t[2]||(t[2]=t=>e.$router.push("public_lessons"))})):(0,l.kq)("",!0),d.canBookCourse?((0,l.wg)(),(0,l.j4)(p,{key:3,color:"primary",flat:"",label:"Cursus",onClick:t[3]||(t[3]=t=>e.$router.push("classes"))})):(0,l.kq)("",!0)])):(0,l.kq)("",!0),null!==e.settings?((0,l.wg)(),(0,l.j4)(f,{key:1,class:"login_card q-ml-auto q-mr-auto q-mt-xl"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l._)("div",i,[(0,l.Wm)(m,{fit:"scale-down",src:e.blobUrl,style:{"max-width":"400px","max-height":"100px"}},null,8,["src"])])]),a,(0,l.Wm)(g,{modelValue:e.form.relEmail,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.relEmail=t),rules:[e=>e&&e.length>0||"Voer aub uw e-mailadres in"],filled:"",label:"Uw e-mailadres","lazy-rules":""},null,8,["modelValue","rules"]),(0,l.Wm)(g,{modelValue:e.form.repPassword,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.repPassword=t),rules:[e=>e&&e.length>0||"Voer aub uw e-wachtwoord in"],type:e.isPwd?"password":"text",filled:"",label:"Uw wachtwoord","lazy-rules":""},{append:(0,l.w5)((()=>[(0,l.Wm)(h,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[5]||(t[5]=t=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","rules","type"]),(0,l._)("div",n,[(0,l.Wm)(p,{color:"primary",label:"Inloggen",onClick:d.onlogin},null,8,["onClick"]),(0,l.Wm)(p,{class:"q-mt-md",color:"primary",flat:"",label:"Wachtwoord vergeten",onClick:t[7]||(t[7]=t=>e.$router.push("verify-code"))})])])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1})}const u={name:"Login",data:function(){return{form:{relEmail:"",repPassword:"",repKey:""},isPwd:!0,blobUrl:"",redirect:""}},mounted(){this.loadImage(),this.$route.query.key&&(this.form.repKey=this.$route.query.key,this.onlogin()),this.form.redirect=this.$route.query.redirect},computed:{canSignIn:function(){return 1===parseInt(this.$store.state.settings.publicItems.website_display_register_button)},canBookPublic:function(){return 1===parseInt(this.$store.state.settings.publicItems.website_display_teetime_public)},canBookCourse:function(){return 1===parseInt(this.$store.state.settings.publicItems.website_display_lessons_public)}},methods:{loadImage(){this.$http.get("golfer/image/"+this.$store.state.settings.publicItems.system_logo).then((e=>{this.blobUrl="data:image/png;base64,"+e}))},async onlogin(){let e=null;if(this.$q.loading.show(),this.$q.platform.is.desktop&&(await this.$recaptchaLoaded(),this.form.captcha=await this.$recaptcha("login")),await this.$http.post("golfer/login",this.form).then((t=>{t&&(e=t,localStorage.setItem("golfer__currentUser",JSON.stringify(e)),localStorage.setItem("golfer__user_token",e.relation_password.apiToken))})).catch((e=>{this.$message.error(e)})),e.redirect)return window.location=e.redirect+"?key="+e.relation_password.apiToken;this.$q.loading.hide(),this.$router.push("/")}}};var d=o(4260),p=o(2652),m=o(8240),g=o(151),h=o(5589),w=o(4027),f=o(4842),b=o(4554),k=o(7518),y=o.n(k);const _=(0,d.Z)(u,[["render",c]]),q=_;y()(u,"components",{QPageContainer:p.Z,QBtn:m.Z,QCard:g.Z,QCardSection:h.Z,QImg:w.Z,QInput:f.Z,QIcon:b.Z})}}]);