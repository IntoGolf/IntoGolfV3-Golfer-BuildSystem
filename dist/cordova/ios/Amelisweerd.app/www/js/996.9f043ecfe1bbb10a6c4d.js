"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[996],{3996:(t,e,r)=>{r.r(e),r.d(e,{default:()=>S});var s=r(3673),o=r(2323);const a={style:{width:"100%","margin-left":"auto","margin-right":"auto","margin-top":"80px"}},i={class:"row q-mb-sm"},l={class:"col"},n={class:"row calendar-row"},u={class:"hour-col"},h={key:0,class:"hour-label"};function d(t,e,r,d,c,m){const p=(0,s.up)("q-input"),f=(0,s.up)("q-separator"),T=(0,s.up)("calendar-loop");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",i,[(0,s._)("div",l,[(0,s.Wm)(p,{modelValue:c.date,"onUpdate:modelValue":e[0]||(e[0]=t=>c.date=t),filled:"",type:"date"},null,8,["modelValue"])])]),(0,s._)("div",n,[(0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.hours,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,o.C_)(m.hourRowClass(t)),style:(0,o.j5)(m.loopStyle)},[t<m.hours?((0,s.wg)(),(0,s.iD)("div",h,(0,o.zw)(m.timeText(t)),1)):(0,s.kq)("",!0)],6)))),128))]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.courseLoops,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,style:(0,o.j5)({width:m.columnWidth}),class:"calendar-col"},[(0,s._)("div",{class:(0,o.C_)([{"border-left":0!==e},"calendar-header"])},(0,o.zw)(t.crlName),3),(0,s.Wm)(f),(0,s.Wm)(T,{data:c.data,fact:c.fact,hours:m.hours,loop:t,loopKey:e,minTime:m.minTime},null,8,["data","fact","hours","loop","loopKey","minTime"])],4)))),128))])])}const c={class:"row"};function m(t,e,r,a,i,l){const n=(0,s.up)("start-time");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",{style:(0,o.j5)(l.loopStyle),class:"col"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.starts,((t,e)=>((0,s.wg)(),(0,s.j4)(n,{key:e,fact:r.fact,start:t},null,8,["fact","start"])))),128))],4)])}function p(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",{style:(0,o.j5)(l.timeSlotStyle),class:"row slot"},(0,o.zw)(l.text),5)}const f={props:{start:{type:Object,required:!0},fact:{type:Number,required:!0}},computed:{text(){let t=this.$filters.minuteToTime(this.start.sttTimeFrom)+" ";return null===this.start.sttDescr?"":this.start.sttDescr.length>0?t+this.start.sttDescr:void 0!==this.start.sttPlayerName1?t+this.start.sttPlayerName1:"&nbsp"},timeSlotStyle(){let t=(this.start.sttTimeTo-this.start.sttTimeFrom)*this.fact+"px",e="#FFFFFF",r="white";return 1===this.start.sttRefType?(e=this.start.sttGrpColor1,r=this.start.sttGrpFontColor1):this.start.sttRefType>1?e="blue":this.start.sttRefType<0&&(r="black",e="lightblue"),{backgroundColor:e,height:t,color:r,borderBottom:this.start.sttGrpColor1?"1px solid white":""}}}};var T=r(4260);const g=(0,T.Z)(f,[["render",p],["__scopeId","data-v-5f1be404"]]),y=g,w={components:{StartTime:y},props:{data:Array,loop:Object,minTime:Number,fact:Number,loopKey:Number,hours:Number},computed:{starts(){return this.data.filter((t=>t.sttCrlNr===this.loop.sttCrlNr))},lMinTime(){return this.starts.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},loopStyle(){let t=Math.floor(this.minTime/60);return{width:"100%",paddingTop:(this.lMinTime-60*t)*this.fact+"px",borderLeft:this.loopKey>0?"1px solid lightgrey":"",height:60*this.hours*this.fact+"px"}}}},b=(0,T.Z)(w,[["render",m]]),v=b,C={components:{calendarLoop:v},data(){return{fact:3,data:[],date:null}},created(){this.date=this.$dayjs().format("YYYY-MM-DD")},watch:{date(){this.loadCalendar()}},computed:{courseLoops(){if(0===this.data.length)return[];const t=new Set;return this.data.filter((e=>{const r=`${e.sttCrlNr}-${e.crlName}`;return!t.has(r)&&(t.add(r),!0)})).map((t=>({sttCrlNr:t.sttCrlNr,crlName:t.crlName})))},columnWidth(){let t=this.courseLoops.length;return"calc((100% - 40px) / "+t+")"},minTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},maxTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom>t?e.sttTimeFrom:t),null)},hours(){return Math.ceil((this.maxTime-this.minTime)/60)+1},loopStyle(){return{paddingTop:60*this.fact-8+"px",height:60*this.fact+"px"}},startHour(){return Math.floor(this.minTime/60)}},methods:{async loadCalendar(){this.data=[],this.data=await this.$http.get("calendar?date="+this.date)},hourRowClass(t){return t<this.hours?"hour-row":""},timeText(t){return this.$filters.minuteToTime(60*(this.startHour+t))},closePopup(){this.$refs.myPopup.hide()}}};var x=r(4842),N=r(5869),F=r(3944),D=r(7518),_=r.n(D);const k=(0,T.Z)(C,[["render",d]]),S=k;_()(C,"components",{QInput:x.Z,QSeparator:N.Z,QPopupProxy:F.Z})}}]);