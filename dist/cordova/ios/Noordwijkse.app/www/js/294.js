"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[294],{4294:(e,s,l)=>{l.r(s),l.d(s,{default:()=>ne});var o=l(3673),n=l(8880);const t={class:"text-center"},r=(0,o._)("h5",null,"Geen toekomstige lessen gevonden",-1),i=[r];function a(e,s,l,r,a,p){const d=(0,o.up)("q-btn"),c=(0,o.up)("q-separator"),u=(0,o.up)("comp-lesson"),h=(0,o.up)("comp-new"),m=(0,o.up)("q-card"),y=(0,o.up)("q-page"),w=(0,o.up)("q-page-container");return(0,o.wg)(),(0,o.j4)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(d,{color:"primary",label:"Nieuwe les",size:"small",onClick:s[0]||(s[0]=s=>e.newLesson=!0)}),(0,o.Wm)(c,{class:"q-mt-md"}),(0,o.wy)((0,o._)("div",t,i,512),[[n.F8,0===e.clientLessonArray.length]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.clientLessonArray,((e,s)=>((0,o.wg)(),(0,o.j4)(u,{key:s,lesson:e,onHandleLoadClientLessons:p.handleLoadClientLessons},null,8,["lesson","onHandleLoadClientLessons"])))),128))],512),[[n.F8,!e.newLesson]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(h,{onHandleCloseNew:p.handleCloseNew},null,8,["onHandleCloseNew"])],512),[[n.F8,e.newLesson]])])),_:1})])),_:1})])),_:1})}var p=l(6490),d=l(2323);const c={class:"row full-width q-mt-md q-pa-sm",style:{border:"1px solid lightgrey","border-radius":"4px"}},u={class:"col-12"},h={class:"row"},m={class:"col-6"},y={class:"col-6 text-right"},w={class:"row"},f={class:"col-6"},g={class:"col-6 text-right"};function L(e,s,l,n,t,r){const i=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",u,[(0,o._)("div",h,[(0,o._)("div",m,[(0,o._)("b",null,(0,d.zw)(l.lesson.pro_lesson.pro_lesson_type.pltName),1)]),(0,o._)("div",y,[(0,o._)("b",null,(0,d.zw)(e.$filters.unixToDate(l.lesson.pro_lesson.lesDate,"ddd DD MMM")),1),(0,o.Uk)(" "+(0,d.zw)(e.$filters.minuteToTime(l.lesson.pro_lesson.lesTimeFrom)),1)])]),(0,o._)("div",w,[(0,o._)("div",f,[(0,o._)("i",null,"pro: "+(0,d.zw)(l.lesson.pro_lesson.relation.full_name2),1)]),(0,o._)("div",g,[(0,o.Wm)(i,{color:"primary",size:"xs",onClick:s[0]||(s[0]=e=>r.handleCancel(l.lesson.pro_lesson))},{default:(0,o.w5)((()=>[(0,o.Uk)("Annuleer ")])),_:1})])])])])}const _={props:{lesson:Object},data:function(){return{}},methods:{handleCancel:function(e){this.$q.dialog({title:"Annuleer les",message:"Deze les wordt geannuleerd, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{e.lesCarNr=1,this.$http.post("golfer/lesson",e).then((()=>{this.$q.notify({type:"positive",message:"uw les is geannuleerd"}),this.newLesson=!1,this.$emit("handleLoadClientLessons")}))}))}}};var v=l(4260),T=l(8240),N=l(7518),A=l.n(N);const k=(0,v.Z)(_,[["render",L]]),b=k;A()(_,"components",{QBtn:T.Z});const C={class:"row q-mt-md q-gutter-sm"},q={class:"col"},D={class:"col"},$={class:"row"},x={class:"col hide-scrollbar",style:{"overflow-x":"scroll"}},Z={class:"row"},F={class:"col q-pt-sm text-bold text-center"},B={class:"row hide-scrollbar",style:{"overflow-y":"scroll",height:"400px"}};function W(e,s,l,n,t,r){const i=(0,o.up)("q-input"),a=(0,o.up)("q-select"),p=(0,o.up)("q-separator"),c=(0,o.up)("comp-lesson");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",C,[(0,o._)("div",q,[(0,o.Wm)(i,{ref:"date",modelValue:e.date,"onUpdate:modelValue":s[0]||(s[0]=s=>e.date=s),dense:"",label:"Datum","lazy-rules":"",outlined:"",type:"date"},null,8,["modelValue"])]),(0,o._)("div",D,[(0,o.Wm)(a,{modelValue:e.pltNr,"onUpdate:modelValue":s[1]||(s[1]=s=>e.pltNr=s),options:r.lessonType1Array,dense:"","emit-value":"",label:"Soort les","map-options":"","option-label":"pltName","option-value":"pltNr",outlined:""},null,8,["modelValue","options"])])]),(0,o.Wm)(p,{class:"q-mt-md"}),(0,o._)("div",$,[(0,o._)("div",x,[(0,o._)("div",{style:(0,d.j5)({width:r.colWidth}),class:"row q-gutter-sm"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.proArray,((s,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,class:"col"},[(0,o._)("div",Z,[(0,o._)("div",F,[(0,o._)("b",null,(0,d.zw)(s.full_name2),1)])]),(0,o._)("div",B,[(0,o.Wm)(c,{lessons:e.lessonArray,pro:s,proLessonType:r.proLessonType,onHandleBook:r.handleBook},null,8,["lessons","pro","proLessonType","onHandleBook"])])])))),128))],4)])])])}l(5663);const z=["onClick"],Y={class:"row"},H={class:"col"},Q={class:"row"},M={class:"col"},j={class:"row"},U={class:"col"};function V(e,s,l,n,t,r){return(0,o.wg)(),(0,o.iD)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.lessonFilter,((s,n)=>((0,o.wg)(),(0,o.iD)("div",{key:n,align:"left",class:"full-width q-mt-md bg-orange q-pa-sm",onClick:l=>e.$emit("handleBook",s)},[(0,o._)("div",Y,[(0,o._)("div",H,[(0,o._)("div",Q,[(0,o._)("div",M,[(0,o._)("b",null,(0,d.zw)(e.$filters.minuteToTime(s.pagTimeFrom)),1)])]),(0,o._)("div",j,[(0,o._)("div",U,[(0,o._)("i",null,"max. "+(0,d.zw)(l.proLessonType.pltMaxPers)+" pers.",1)])])])])],8,z)))),128))])}const O={props:{pro:Object,lessons:Array,proLessonType:Object},computed:{lessonFilter:function(){return void 0===this.lessons?[]:this.lessons.filter((e=>e.pro.relNr===this.pro.relNr))}},methods:{}},P=(0,v.Z)(O,[["render",V]]),S=P,K={components:{compLesson:S},data:function(){return{date:null,relNr:null,pltNr:null,lessonArray:[],lessonTypeArray:[],clientLessonArray:[]}},watch:{date:function(){this.handleLoad()},pltNr:function(){this.handleLoad()}},mounted(){this.handleLoadLessonTypes()},computed:{lessonType1Array:function(){return this.lessonTypeArray.filter((e=>1==e.pltLtcNr))},pro:function(){return this.proArray.find((e=>e.relNr===this.relNr))},proLessonType:function(){return this.lessonTypeArray.find((e=>e.pltNr===this.pltNr))},proArray:function(){if(void 0===this.lessonArray)return[];let e=[];return this.lessonArray.reduce(((s,l)=>(e.includes(l.pro.relNr)||(e.push(l.pro.relNr),s.push(l.pro)),s)),[])},colWidth:function(){return 120*this.proArray.length+"px"}},methods:{handleLoad:function(){this.$http.get("golfer/lessons?date="+this.date+"&pltNr="+this.pltNr).then((e=>{this.lessonArray=e,this.proArray.length>0&&(this.relNr=this.proArray[0].relNr)}))},handleLoadLessonTypes:function(){this.$http.get("golfer/lessonTypes").then((e=>{this.lessonTypeArray=e,this.pltNr=this.lessonTypeArray[0].pltNr,this.date=this.$dayjs().format("YYYY-MM-DD")}))},handleBook:function(e){this.$q.dialog({title:"Boek een les",message:"Uw boekt nu een les, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let s={lesNr:null,lesRelNrPro:e.pro.relNr,lesPltNr:e.pro_lesson_type.pltNr,lesDate:this.$filters.dateToUnix(this.date,"YYYY-MM-DD"),lesTimeFrom:e.pagTimeFrom,lesTimeTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesBlockedFrom:e.pagTimeFrom,lesBlockedTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesCarNr:0};this.$http.post("golfer/lesson",s).then((()=>{this.$q.notify({type:"positive",message:"Uw les is geboekt"}),this.$emit("handleCloseNew")}))}))}}};var G=l(4842),I=l(8516),R=l(5869);const E=(0,v.Z)(K,[["render",W]]),J=E;A()(K,"components",{QInput:G.Z,QSelect:I.Z,QSeparator:R.Z});const X={mixins:[p.Z],components:{compLesson:b,compNew:J},data:function(){return{newLesson:!1,clientLessonArray:[]}},watch:{newLesson:function(e){e||this.handleLoadClientLessons()}},mounted(){this.handleLoadClientLessons()},methods:{handleLoadClientLessons:function(){this.$http.get("golfer/clientLessons").then((e=>{this.clientLessonArray=e}))},handleCloseNew:function(){this.handleLoadClientLessons(),this.newLesson=!1}}};var ee=l(2652),se=l(4379),le=l(151);const oe=(0,v.Z)(X,[["render",a]]),ne=oe;A()(X,"components",{QPageContainer:ee.Z,QPage:se.Z,QCard:le.Z,QBtn:T.Z,QSeparator:R.Z})}}]);