"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[494],{8967:(e,l,t)=>{t.r(l),t.d(l,{default:()=>pt});var a=t(3673);function i(e,l,t,i,n,s){const o=(0,a.up)("List"),r=(0,a.up)("Reservation"),d=(0,a.up)("Booking"),c=(0,a.up)("q-page-container");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[n.page===n.LIST?((0,a.wg)(),(0,a.j4)(o,{key:0,array:n.array,onHandleClose:s.handleClose,onHandleOpenBooking:s.handleOpenBooking,onHandleOpenFlight:s.handleOpenFlight,onLoadReservationList:s.loadReservationList},null,8,["array","onHandleClose","onHandleOpenBooking","onHandleOpenFlight","onLoadReservationList"])):(0,a.kq)("",!0),n.page===n.RESERVATION?((0,a.wg)(),(0,a.j4)(r,{key:1,flight:n.flight,onHandleClose:s.handleClose},null,8,["flight","onHandleClose"])):(0,a.kq)("",!0),n.page===n.BOOKING?((0,a.wg)(),(0,a.j4)(d,{key:2,onHandleClose:s.handleClose,onHandleOpenFlight:s.handleOpenFlight,onLoadReservationList:s.loadReservationList},null,8,["onHandleClose","onHandleOpenFlight","onLoadReservationList"])):(0,a.kq)("",!0)])),_:1})}const n={key:0};function s(e,l,t,i,s,o){const r=(0,a.up)("comp-details"),d=(0,a.up)("comp-player"),c=(0,a.up)("comp-edit-player"),h=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(h,{class:"q-pa-sm"},{default:(0,a.w5)((()=>[null===e.editPlayer?((0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(r,{flight:e.local_flight,onHandleClose:o.handleClose,onHandleSave:o.handleSave},null,8,["flight","onHandleClose","onHandleSave"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.playerArray,((l,t)=>((0,a.wg)(),(0,a.j4)(d,{key:t,flight:e.local_flight,player:l,class:"q-mb-md",onHandleEditPlayer:o.handleEditPlayer,onHandleSave:o.handleSave},null,8,["flight","player","onHandleEditPlayer","onHandleSave"])))),128))])):(0,a.kq)("",!0),e.editPlayer?((0,a.wg)(),(0,a.j4)(c,{key:1,flight:e.local_flight,player:e.editPlayer,onHandleCloseEditPlayer:o.handleCloseEditPlayer,onHandleSave:o.handleSave},null,8,["flight","player","onHandleCloseEditPlayer","onHandleSave"])):(0,a.kq)("",!0)])),_:1})}var o=t(2323),r=t(8880);const d={class:"row q-mb-sm"},c=(0,a._)("div",{class:"col text-bold"},"Slot",-1),h={class:"col-8 text-right"},f={class:"row q-mb-sm"},p=(0,a._)("div",{class:"col text-bold"},"Lus uit",-1),u={class:"col-8 text-right"},m={key:0,class:"row q-mb-sm"},g=(0,a._)("div",{class:"col text-bold"},"Lus in",-1),y={class:"col-8 text-right"},w={class:"row q-mb-sm"},_=(0,a._)("div",{class:"col text-bold"},"Boeker",-1),v={class:"col-8 text-right"},k={class:"row q-mb-sm"},b=(0,a._)("div",{class:"col text-bold"},"Spelers",-1),x={class:"col-8 text-right"},C={class:"row q-mb-sm"},N=(0,a._)("div",{class:"col text-bold"},"Intro ruimte",-1),q={class:"col-8 text-right"},S={class:"row q-mb-sm"},D=(0,a._)("div",{class:"col text-bold"},"Greenfee",-1),I={class:"col-8 text-right"},$={class:"row q-mb-sm"},P=(0,a._)("div",{class:"col text-bold"},"Greenfee tarief",-1),H={class:"col-8 text-right"},T={class:"row q-mb-sm"},F=(0,a._)("div",{class:"col text-bold"},"Greenfee totaal",-1),W={class:"col-8 text-right"},M={class:"row"},j=(0,a._)("div",{class:"col text-bold"},"Vervalt op",-1),Z={class:"col-8 text-right"},z={class:"row"},E=(0,a._)("div",{class:"col text-bold"},"Status",-1),V=(0,a._)("div",{class:"col-8 text-right"},"Betaald",-1),R=[E,V],Y={class:"row q-gutter-md"},Q={class:"col"};function O(e,l,t,i,n,s){const E=(0,a.up)("q-banner"),V=(0,a.up)("q-btn"),O=(0,a.up)("q-card-section"),U=(0,a.up)("q-separator"),B=(0,a.up)("comp-dialog18-holes"),L=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)(a.HY,null,[t.flight.booking_at_risk?((0,a.wg)(),(0,a.j4)(E,{key:0,class:"text-white bg-red q-mb-md text-center",dense:""},{default:(0,a.w5)((()=>[(0,a.Uk)(" Let op, u heeft tot "+(0,o.zw)(s.expire)+" om uw boeking af te ronden? ",1)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(L,{class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Uw starttijd "),(0,a.wy)((0,a.Wm)(V,{class:"float-right",color:"negative",icon:"delete",onClick:s.handleCancel},null,8,["onClick"]),[[r.F8,s.canCancel&&!s.paid&&s.isMyBooking]])])),_:1}),(0,a.Wm)(U),(0,a.Wm)(O,null,{default:(0,a.w5)((()=>[(0,a._)("div",d,[c,(0,a._)("div",h,(0,o.zw)(s.slot),1)]),(0,a._)("div",f,[p,(0,a._)("div",u,(0,o.zw)(e.local_flight.loop1.crlName),1)]),e.local_flight.fltCrlNr2>0?((0,a.wg)(),(0,a.iD)("div",m,[g,(0,a._)("div",y,(0,o.zw)(s.courseLoop),1)])):(0,a.kq)("",!0),(0,a._)("div",w,[_,(0,a._)("div",v,(0,o.zw)(s.bookerName),1)]),(0,a._)("div",k,[b,(0,a._)("div",x,(0,o.zw)(t.flight.fltSize),1)]),(0,a._)("div",C,[N,(0,a._)("div",q,(0,o.zw)(t.flight.IntroMax-t.flight.IntroCount)+"X ",1)]),(0,a.wy)((0,a._)("div",S,[D,(0,a._)("div",I,(0,o.zw)(null===t.flight.flight_players[0].greenfee?"-":t.flight.flight_players[0].greenfee.grfName),1)],512),[[r.F8,e.showPay]]),(0,a.wy)((0,a._)("div",$,[P,(0,a._)("div",H,(0,o.zw)(null===t.flight.flight_players[0].flpPrice?e.$filters.money(0):e.$filters.money(t.flight.flight_players[0].flpPrice)),1)],512),[[r.F8,e.showPay]]),(0,a.wy)((0,a._)("div",T,[F,(0,a._)("div",W,(0,o.zw)(e.$filters.money(s.total)),1)],512),[[r.F8,e.showPay]]),(0,a.wy)((0,a._)("div",M,[j,(0,a._)("div",Z,(0,o.zw)(e.$dayjs(t.flight.fltTimestamp).add(30,"minutes").format("dddd D MMM HH:mm")),1)],512),[[r.F8,e.showPay&&!s.paid]]),(0,a.wy)((0,a._)("div",z,R,512),[[r.F8,e.showPay&&s.paid]])])),_:1}),(0,a.Wm)(U),(0,a.Wm)(O,null,{default:(0,a.w5)((()=>[(0,a._)("div",Y,[(0,a._)("div",Q,[(0,a.Wm)(V,{class:"q-mr-sm",color:"primary",icon:"arrow_back",onClick:l[0]||(l[0]=l=>e.$emit("handleClose"))}),(0,a.Wm)(V,{class:"q-mr-sm",color:"primary",icon:"ios_share",onClick:s.showShareDialog},null,8,["onClick"]),e.showSecondNine&&s.canCancel&&s.isMyBooking&&!s.paid?((0,a.wg)(),(0,a.j4)(V,{key:0,class:"q-mr-sm",color:"primary",label:"Wijzig 18",onClick:l[1]||(l[1]=l=>e.dialogVisible=!0)})):(0,a.kq)("",!0),e.showPay&&s.canCancel&&s.isMyBooking&&!s.paid?(0,a.wy)(((0,a.wg)(),(0,a.j4)(V,{key:1,class:"float-right",color:"primary",icon:"payments",onClick:s.onPay},null,8,["onClick"])),[[r.F8,!s.paid]]):(0,a.kq)("",!0)])])])),_:1}),(0,a.Wm)(B,{dialogVisible:e.dialogVisible,flight:t.flight,onHandleClose:s.handleClose18},null,8,["dialogVisible","flight","onHandleClose"])])),_:1})],64)}const U=["onClick"];function B(e,l,t,i,n,s){const r=(0,a.up)("q-btn"),d=(0,a.up)("q-card-section"),c=(0,a.up)("q-separator"),h=(0,a.up)("q-card"),f=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(f,{ref:"dialog_h18",onHide:s.onDialogHide},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"max-width":"320px",width:"95%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Uw tweede 9 "),(0,a.Wm)(r,{class:"float-right",flat:"",onClick:l[0]||(l[0]=l=>e.$emit("handleClose")),label:"Sluiten"})])),_:1}),(0,a.Wm)(c),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.filteredArray,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"q-ma-xs button-second-nine",key:l,onClick:l=>s.handleSave(e)},(0,o.zw)(e.crlName+" "+e.sttTimeFromText),9,U)))),128))])),_:1})])),_:1})])),_:1},8,["onHide"])}t(4564);const L={props:{flight:Object,dialogVisible:Boolean},data:function(){return{teetimes:[],local_flight:{...this.flight}}},watch:{dialogVisible:function(e){e?this.$refs.dialog_h18.show():this.$refs.dialog_h18.hide()}},computed:{filteredArray:function(){let e=this,l=[];return this.teetimes.forEach((function(t,a){Object.entries(t.times).forEach((function(a){a[1].sttTimeFrom>e.flight.fltTime1+130&&l.push({crlNr:t.crlNr,crlName:t.crlName,sttTimeFrom:a[1].sttTimeFrom,sttTimeFromText:e.$filters.minuteToTime(a[1].sttTimeFrom)})}))})),l}},created(){this.handleLoadTeetimes()},methods:{handleLoadTeetimes:function(){let e=this.$filters.unixToDate(this.flight.fltDate,"YYYY-MM-DD");this.$http.get("golfer/teetimes?date="+e).then((e=>{this.teetimes=e.payload}))},handleSave:function(e){this.local_flight.fltCrlNr2=e.crlNr,this.local_flight.fltTime2=e.sttTimeFrom,this.$http.post("golfer/booking",this.local_flight).then((e=>{this.$emit("handleClose",e.flight)}))},onDialogHide:function(){this.$emit("handleClose")}}};var G=t(4260),A=t(6778),K=t(151),X=t(5589),J=t(8240),ee=t(5869),le=t(7518),te=t.n(le);const ae=(0,G.Z)(L,[["render",B]]),ie=ae;te()(L,"components",{QDialog:A.Z,QCard:K.Z,QCardSection:X.Z,QBtn:J.Z,QSeparator:ee.Z});var ne=t(6490);const se={mixins:[ne.Z],components:{compDialog18Holes:ie},props:{flight:Object},data:function(){return{local_flight:this.flight,dialogVisible:!1,showPay:0,showSecondNine:0,chatList:[],circleShare:null}},mounted(){this.showPay="1"===this.settings.app_display_greenfee_pay,this.showSecondNine=this.settings.app_display_second_nine_select,this.getChats()},computed:{expire:function(){return this.$dayjs(this.flight.fltExpire).format("HH:mm")},cancelHours:function(){return this.settings.planner_cancel_hours&&parseInt(this.settings.planner_cancel_hours)>0?parseInt(this.settings.planner_cancel_hours):24},canCancel:function(){return this.$dayjs(this.$filters.unixToDate(this.local_flight.fltDate),"DD-MM-YYYY").add(this.local_flight.fltTime1,"minutes").isAfter(this.$dayjs().add(60*this.cancelHours,"minutes"))},slot:function(){return this.$dayjs(this.$filters.unixToDate(this.local_flight.fltDate)+" "+this.$filters.minuteToTime(this.local_flight.fltTime1),"DD-MM-YYYY H:mm").format("dddd D MMM HH:mm")},courseLoop:function(){return this.$filters.minuteToTime(this.local_flight.fltTime2)+" - "+this.local_flight.loop2.crlName},bookerName:function(){return this.local_flight.flight_players[0].flpName},isMyBooking:function(){return this.local_flight.flight_players[0].flpRelNr===this.currentUser.relNr},total:function(){return this.local_flight.flight_players.reduce((function(e,l){return e+l.flpPrice}),0)},paid:function(){return this.local_flight.flight_players.filter((e=>e.flpBilNr>0||e.flpScorecard>0)).length>0},chatCheckArray(){return this.chatList.map((function(e){return{value:e.chtNr,label:e.chtName}}))}},methods:{handleCancel:function(){this.local_flight.fltCarNr=1,this.$q.dialog({title:"Starttijd annuleren",message:"Wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{this.$emit("handleSave",this.local_flight,!0)}))},handleSave:function(){this.local_flight.fltCarNr=1,this.$q.dialog({title:"Starttijd annuleren",message:"Wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{this.$emit("handleSave",this.local_flight,!0)}))},onPay:function(){this.$http.get("golfer/pay",{params:{fltNr:this.flight.fltNr}}).then((e=>{200===e.status&&(window.location.href=e.url)}))},showShareDialog(){this.$q.dialog({title:"Selecteer Chat's",message:"Kies de chats waar u uw boeking wilt delen",options:{type:"checkbox",model:[],items:this.chatCheckArray}}).onOk((e=>{this.shareBooking(e)}))},async getChats(){const e=await this.$http.get("chat/list?flat=true");this.chatList=e.data},shareBooking(e){let l={fltNr:this.local_flight.fltNr,cirArray:e};this.$http.post("golfer/booking/share",l)},handleClose18:function(e){void 0!==e&&(this.local_flight=e),this.dialogVisible=!1}}};var oe=t(5607);const re=(0,G.Z)(se,[["render",O]]),de=re;function ce(e,l,t,i,n,s){const o=(0,a.up)("select-player"),r=(0,a.up)("player-details");return(0,a.wg)(),(0,a.iD)("div",null,[t.player.flpName?((0,a.wg)(),(0,a.j4)(r,{key:1,flight:t.flight,player:t.player,onHandleEditPlayer:s.handleEditPlayer,onHandleSave:s.handleSave},null,8,["flight","player","onHandleEditPlayer","onHandleSave"])):((0,a.wg)(),(0,a.j4)(o,{key:0,flight:t.flight,player:t.player,onHandleSave:s.handleSave},null,8,["flight","player","onHandleSave"]))])}te()(se,"components",{QBanner:oe.Z,QCard:K.Z,QCardSection:X.Z,QBtn:J.Z,QSeparator:ee.Z});const he=(0,a._)("p",null," Deze plaats is nog vrij in uw flight. U kunt een speler toevoegen met wie u de afgelopen 6 maanden heeft gespeeld. ",-1),fe=(0,a._)("p",null,"U kunt ook zoeken in het ledenbestand van uw club.",-1),pe=(0,a._)("p",null,"Of u voert de naam in van de gast die u wenst uit te nodigen.",-1);function ue(e,l,t,i,n,s){const o=(0,a.up)("q-card-section"),r=(0,a.up)("q-separator"),d=(0,a.up)("q-select"),c=(0,a.up)("q-item-section"),h=(0,a.up)("q-item"),f=(0,a.up)("q-input"),p=(0,a.up)("q-btn"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Vrije plaats")])),_:1}),(0,a.Wm)(r),(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[he,(0,a.Wm)(d,{modelValue:e.knownPlayer,"onUpdate:modelValue":[l[0]||(l[0]=l=>e.knownPlayer=l),e.knownPlayerList],disable:""!==e.guest||""!==e.relation,options:e.list,behavior:"menu",class:"q-mb-sm",clearable:"","emit-value":"",label:"Selecteer een bekende","map-options":"","option-label":"flpName","option-value":"flpName","use-input":"",onFilter:s.knownFilterFn},null,8,["modelValue","disable","options","onFilter","onUpdate:modelValue"]),fe,(0,a.Wm)(d,{modelValue:e.relation,"onUpdate:modelValue":l[1]||(l[1]=l=>e.relation=l),disable:""!==e.guest||""!==e.knownPlayer,options:e.relations,behavior:"menu",class:"q-mb-sm",clearable:"","emit-value":"","fill-input":"","hide-selected":"","input-debounce":"0",label:"Zoek in clubleden","map-options":"","option-label":"full_name","option-value":"relNr","use-input":"",onFilter:s.filterFn},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"text-grey"},{default:(0,a.w5)((()=>[(0,a.Uk)("No results")])),_:1})])),_:1})])),_:1},8,["modelValue","disable","options","onFilter"]),t.flight.open_for_guest?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[pe,(0,a.Wm)(f,{modelValue:e.guest,"onUpdate:modelValue":l[2]||(l[2]=l=>e.guest=l),disable:""!==e.knownPlayer||""!==e.relation,clearable:"",label:"Voer de naam van uw gast in",outlined:""},null,8,["modelValue","disable"])],64)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(r),(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{disable:""===e.knownPlayer&&""===e.relation&&""===e.guest,class:"q-mr-md",color:"primary",label:"Opslaan",onClick:s.handleSave},null,8,["disable","onClick"])])),_:1})])),_:1})}const me={props:{flight:Object,player:Object},data:function(){return{knownPlayerList:[],list:[],relations:[],knownPlayer:"",relation:"",guest:"",filterVal:""}},watch:{knownPlayer:function(e){this.knownPlayer=null===e?"":e},relation:function(e){this.relation=null===e?"":e},guest:function(e){this.guest=null===e?"":e}},computed:{},created(){this.handleLoad()},methods:{knownFilterFn(e,l,t){l((()=>{const l=e.toLowerCase();this.list=this.knownPlayerList.filter((e=>e.flpName.toLowerCase().indexOf(l)>-1))}))},handleLoad:function(){let e=this;this.$http.get("golfer/knownPlayers?fltNr="+this.flight.fltNr).then((l=>{e.knownPlayerList=e.list=l}))},handleSave:function(){let e={...this.flight},l=e.flight_players.findIndex((e=>e.flpNr===this.player.flpNr));if(this.knownPlayer){let t=this.knownPlayerList.find((e=>e.flpName===this.knownPlayer));e.flight_players[l].flpName=t.flpName,e.flight_players[l].flpHandicap=t.flpHandicap,e.flight_players[l].flpGsn=t.flpGsn,e.flight_players[l].flpEmail=t.flpEmail,e.flight_players[l].flpPhone=t.flpPhone,e.flight_players[l].flpRelNr=t.flpRelNr,this.$emit("handleSave",e,!1,-1)}else this.guest?(e.flight_players[l].flpName=this.guest,this.$emit("handleSave",e,!1,l)):(e.flight_players[l].flpRelNr=this.relation,this.$emit("handleSave",e,!1,-1))},async filterFn(e,l,t){if(void 0===e||e.length<2)return;let a=this,i=this.flight.fltNr;await this.$http.get(`golfer/relation?search=${e}&fltNr=${i}`).then((e=>{l((()=>{a.relations=e}))}))}}};var ge=t(8516),ye=t(3414),we=t(2035),_e=t(4842);const ve=(0,G.Z)(me,[["render",ue]]),ke=ve;te()(me,"components",{QCard:K.Z,QCardSection:X.Z,QSeparator:ee.Z,QSelect:ge.Z,QItem:ye.Z,QItemSection:we.Z,QInput:_e.Z,QBtn:J.Z});const be={class:"row q-mb-sm"},xe=(0,a._)("div",{class:"col text-bold"},"E-mail",-1),Ce={class:"col-8 text-right"},Ne={class:"row q-mb-sm"},qe=(0,a._)("div",{class:"col text-bold"},"Telefoon",-1),Se={class:"col-8 text-right"},De={class:"row q-mb-sm"},Ie=(0,a._)("div",{class:"col text-bold"},"Handicap",-1),$e={class:"col-8 text-right"},Pe={class:"row q-mb-sm"},He=(0,a._)("div",{class:"col text-bold"},"Gsn",-1),Te={class:"col-8 text-right"},Fe={class:"row q-mb-sm"},We=(0,a._)("div",{class:"col text-bold"},"Intro",-1),Me={class:"col-8 text-right"},je={class:"row q-mb-sm"},Ze=(0,a._)("div",{class:"col text-bold"},"Greenfee",-1),ze={class:"col-8 text-right"},Ee={class:"row"},Ve=(0,a._)("div",{class:"col text-bold"},"Greenfee tarief",-1),Re={class:"col-8 text-right"};function Ye(e,l,t,i,n,s){const d=(0,a.up)("q-card-section"),c=(0,a.up)("q-separator"),h=(0,a.up)("q-icon"),f=(0,a.up)("q-btn"),p=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(null===t.player.flpName?"Vrije plaats":t.player.flpName),1)])),_:1}),(0,a.Wm)(c),(0,a.wy)((0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",be,[xe,(0,a._)("div",Ce,(0,o.zw)(null===t.player.flpEmail?"-":t.player.flpEmail),1)],512),[[r.F8,null===t.player.flpRelNr]]),(0,a.wy)((0,a._)("div",Ne,[qe,(0,a._)("div",Se,(0,o.zw)(null===t.player.flpPhone?"-":t.player.flpPhone),1)],512),[[r.F8,null===t.player.flpRelNr]]),(0,a._)("div",De,[Ie,(0,a._)("div",$e,(0,o.zw)(null===t.player.flpHandicap?"-":t.player.flpHandicap),1)]),(0,a.wy)((0,a._)("div",Pe,[He,(0,a._)("div",Te,(0,o.zw)(null===t.player.flpGsn?"-":t.player.flpGsn),1)],512),[[r.F8,null===t.player.flpRelNr]]),(0,a.wy)((0,a._)("div",Fe,[We,(0,a._)("div",Me,[(0,a.wy)((0,a.Wm)(h,{color:"primary",name:"check"},null,512),[[r.F8,1===t.player.flpIntro]])])],512),[[r.F8,null===t.player.flpRelNr]]),(0,a.wy)((0,a._)("div",je,[Ze,(0,a._)("div",ze,(0,o.zw)(null===t.player.greenfee?"-":t.player.greenfee.grfName),1)],512),[[r.F8,s.showPay]]),(0,a.wy)((0,a._)("div",Ee,[Ve,(0,a._)("div",Re,(0,o.zw)(null===t.player.flpPrice?"-":e.$filters.money(t.player.flpPrice)),1)],512),[[r.F8,s.showPay]])])),_:1},512),[[r.F8,null!==t.player.flpName]]),(0,a.wy)((0,a.Wm)(c,null,null,512),[[r.F8,s.canCancel&&!s.paid]]),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(f,{class:"q-mr-md",color:"primary",icon:"edit",onClick:l[0]||(l[0]=l=>e.$emit("handleEditPlayer",t.player))},null,512),[[r.F8,s.canCancel&&!s.paid]])])),_:1})])),_:1})}const Qe={mixins:[ne.Z],props:{flight:Object,player:Object},data:function(){return{}},computed:{showPay:function(){return"1"===this.settings.app_display_greenfee_pay},canCancel:function(){return!this.$dayjs(this.$filters.unixToDate(this.flight.fltDate),"DD-MM-YYYY").isBefore(this.$dayjs())&&(!!this.$dayjs(this.$filters.unixToDate(this.flight.fltDate),"DD-MM-YYYY").isAfter(this.$dayjs())||this.flight.fltTime1+20>this.$filters.timeToMinute(this.$dayjs().format("HH:mm")))},isMyBooking:function(){return this.flight.flight_players[0].flpRelNr===this.currentUser.relNr},paid:function(){return this.player&&(this.player.flpBilNr>0||this.player.flpScorecard>0)}},methods:{handleCancel:function(){this.$q.dialog({title:"Speler annuleren",message:"U annuleert de deelname van deze speler, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let e={...this.flight},l=this.local_flight.flight_players.findIndex((e=>e.flpNr=this.player.flpNr));this.local_flight.flight_players[l].flpCarNr=1;let t={flpNr:null,flpSide:this.local_flight.flight_players[l].flpSide,flpRelNr:null,flpName:null,flpEmail:"",flpHandicap:"",flpCarNr:null};e.flight_players.splice(player.flpSide-1,0,t),this.$emit("handleSave",e,!1,-1)}))},handleSave:function(e,l){this.$emit("handleSave",e,l,-1)}}};var Oe=t(4554);const Ue=(0,G.Z)(Qe,[["render",Ye]]),Be=Ue;te()(Qe,"components",{QCard:K.Z,QCardSection:X.Z,QSeparator:ee.Z,QIcon:Oe.Z,QBtn:J.Z});const Le={components:{PlayerDetails:Be,SelectPlayer:ke},props:{flight:Object,player:Object},data:function(){return{}},methods:{handleSave:function(e,l,t){this.$emit("handleSave",e,l,t)},handleEditPlayer:function(e){this.$emit("handleEditPlayer",e)}}},Ge=(0,G.Z)(Le,[["render",ce]]),Ae=Ge,Ke=(0,a._)("br",null,null,-1),Xe=(0,a._)("br",null,null,-1),Je=(0,a._)("br",null,null,-1),el=(0,a._)("br",null,null,-1),ll=(0,a._)("br",null,null,-1);function tl(e,l,t,i,n,s){const d=(0,a.up)("q-btn"),c=(0,a.up)("q-card-section"),h=(0,a.up)("q-separator"),f=(0,a.up)("q-input"),p=(0,a.up)("q-toggle"),u=(0,a.up)("qrcode-stream"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.title)+" ",1),s.showCancelBtn?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"float-right",color:"negative",icon:"delete",size:"md",onClick:s.onCancel},null,8,["onClick"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(h),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(f,{modelValue:e.flpName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.flpName=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Naam speler",maxlength:"40",outlined:""},null,8,["modelValue","readonly"]),[[r.F8,!e.scan]]),(0,a.wy)((0,a.Wm)(f,{modelValue:e.flpHandicap,"onUpdate:modelValue":l[1]||(l[1]=l=>e.flpHandicap=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Handicap",maxlength:"4",outlined:""},null,8,["modelValue","readonly"]),[[r.F8,!e.scan]]),(0,a.wy)((0,a.Wm)(f,{modelValue:e.flpEmail,"onUpdate:modelValue":l[2]||(l[2]=l=>e.flpEmail=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"E-mailadres",maxlength:"40",outlined:""},null,8,["modelValue","readonly"]),[[r.F8,!e.scan&&null===t.player.flpRelNr]]),(0,a.wy)((0,a.Wm)(f,{modelValue:e.flpPhone,"onUpdate:modelValue":l[3]||(l[3]=l=>e.flpPhone=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Telefoonnummer",mask:"###############",maxlength:"15",outlined:""},null,8,["modelValue","readonly"]),[[r.F8,!e.scan&&null===t.player.flpRelNr]]),(0,a.wy)((0,a.Wm)(f,{modelValue:e.flpGsn,"onUpdate:modelValue":l[4]||(l[4]=l=>e.flpGsn=l),disable:1===e.flpIntro,readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Golfservicenummer",maxlength:"10",outlined:""},null,8,["modelValue","disable","readonly"]),[[r.F8,!e.scan&&null===t.player.flpRelNr]]),(0,a.wy)((0,a._)("div",null,[(0,a._)("i",null,(0,o.zw)(e.textIntroMessage),1),Ke],512),[[r.F8,s.showIntroMessage&&null===t.player.flpRelNr]]),(0,a.wy)((0,a._)("div",null,[(0,a._)("i",null,(0,o.zw)(e.textExceedIntroodMessage),1),Xe],512),[[r.F8,s.showExceedIntroodMessage&&null===t.player.flpRelNr]]),(0,a.wy)((0,a._)("div",null,[(0,a._)("i",null,(0,o.zw)(e.textExceedIntrosMessage),1),Je],512),[[r.F8,s.showExceedIntrosMessage&&null===t.player.flpRelNr]]),(0,a.wy)((0,a.Wm)(p,{modelValue:e.flpIntro,"onUpdate:modelValue":l[5]||(l[5]=l=>e.flpIntro=l),disable:s.disableIntoToggle,"false-value":null,"true-value":1,label:"Introducee","left-label":""},null,8,["modelValue","disable"]),[[r.F8,0===t.player.flpRelNr||null===t.player.flpRelNr]]),el,(0,a.wy)((0,a._)("div",null,[ll,(0,a._)("i",null,(0,o.zw)(e.textIntroodMessage),1)],512),[[r.F8,s.showIntroodMessage&&null===t.player.flpRelNr]]),e.scan?((0,a.wg)(),(0,a.j4)(u,{key:0,onDecode:s.onDecode,onInit:e.onInit},null,8,["onDecode","onInit"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(h),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{class:"q-mr-sm",color:"primary",icon:"save",onClick:s.handleSave},null,8,["onClick"]),[[r.F8,!e.scan]]),(0,a.wy)((0,a.Wm)(d,{class:"q-mr-sm",color:"primary",icon:"arrow_back",onClick:l[6]||(l[6]=l=>e.$emit("handleCloseEditPlayer"))},null,512),[[r.F8,!e.scan]]),(0,a.wy)((0,a.Wm)(d,{class:"q-mr-sm",color:"primary",icon:"arrow_back",onClick:l[7]||(l[7]=l=>e.scan=!1)},null,512),[[r.F8,e.scan]]),(0,a.wy)((0,a.Wm)(d,{class:"q-mr-sm",color:"primary",icon:"qr_code_2",onClick:l[8]||(l[8]=l=>e.scan=!0)},null,512),[[r.F8,!e.scan&&null===t.player.flpRelNr]])])),_:1})])),_:1})}var al=t(4626);const il={components:{QrcodeStream:al.QrcodeStream},props:{flight:Object,player:Object},data:function(){return{title:"Speler "+this.player.flpSide,local_flight:this.flight,local_player:this.player,flpName:this.player.flpName,flpHandicap:this.player.flpHandicap,flpEmail:this.player.flpEmail,flpPhone:this.player.flpPhone,flpGsn:this.player.flpGsn,flpIntro:this.player.flpIntro,scan:!1,IntroMax:1,Intros:0,titleCancel:"Speler annuleren",messageCancel:"U annuleert de deelname van deze speler en kunt hierna een andere speler aan de flight toevoegen, wilt u doorgaan?",textIntroMessage:"Wenst u deze speler te introduceren voer dan het GSN nummer van de speler in.",textExceedIntroodMessage:"Deze speler is over de introductie limiet van "+this.IntroMax+" intoducties en kan nier meer worden geintroduceerd.",textExceedIntrosMessage:"U kunt niet meer introduceren u heeft het maximum aantal van "+this.flight.IntroMax+" introducties bereikt.",textIntroodMessage:'U introduceert deze speler, voordat u start moet het GSN nummer gevalideerd worden. U kunt dit doen door op onderstaande knop "SCAN NGF" te klikken of bij de caddiemaster."'}},computed:{canCancel:function(){return!0},showIntroMessage:function(){return null===this.flpIntro&&this.flight.IntroMax>this.flight.IntroCount&&this.IntroMax>this.Intros},showExceedIntroodMessage:function(){return null!==this.flpGsn&&10===this.flpGsn.length&&this.IntroMax>0&&this.IntroMax<this.Intros},showExceedIntrosMessage:function(){return null===this.flpIntro&&this.flight.IntroMax<=this.flight.IntroCount},showIntroodMessage:function(){return 1===this.flpIntro},showCancelBtn:function(){return this.canCancel&&!this.scan},disableIntoToggle:function(){return null===this.flpGsn||this.flpGsn.length<10||this.flight.IntroMax<=this.flight.IntroCount||this.IntroMax<=this.Intros}},watch:{flpHandicap:function(e){this.flpHandicap=e.replace(",",".")},flpGsn:function(e){if(e.length<10)return;let l={params:{fltDate:this.flight.fltDate,flpGsn:e}};this.$http.get("golfer/intros",l).then((e=>{this.IntroMax=e.IntroMax,this.Intros=e.Intros}))}},methods:{onCancel:function(){this.$q.dialog({title:this.titleCancel,message:this.messageCancel,cancel:!0,persistent:!0}).onOk((()=>{let e=this.local_flight.flight_players.findIndex((e=>e.flpNr===this.player.flpNr));this.local_flight.flight_players[e].flpCarNr=1;let l={flpNr:null,flpSide:this.local_flight.flight_players[e].flpSide,flpRelNr:null,flpName:null,flpEmail:"",flpHandicap:"",flpCarNr:null};this.local_flight.flight_players.splice(this.local_flight.flight_players[e].flpSide-1,0,l),this.$emit("handleSave",this.local_flight,!0)}))},handleSave:function(){this.local_player.flpName=this.flpName,this.local_player.flpHandicap=this.flpHandicap,this.local_player.flpEmail=this.flpEmail,this.local_player.flpPhone=this.flpPhone,this.local_player.flpGsn=this.flpGsn,this.local_player.flpIntro=this.flpIntro,this.$emit("handleSave",this.local_flight)},onDecode:function(e){this.flpName=e.substring(11,59).trim(),this.flpHandicap=e.substring(77,82).trim(),this.flpGsn=e.substring(83,95).trim(),this.flpGender=e.substring(82,83).trim(),this.scan=!1}}};var nl=t(8886);const sl=(0,G.Z)(il,[["render",tl]]),ol=sl;te()(il,"components",{QCard:K.Z,QCardSection:X.Z,QBtn:J.Z,QSeparator:ee.Z,QInput:_e.Z,QToggle:nl.Z});const rl={mixins:[ne.Z],components:{compPlayer:Ae,compDetails:de,compEditPlayer:ol},props:{flight:Object},data:function(){return{loading:!1,dialogVisible:!1,editPlayer:null,local_flight:{...this.flight}}},computed:{playerArray:function(){return this.local_flight.flight_players.filter((e=>e.flpSide!==this.firstNr&&null===e.flpCarNr&&(this.isMyBooking||null!==e.flpName)))},isMyBooking:function(){return this.local_flight.flight_players[0].flpRelNr===this.currentUser.relNr},firstNr:function(){return this.local_flight.flight_players[0].flpSide}},methods:{handleSave:function(e,l,t){this.loading=!1,this.$http.post("golfer/booking",e).then((e=>{this.local_flight=e.flight,t>-1?this.handleEditPlayer(this.local_flight.flight_players[t]):l&&this.$emit("handleClose")})).catch((e=>{}))},handleClose:function(){this.$emit("handleClose")},handleEditPlayer:function(e){this.editPlayer=e},handleCloseEditPlayer:function(){this.editPlayer=null}}};var dl=t(4379);const cl=(0,G.Z)(rl,[["render",s]]),hl=cl;te()(rl,"components",{QPage:dl.Z});const fl={class:"row"},pl={class:"col"},ul={class:"row items-center justify-end",flat:""},ml={class:"row q-mt-md"},gl={class:"col-5 q-pr-sm"},yl={class:"col-7"},wl={key:0,class:"row"},_l={class:"row text-center text-white bg-secondary",style:{height:"40px","border-bottom":"black"}},vl={class:"col",style:{"font-size":"18px","margin-top":"5px","font-weight":"bold","border-bottom":"black"}},kl={class:"row q-gutter-xs",style:{"max-height":"600px",overflow:"scroll"}},bl=["onClick"],xl={class:"row"},Cl={class:"col"},Nl={key:0,class:"row"},ql={class:"col"},Sl={key:0},Dl={key:1},Il={class:"row"},$l=(0,a._)("div",{class:"col text-left text-bold"},"Datum",-1),Pl={class:"col text-right"},Hl={class:"row q-mt-xs"},Tl=(0,a._)("div",{class:"col text-left text-bold"},"Tijd",-1),Fl={class:"col text-right"},Wl={class:"row q-mt-xs"},Ml=(0,a._)("div",{class:"col text-left text-bold"},"Spelers",-1),jl={class:"col text-right"},Zl={class:"row q-mt-xs"},zl=(0,a._)("div",{class:"col text-left text-bold"},"Baan",-1),El={class:"col text-right"},Vl={class:"col text-left"};function Rl(e,l,t,i,n,s){const d=(0,a.up)("q-btn"),c=(0,a.up)("q-date"),h=(0,a.up)("q-popup-proxy"),f=(0,a.up)("q-btn-group"),p=(0,a.up)("q-separator"),u=(0,a.up)("q-icon"),m=(0,a.up)("q-card-section"),g=(0,a.up)("q-card-actions"),y=(0,a.up)("q-card"),w=(0,a.up)("q-dialog"),_=(0,a.up)("q-page"),v=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(_,{class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",fl,[(0,a._)("div",pl,[(0,a.Uk)(" Datum: "),(0,a.Wm)(f,{class:"full-width",unelevated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{color:"primary",icon:"chevron_left",style:{width:"50px"},onClick:l[0]||(l[0]=e=>s.navDay(-1))}),(0,a.Wm)(d,{class:"full-width",color:"primary",style:{width:"calc(100% - 100px)"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$dayjs(e.form.fltDate).format("dddd DD MMMM"))+" ",1),(0,a.Wm)(h,{ref:"qDateTeeTime","transition-hide":"scale","transition-show":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:e.date,"onUpdate:modelValue":l[1]||(l[1]=l=>e.date=l),options:s.optionsFn,mask:"YYYY-MM-DD","today-btn":"",onChange:s.loadTeetimes},{default:(0,a.w5)((()=>[(0,a._)("div",ul,[(0,a.wy)((0,a.Wm)(d,{color:"primary",flat:"",label:"Sluiten"},null,512),[[v]])])])),_:1},8,["modelValue","options","onChange"])])),_:1},512)])),_:1}),(0,a.Wm)(d,{color:"primary",icon:"chevron_right",style:{width:"50px"},onClick:l[2]||(l[2]=e=>s.navDay(1))})])),_:1})])]),(0,a._)("div",ml,[(0,a._)("div",gl,[(0,a.Uk)(" Holes: "),(0,a.Wm)(f,{class:"full-width",spread:"",unelevated:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filterForm.holes,((l,t)=>((0,a.wg)(),(0,a.j4)(d,{key:t,color:e.form.holes===l?"primary":"white",label:l,"text-color":e.form.holes===l?"":"black",onClick:e=>s.handleFilterHole(l)},null,8,["color","label","text-color","onClick"])))),128))])),_:1})]),(0,a._)("div",yl,[(0,a.Uk)(" Spelers: "),(0,a.Wm)(f,{class:"full-width",spread:"",unelevated:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filterForm.players,((l,t)=>((0,a.wg)(),(0,a.j4)(d,{key:t,color:e.form.fltSize===l?"primary":"white",label:l,"text-color":e.form.fltSize===l?"":"black",onClick:e=>s.handleFilterPlayers(l)},null,8,["color","label","text-color","onClick"])))),128))])),_:1})])]),e.teetimes.length>0?((0,a.wg)(),(0,a.iD)("div",wl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.teetimes,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"q-mt-md col items-start"},[(0,a._)("div",_l,[(0,a._)("div",vl,(0,o.zw)(e.crlNameInternet),1)])])))),128))])):(0,a.kq)("",!0),(0,a.Wm)(p),(0,a._)("div",kl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.teetimes,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"col text-grey-8 text-bold"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.timeFilter(l.times),((t,i)=>((0,a.wg)(),(0,a.iD)("div",{key:i,class:(0,o.C_)([t.sttPlayerArray.length>0?"bg-blue-3":"bg-green-3","text-center q-mt-xs q-pa-sm"]),onClick:e=>s.handleOpenDialog(t,l)},[(0,a._)("div",xl,[(0,a._)("div",Cl,[(0,a.Uk)((0,o.zw)(e.$filters.minuteToTime(t.sttTimeFrom))+" ",1),(0,a.wy)((0,a.Wm)(u,{class:"q-ml-sm q-mb-xs q-mr-xs",name:"group",size:"18px"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.sttPlayers),1)])),_:2},1536),[[r.F8,t.sttPlayerArray.length>0]])])]),t.sttPlayerArray.length>0?((0,a.wg)(),(0,a.iD)("div",Nl,[(0,a._)("div",ql,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.sttPlayerArray,((e,l)=>((0,a.wg)(),(0,a.iD)("span",{key:l,class:"text-center"},(0,o.zw)(l>0?"/":"")+" "+(0,o.zw)(e.name),1)))),128))])])):(0,a.kq)("",!0)],10,bl)))),128))])))),128))]),e.dialogVisible?((0,a.wg)(),(0,a.j4)(w,{key:1,modelValue:e.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=l=>e.dialogVisible=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{"max-width":"320px",width:"95%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"text-h6"},{default:(0,a.w5)((()=>[0===e.dialogErrors.length?((0,a.wg)(),(0,a.iD)("div",Sl,"Uw reservering")):(0,a.kq)("",!0),e.dialogErrors.length>0?((0,a.wg)(),(0,a.iD)("div",Dl,"Probleem gevonden!")):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(p,{inset:""}),0===e.dialogErrors.length?((0,a.wg)(),(0,a.j4)(m,{key:0},{default:(0,a.w5)((()=>[(0,a._)("div",Il,[$l,(0,a._)("div",Pl,(0,o.zw)(e.$dayjs(e.form.fltDate).format("dddd DD MMMM")),1)]),(0,a._)("div",Hl,[Tl,(0,a._)("div",Fl,(0,o.zw)(e.$filters.minuteToTime(e.selectedTimeItem.sttTimeFrom)),1)]),(0,a._)("div",Wl,[Ml,(0,a._)("div",jl,(0,o.zw)(e.form.fltSize),1)]),(0,a._)("div",Zl,[zl,(0,a._)("div",El,(0,o.zw)(e.selectedCourseItem.crlName),1)])])),_:1})):(0,a.kq)("",!0),e.dialogErrors.length>0?((0,a.wg)(),(0,a.j4)(m,{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dialogErrors,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"row"},[(0,a._)("div",Vl,(0,o.zw)(e),1)])))),128))])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(p,{inset:""}),(0,a.Wm)(g,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{color:"primary",flat:"",size:"mds",onClick:s.handleDialogClose},{default:(0,a.w5)((()=>[(0,a.Uk)(" Annuleer ")])),_:1},8,["onClick"]),0===e.dialogErrors.length?((0,a.wg)(),(0,a.j4)(d,{key:0,color:"primary",size:"md",onClick:s.handleReservation},{default:(0,a.w5)((()=>[(0,a.Uk)(" Reserveer ")])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])),_:1})])),_:1})}const Yl={mixins:[ne.Z],data:function(){return{loading:!1,flight:null,teetimes:[],dialogVisible:!1,dialogErrors:[],selectedTimeItem:null,filterForm:{holes:[9,18],players:[1,2,3,4]},form:{fltDate:this.$dayjs().format("YYYY-MM-DD"),fltTime:"",fltCrlNr1:"",fltCrlNr2:"",fltSize:0,players:[],holes:9,size:3},date:this.$dayjs().format("YYYY-MM-DD")}},created:function(){this.loadTeetimes()},mounted(){this.form.fltSize=this.settings.planner_default_reservation_count,this.form.holes=this.settings.planner_default_holes},watch:{date:function(e,l){this.form.fltDate=e,this.loadTeetimes(),this.$refs.qDateTeeTime.hide()}},methods:{timeFilter:function(e){return e.filter((e=>e.sttPlayers>=this.form.fltSize&&(9===this.form.holes||e.sttAvailable18&&18===this.form.holes)&&(9===this.form.holes||e.sttCrlNrNext>0&&18===this.form.holes)))},optionsFn(e){return this.$dayjs(e)>=this.$dayjs().add(-1,"day")&&this.$dayjs(e)<=this.$dayjs().add(21,"day")},navDay:function(e){this.date=this.$dayjs(this.date).add(e,"day").format("YYYY-MM-DD")},loadTeetimes:function(){this.loading=!0,this.$http.get("golfer/teetimes",{params:{date:this.$dayjs(this.form.fltDate).format("YYYY-MM-DD")}}).then((e=>{this.teetimes=e.payload,this.loading=!1}))},handleOpenDialog:function(e,l){this.selectedTimeItem=e,this.selectedCourseItem=Object.assign({},l),delete this.selectedCourseItem.times,this.dialogVisible=!0},handleReservation:function(){let e=[];for(let a=1;a<=this.form.fltSize;a++)e.push({flpNr:null,flpSide:a,flpRelNr:null,flpName:"",flpEmail:"",flpHandicap:"",flpCarNr:null});e[0].flpRelNr=this.currentUser.relNr,e[0].flpName=this.currentUser.full_name2;const l={fltNr:this.selectedTimeItem.sttRefNr,fltTime1:this.selectedTimeItem.sttTimeFrom,fltDate:this.$filters.dateToUnix(this.form.fltDate,"YYYY-MM-DD"),fltSize:this.form.fltSize,fltCrlNr1:this.selectedCourseItem.crlNr,fltCrlNr2:18===this.form.holes?this.selectedTimeItem.sttCrlNrNext:null,fltOrigin:2,flight_players:e};let t=this;this.$http.post("golfer/booking",l).then((e=>{t.flight=e.flight,this.$emit("handleOpenFlight",t.flight)})).catch((e=>{this.dialogVisible=!1,this.loadTeetimes()}))},handleDialogClose:function(){this.dialogErrors=[],this.dialogVisible=!1},handleFilterHole:function(e){this.form.holes=e},handleFilterPlayers:function(e){this.form.fltSize=e}}};var Ql=t(6375),Ol=t(3944),Ul=t(5836),Bl=t(9367),Ll=t(677);const Gl=(0,G.Z)(Yl,[["render",Rl]]),Al=Gl;te()(Yl,"components",{QPage:dl.Z,QCard:K.Z,QBtnGroup:Ql.Z,QBtn:J.Z,QPopupProxy:Ol.Z,QDate:Ul.Z,QSeparator:ee.Z,QIcon:Oe.Z,QDialog:A.Z,QCardSection:X.Z,QCardActions:Bl.Z}),te()(Yl,"directives",{ClosePopup:Ll.Z});const Kl={class:"row q-mb-sm"},Xl={class:"col"},Jl={class:"row"},et={class:"col"},lt=(0,a._)("i",{class:"far fa-calendar-alt mr-2"},null,-1),tt=(0,a._)("i",{class:"far fa-golf-club mr-2"},null,-1);function at(e,l,t,i,n,s){const r=(0,a.up)("q-btn"),d=(0,a.up)("q-item-label"),c=(0,a.up)("q-item-section"),h=(0,a.up)("q-item"),f=(0,a.up)("q-list"),p=(0,a.up)("q-banner"),u=(0,a.up)("q-page"),m=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(u,{class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",Kl,[(0,a._)("div",Xl,[(0,a.Wm)(r,{class:"full-width",color:"primary",icon:"add",label:"Nieuwe reservering",onClick:s.handleOpenNew},null,8,["onClick"])])]),(0,a._)("div",Jl,[(0,a._)("div",et,[t.array.length>0?((0,a.wg)(),(0,a.j4)(f,{key:0,separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.array,((l,t)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(h,{key:t,class:"full-width bg-white shadow-1 q-mb-sm",clickable:"",onClick:e=>s.handleOpenFlight(l)},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"itg-text-overflow"},{default:(0,a.w5)((()=>[lt,(0,a.Uk)(" "+(0,o.zw)(e.$filters.unixToDate(l.fltDate,"dddd DD-MM"))+" "+(0,o.zw)()+" - "+(0,o.zw)(e.$filters.minuteToTime(l.fltTime1)),1)])),_:2},1024),(0,a.Wm)(d,{caption:""},{default:(0,a.w5)((()=>[tt,(0,a.Uk)(" "+(0,o.zw)(l.loop1.crlName),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(c,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Uk)(" >")])),_:1})])),_:2},1032,["onClick"])),[[m]]))),128))])),_:1})):((0,a.wg)(),(0,a.j4)(p,{key:1,class:"bg-orange-3 text-grey-8 text-bold text-center"},{default:(0,a.w5)((()=>[(0,a.Uk)(" U heeft geen reserveringen openstaan ")])),_:1}))])])])),_:1})}const it={props:{array:Array},data(){return{loading:!1}},methods:{handleOpenFlight:function(e){this.$emit("handleOpenFlight",e)},handleOpenNew:function(){this.$emit("handleOpenBooking")}}};var nt=t(7011),st=t(2350),ot=t(6489);const rt=(0,G.Z)(it,[["render",at]]),dt=rt;te()(it,"components",{QPage:dl.Z,QBtn:J.Z,QList:nt.Z,QItem:ye.Z,QItemSection:we.Z,QItemLabel:st.Z,QBanner:oe.Z}),te()(it,"directives",{Ripple:ot.Z});const ct={components:{Reservation:hl,Booking:Al,List:dt},data(){return{LIST:"list",RESERVATION:"reservation",BOOKING:"booking",array:[],page:null,loading:!1,back_icon:"fa-home",back_link:"/",title:"Reserveringen",callBack:void 0,flight:null}},created:function(){this.loadReservationList()},methods:{async loadReservationList(){this.loading=!0,await this.$http.get("golfer/bookings").then((e=>{if(this.loading=!1,this.array=e,this.$store.state.settings.fltNr>0){let e=this.array.find((e=>e.fltNr===this.$store.state.settings.fltNr));void 0!==e&&this.handleOpenFlight(e)}else this.page=this.LIST}))},handleOpenFlight:function(e){this.$store.commit("settings/CLEAR_FLIGHT"),this.back_icon="fa-arrow-left",this.back_link="/reservations",this.title="Reservering",this.callBack=function(){this.$emit("handleClose")},e.flight_players.forEach((function(e){e.flpType=null,e.flpRelNr?e.flpType=2:null!==e.flpName&&(e.flpType=1)})),this.flight=e,this.page=this.RESERVATION},handleOpenBooking:function(){this.back_icon="fa-arrow-left",this.back_link="/reservations",this.title="Boeking",this.callBack=function(){this.$emit("handleClose")},this.page=this.BOOKING},handleClose:function(){this.back_icon="fa-home",this.back_link="/",this.title="Reserveringen",this.callBack=void 0,this.flight=null,this.page=this.LIST,this.loadReservationList()}}};var ht=t(2652);const ft=(0,G.Z)(ct,[["render",i]]),pt=ft;te()(ct,"components",{QPageContainer:ht.Z})}}]);