"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[768],{768:(t,e,r)=>{r.r(e),r.d(e,{default:()=>D});var s=r(7408),a=r(9912);const o={class:"row q-mb-sm"},l={class:"col"},i={class:"row calendar-row"},n={class:"hour-col"},c={key:0,class:"hour-label"};function u(t,e,r,u,h,d){const m=(0,s.E1)("q-input"),p=(0,s.E1)("q-separator"),f=(0,s.E1)("calendar-loop"),T=(0,s.E1)("q-page"),y=(0,s.E1)("q-page-container");return(0,s.Wz)(),(0,s.Az)(y,null,{default:(0,s.Ql)((()=>[(0,s.K2)(T,{class:"q-pa-sm"},{default:(0,s.Ql)((()=>[(0,s.QD)("div",o,[(0,s.QD)("div",l,[(0,s.K2)(m,{modelValue:h.date,"onUpdate:modelValue":e[0]||(e[0]=t=>h.date=t),filled:"",type:"date"},null,8,["modelValue"])])]),(0,s.QD)("div",i,[(0,s.QD)("div",n,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(d.hours,((t,e)=>((0,s.Wz)(),(0,s.An)("div",{key:e,class:(0,a.WN)(d.hourRowClass(t)),style:(0,a.MN)(d.loopStyle)},[t<d.hours?((0,s.Wz)(),(0,s.An)("div",c,(0,a.WA)(d.timeText(t)),1)):(0,s.g1)("",!0)],6)))),128))]),((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(d.courseLoops,((t,e)=>((0,s.Wz)(),(0,s.An)("div",{key:e,style:(0,a.MN)({width:d.columnWidth}),class:"calendar-col"},[(0,s.QD)("div",{class:(0,a.WN)([{"border-left":0!==e},"calendar-header"])},(0,a.WA)(t.crlName),3),(0,s.K2)(p),(0,s.K2)(f,{data:h.data,fact:h.fact,hours:d.hours,loop:t,loopKey:e,minTime:d.minTime},null,8,["data","fact","hours","loop","loopKey","minTime"])],4)))),128))])])),_:1})])),_:1})}const h={class:"row"};function d(t,e,r,o,l,i){const n=(0,s.E1)("start-time");return(0,s.Wz)(),(0,s.An)("div",h,[(0,s.QD)("div",{style:(0,a.MN)(i.loopStyle),class:"col"},[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(i.starts,((t,e)=>((0,s.Wz)(),(0,s.Az)(n,{key:e,fact:r.fact,start:t},null,8,["fact","start"])))),128))],4)])}function m(t,e,r,o,l,i){return(0,s.Wz)(),(0,s.An)("div",{style:(0,a.MN)(i.timeSlotStyle),class:"row slot"},(0,a.WA)(i.text),5)}const p={props:{start:{type:Object,required:!0},fact:{type:Number,required:!0}},computed:{text(){let t=this.$filters.minuteToTime(this.start.sttTimeFrom)+" ";return null===this.start.sttDescr?"":this.start.sttDescr.length>0?t+this.start.sttDescr:void 0!==this.start.sttPlayerName1?t+this.start.sttPlayerName1:"&nbsp"},timeSlotStyle(){let t=(this.start.sttTimeTo-this.start.sttTimeFrom)*this.fact+"px",e="#FFFFFF",r="white";return 1===this.start.sttRefType?(e=this.start.sttGrpColor1,r=this.start.sttGrpFontColor1):this.start.sttRefType>1?e="blue":this.start.sttRefType<0&&(r="black",e="lightblue"),{backgroundColor:e,height:t,color:r,borderBottom:this.start.sttGrpColor1?"1px solid white":""}}}};var f=r(4032);const T=(0,f.c)(p,[["render",m],["__scopeId","data-v-5f1be404"]]),y=T,g={components:{StartTime:y},props:{data:Array,loop:Object,minTime:Number,fact:Number,loopKey:Number,hours:Number},computed:{starts(){return this.data.filter((t=>t.sttCrlNr===this.loop.sttCrlNr))},lMinTime(){return this.starts.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},loopStyle(){let t=Math.floor(this.minTime/60);return{width:"100%",paddingTop:(this.lMinTime-60*t)*this.fact+"px",borderLeft:this.loopKey>0?"1px solid lightgrey":"",height:60*this.hours*this.fact+"px"}}}},b=(0,f.c)(g,[["render",d]]),N=b,w={components:{calendarLoop:N},data(){return{fact:3,data:[],date:null}},created(){this.date=this.$dayjs().format("YYYY-MM-DD")},watch:{date(){this.loadCalendar()}},computed:{courseLoops(){if(0===this.data.length)return[];const t=new Set;return this.data.filter((e=>{const r=`${e.sttCrlNr}-${e.crlName}`;return!t.has(r)&&(t.add(r),!0)})).map((t=>({sttCrlNr:t.sttCrlNr,crlName:t.crlName})))},columnWidth(){let t=this.courseLoops.length;return"calc((100% - 40px) / "+t+")"},minTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},maxTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom>t?e.sttTimeFrom:t),null)},hours(){return Math.ceil((this.maxTime-this.minTime)/60)+1},loopStyle(){return{paddingTop:60*this.fact-8+"px",height:60*this.fact+"px"}},startHour(){return Math.floor(this.minTime/60)}},methods:{async loadCalendar(){this.data=[],this.data=await this.$http.get("calendar?date="+this.date)},hourRowClass(t){return t<this.hours?"hour-row":""},timeText(t){return this.$filters.minuteToTime(60*(this.startHour+t))},closePopup(){this.$refs.myPopup.hide()}}};var W=r(688),v=r(6207),C=r(7644),x=r(5164),F=r(9948),A=r(5488),Q=r.n(A);const z=(0,f.c)(w,[["render",u]]),D=z;Q()(w,"components",{QPageContainer:W.c,QPage:v.c,QInput:C.c,QSeparator:x.c,QPopupProxy:F.c})}}]);