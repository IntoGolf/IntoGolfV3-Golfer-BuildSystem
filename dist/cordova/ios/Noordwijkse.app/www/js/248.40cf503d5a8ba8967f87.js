"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[248],{4248:(t,e,s)=>{s.r(e),s.d(e,{default:()=>Q});var r=s(7408),a=s(9912);const o={class:"row q-mb-sm"},i={class:"col"},l={class:"row calendar-row"},n={class:"hour-col"},h={key:0,class:"hour-label"};function c(t,e,s,c,m,u){const d=(0,r.E1)("q-input"),p=(0,r.E1)("q-separator"),f=(0,r.E1)("calendar-loop"),T=(0,r.E1)("q-page"),g=(0,r.E1)("q-page-container");return(0,r.Wz)(),(0,r.Az)(g,null,{default:(0,r.Ql)((()=>[(0,r.K2)(T,{class:"q-pa-sm"},{default:(0,r.Ql)((()=>[(0,r.QD)("div",o,[(0,r.QD)("div",i,[(0,r.K2)(d,{modelValue:m.date,"onUpdate:modelValue":e[0]||(e[0]=t=>m.date=t),filled:"",type:"date"},null,8,["modelValue"])])]),(0,r.QD)("div",l,[(0,r.QD)("div",n,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(u.hours,((t,e)=>((0,r.Wz)(),(0,r.An)("div",{key:e,class:(0,a.WN)(u.hourRowClass(t)),style:(0,a.MN)(u.loopStyle)},[t<u.hours?((0,r.Wz)(),(0,r.An)("div",h,(0,a.WA)(u.timeText(t)),1)):(0,r.g1)("",!0)],6)))),128))]),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(u.courseLoops,((t,e)=>((0,r.Wz)(),(0,r.An)("div",{key:e,style:(0,a.MN)({width:u.columnWidth}),class:"calendar-col"},[(0,r.QD)("div",{class:(0,a.WN)([{"border-left":0!==e},"calendar-header"])},(0,a.WA)(t.crlName),3),(0,r.K2)(p),(0,r.K2)(f,{data:m.data,fact:m.fact,hours:u.hours,loop:t,loopKey:e,minTime:u.minTime},null,8,["data","fact","hours","loop","loopKey","minTime"])],4)))),128))])])),_:1})])),_:1})}const m={class:"row"};function u(t,e,s,o,i,l){const n=(0,r.E1)("start-time");return(0,r.Wz)(),(0,r.An)("div",m,[(0,r.QD)("div",{style:(0,a.MN)(l.loopStyle),class:"col loop-col"},[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(l.starts,((t,e)=>((0,r.Wz)(),(0,r.Az)(n,{key:e,fact:s.fact,minTime:s.minTime,start:t},null,8,["fact","minTime","start"])))),128))],4)])}function d(t,e,s,o,i,l){return(0,r.Wz)(),(0,r.An)("div",{style:(0,a.MN)(l.timeSlotStyle),class:"row slot",onClick:e[0]||(e[0]=(...t)=>l.showBooking&&l.showBooking(...t))},(0,a.WA)(l.text),5)}const p={props:{start:{type:Object,required:!0},fact:{type:Number,required:!0},minTime:{type:Number,required:!0}},computed:{top(){return(this.start.sttTimeFrom-this.minTime)*this.fact+"px"},showDialog(){return 3===this.$store.getters["currentUser/usrHasCalendar"]},text(){let t=this.$filters.minuteToTime(this.start.sttTimeFrom)+" ";return null===this.start.sttDescr?"":this.start.sttDescr.length>0?t+this.start.sttDescr:void 0!==this.start.sttPlayerName1?t+this.start.sttPlayerName1:t+" aantal spelers: "+this.start.sttPlayers},timeSlotStyle(){let t=(this.start.sttTimeTo-this.start.sttTimeFrom)*this.fact+"px",e="#FFFFFF",s="white";return 1===this.start.sttRefType?(e=this.start.sttGrpColor1,s=this.start.sttGrpFontColor1):this.start.sttRefType>1?e="blue":this.start.sttRefType<0&&(s="black",e="lightblue"),console.log(this.top),{backgroundColor:e,height:t,color:s,top:this.top}}},methods:{showBooking(){if(1!==this.start.sttRefType||!this.showDialog)return;let t=this.start.sttDescr.split("|").map((t=>t.trim())),e="- "+t.join("<br> - ");this.$q.dialog({title:"Speler(s) op flight:",message:e,html:!0,persistent:!0}).onOk((()=>{}))}}};var f=s(4032);const T=(0,f.c)(p,[["render",d],["__scopeId","data-v-48632cca"]]),g=T,y={components:{StartTime:g},props:{data:Array,loop:Object,minTime:Number,fact:Number,loopKey:Number,hours:Number},computed:{starts(){return this.data.filter((t=>t.sttCrlNr===this.loop.sttCrlNr))},lMinTime(){return this.starts.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},loopStyle(){let t=Math.floor(this.minTime/60);return console.log(t),{width:"100%",paddingTop:(this.lMinTime-60*t)*this.fact+"px",borderLeft:this.loopKey>0?"1px solid lightgrey":"",height:60*this.hours*this.fact+"px"}}}},b=(0,f.c)(y,[["render",u],["__scopeId","data-v-42b3b018"]]),N=b,w={components:{calendarLoop:N},data(){return{fact:3,data:[],date:null}},created(){this.date=this.$dayjs().format("YYYY-MM-DD")},watch:{date(){this.loadCalendar()}},computed:{courseLoops(){if(0===this.data.length)return[];const t=new Set;return this.data.filter((e=>{const s=`${e.sttCrlNr}-${e.crlName}`;return!t.has(s)&&(t.add(s),!0)})).map((t=>({sttCrlNr:t.sttCrlNr,crlName:t.crlName})))},columnWidth(){let t=this.courseLoops.length;return"calc((100% - 40px) / "+t+")"},minTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom<t?e.sttTimeFrom:t),null)},maxTime(){return this.data.reduce(((t,e)=>null===t||e.sttTimeFrom>t?e.sttTimeFrom:t),null)},hours(){return Math.ceil((this.maxTime-this.minTime)/60)+1},loopStyle(){return{paddingTop:60*this.fact-8+"px",height:60*this.fact+"px"}},startHour(){return Math.floor(this.minTime/60)}},methods:{async loadCalendar(){this.data=[],this.data=await this.$http.get("calendar?date="+this.date)},hourRowClass(t){return t<this.hours?"hour-row":""},timeText(t){return this.$filters.minuteToTime(60*(this.startHour+t))},closePopup(){this.$refs.myPopup.hide()}}};var v=s(688),C=s(6207),W=s(7644),F=s(5164),k=s(9948),x=s(5488),A=s.n(x);const D=(0,f.c)(w,[["render",c]]),Q=D;A()(w,"components",{QPageContainer:v.c,QPage:C.c,QInput:W.c,QSeparator:F.c,QPopupProxy:k.c})}}]);