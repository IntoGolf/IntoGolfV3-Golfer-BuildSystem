"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[748],{748:(e,s,o)=>{o.r(s),o.d(s,{default:()=>le});var l=o(2852),n=o(9006);const t={class:"text-center"},r=(0,l.Lk)("h5",null,"Geen toekomstige lessen gevonden",-1),a=[r];function i(e,s,o,r,i,p){const d=(0,l.g2)("q-btn"),c=(0,l.g2)("q-separator"),u=(0,l.g2)("comp-lesson"),h=(0,l.g2)("comp-new"),m=(0,l.g2)("q-page"),L=(0,l.g2)("q-page-container");return(0,l.uX)(),(0,l.Wv)(L,null,{default:(0,l.k6)((()=>[(0,l.bF)(m,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("div",null,[(0,l.bF)(d,{color:"primary",label:"Nieuwe les",size:"small",onClick:s[0]||(s[0]=s=>e.newLesson=!0)}),(0,l.bF)(c,{class:"q-mt-md"}),(0,l.bo)((0,l.Lk)("div",t,a,512),[[n.aG,0===e.clientLessonArray.length]]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.clientLessonArray,((e,s)=>((0,l.uX)(),(0,l.Wv)(u,{key:s,lesson:e,onHandleLoadClientLessons:p.handleLoadClientLessons},null,8,["lesson","onHandleLoadClientLessons"])))),128))],512),[[n.aG,!e.newLesson]]),(0,l.bo)((0,l.Lk)("div",null,[(0,l.bF)(h,{onHandleCloseNew:p.handleCloseNew},null,8,["onHandleCloseNew"])],512),[[n.aG,e.newLesson]])])),_:1})])),_:1})}var p=o(3842),d=o(3100);const c={class:"row full-width q-mt-md q-pa-sm",style:{border:"1px solid lightgrey","border-radius":"4px"}},u={class:"col-12"},h={class:"row"},m={class:"col-6"},L={class:"col-6 text-right"},y={class:"row"},g={class:"col-6"},k={class:"col-6 text-right"};function f(e,s,o,n,t,r){const a=(0,l.g2)("q-btn");return(0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("div",u,[(0,l.Lk)("div",h,[(0,l.Lk)("div",m,[(0,l.Lk)("b",null,(0,d.v_)(o.lesson.pro_lesson.pro_lesson_type.pltName),1)]),(0,l.Lk)("div",L,[(0,l.Lk)("b",null,(0,d.v_)(e.$filters.unixToDate(o.lesson.pro_lesson.lesDate,"ddd DD MMM")),1),(0,l.eW)(" "+(0,d.v_)(e.$filters.minuteToTime(o.lesson.pro_lesson.lesTimeFrom)),1)])]),(0,l.Lk)("div",y,[(0,l.Lk)("div",g,[(0,l.Lk)("i",null,"pro: "+(0,d.v_)(o.lesson.pro_lesson.relation.full_name2),1)]),(0,l.Lk)("div",k,[(0,l.bF)(a,{color:"primary",size:"xs",onClick:s[0]||(s[0]=e=>r.handleCancel(o.lesson.pro_lesson))},{default:(0,l.k6)((()=>[(0,l.eW)("Annuleer ")])),_:1})])])])])}const v={props:{lesson:Object},data:function(){return{}},methods:{handleCancel:function(e){this.$q.dialog({title:"Annuleer les",message:"Deze les wordt geannuleerd, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{e.lesCarNr=1,this.$http.post("golfer/lesson",e).then((()=>{this.$q.notify({type:"positive",message:"uw les is geannuleerd"}),this.newLesson=!1,this.$emit("handleLoadClientLessons")}))}))}}};var A=o(6317),T=o(3178),w=o(1082),b=o.n(w);const N=(0,A.A)(v,[["render",f]]),C=N;b()(v,"components",{QBtn:T.A});const _={class:"row q-mt-md q-gutter-sm"},q={class:"col"},F={class:"col"},$={class:"row"},x={class:"col hide-scrollbar",style:{"overflow-x":"scroll"}},D={class:"row"},B={class:"col q-pt-sm text-bold text-center"},X={class:"row hide-scrollbar"};function E(e,s,o,n,t,r){const a=(0,l.g2)("q-input"),i=(0,l.g2)("q-select"),p=(0,l.g2)("q-separator"),c=(0,l.g2)("comp-lesson");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",_,[(0,l.Lk)("div",q,[(0,l.bF)(a,{ref:"date",modelValue:e.date,"onUpdate:modelValue":s[0]||(s[0]=s=>e.date=s),dense:"",label:"Datum","lazy-rules":"",type:"date"},null,8,["modelValue"])]),(0,l.Lk)("div",F,[(0,l.bF)(i,{modelValue:e.pltNr,"onUpdate:modelValue":s[1]||(s[1]=s=>e.pltNr=s),options:r.lessonType1Array,behavior:"menu",dense:"","emit-value":"",label:"Soort les","map-options":"","option-label":"pltName","option-value":"pltNr"},null,8,["modelValue","options"])])]),(0,l.bF)(p,{class:"q-mt-md"}),(0,l.Lk)("div",$,[(0,l.Lk)("div",x,[(0,l.Lk)("div",{style:(0,d.Tr)({width:r.colWidth}),class:"row q-gutter-sm"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.proArray,((s,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"col q-mb-lg"},[(0,l.Lk)("div",D,[(0,l.Lk)("div",B,[(0,l.Lk)("b",null,(0,d.v_)(s.full_name2),1)])]),(0,l.Lk)("div",X,[(0,l.bF)(c,{lessons:e.lessonArray,pro:s,proLessonType:r.proLessonType,onHandleBook:r.handleBook},null,8,["lessons","pro","proLessonType","onHandleBook"])])])))),128))],4)])])])}o(6809);const M=["onClick"],Q={class:"row"},Y={class:"col"},H={class:"row"},V={class:"col"},W={class:"row"},O={class:"col"};function P(e,s,o,n,t,r){return(0,l.uX)(),(0,l.CE)("div",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.lessonFilter,((s,n)=>((0,l.uX)(),(0,l.CE)("div",{key:n,align:"left",class:"full-width q-mt-md bg-orange q-pa-sm",onClick:o=>e.$emit("handleBook",s)},[(0,l.Lk)("div",Q,[(0,l.Lk)("div",Y,[(0,l.Lk)("div",H,[(0,l.Lk)("div",V,[(0,l.Lk)("b",null,(0,d.v_)(e.$filters.minuteToTime(s.pagTimeFrom)),1)])]),(0,l.Lk)("div",W,[(0,l.Lk)("div",O,[(0,l.Lk)("i",null,"max. "+(0,d.v_)(o.proLessonType.pltMaxPers)+" pers.",1)])])])])],8,M)))),128))])}const U={props:{pro:Object,lessons:Array,proLessonType:Object},computed:{lessonFilter:function(){return void 0===this.lessons?[]:this.lessons.filter((e=>e.pro.relNr===this.pro.relNr))}},methods:{}},j=(0,A.A)(U,[["render",P]]),z=j,G={components:{compLesson:z},data:function(){return{date:null,relNr:null,pltNr:null,lessonArray:[],lessonTypeArray:[],clientLessonArray:[]}},watch:{date:function(){this.handleLoad()},pltNr:function(){this.handleLoad()}},mounted(){this.handleLoadLessonTypes()},computed:{lessonType1Array:function(){return this.lessonTypeArray.filter((e=>1==e.pltLtcNr))},pro:function(){return this.proArray.find((e=>e.relNr===this.relNr))},proLessonType:function(){return this.lessonTypeArray.find((e=>e.pltNr===this.pltNr))},proArray:function(){if(void 0===this.lessonArray)return[];let e=[];return this.lessonArray.reduce(((s,o)=>(e.includes(o.pro.relNr)||(e.push(o.pro.relNr),s.push(o.pro)),s)),[])},colWidth:function(){return 120*this.proArray.length+"px"}},methods:{handleLoad:function(){this.$http.get("golfer/lessons?date="+this.date+"&pltNr="+this.pltNr).then((e=>{this.lessonArray=e,this.proArray.length>0&&(this.relNr=this.proArray[0].relNr)}))},handleLoadLessonTypes:function(){this.$http.get("golfer/lessonTypes").then((e=>{this.lessonTypeArray=e,this.pltNr=this.lessonTypeArray[0].pltNr,this.date=this.$dayjs().format("YYYY-MM-DD")}))},handleBook:function(e){this.$q.dialog({title:"Boek een les",message:"Uw boekt nu een les, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let s={lesNr:null,lesRelNrPro:e.pro.relNr,lesPltNr:e.pro_lesson_type.pltNr,lesDate:this.$filters.dateToUnix(this.date,"YYYY-MM-DD"),lesTimeFrom:e.pagTimeFrom,lesTimeTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesBlockedFrom:e.pagTimeFrom,lesBlockedTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesCarNr:0};this.$http.post("golfer/lesson",s).then((()=>{this.$q.notify({type:"positive",message:"Uw les is geboekt"}),this.$emit("handleCloseNew")}))}))}}};var I=o(7316),S=o(2013),K=o(1177);const R=(0,A.A)(G,[["render",E]]),J=R;b()(G,"components",{QInput:I.A,QSelect:S.A,QSeparator:K.A});const Z={mixins:[p.A],components:{compLesson:C,compNew:J},data:function(){return{newLesson:!1,clientLessonArray:[]}},watch:{newLesson:function(e){e||this.handleLoadClientLessons()}},mounted(){this.handleLoadClientLessons()},methods:{handleLoadClientLessons:function(){this.$http.get("golfer/clientLessons").then((e=>{this.clientLessonArray=e}))},handleCloseNew:function(){this.handleLoadClientLessons(),this.newLesson=!1}}};var ee=o(7984),se=o(2507);const oe=(0,A.A)(Z,[["render",i]]),le=oe;b()(Z,"components",{QPageContainer:ee.A,QPage:se.A,QBtn:T.A,QSeparator:K.A})}}]);