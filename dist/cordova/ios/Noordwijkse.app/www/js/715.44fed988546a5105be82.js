"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[715],{3715:(e,t,o)=>{o.r(t),o.d(t,{default:()=>$});o(4564);var l=o(3673);const r={key:0,class:"row fixed-bottom"},s={class:"row q-mt-sm"},i={class:"col text-center"},a=(0,l._)("div",{class:"row q-mt-md q-mb-md"},[(0,l._)("div",{class:"col text-center text-h5"},"Login met uw account")],-1),n={class:"text-center"};function c(e,t,o,c,u,p){const d=(0,l.up)("q-btn"),m=(0,l.up)("q-img"),g=(0,l.up)("q-input"),h=(0,l.up)("q-icon"),w=(0,l.up)("q-card-section"),f=(0,l.up)("q-card"),b=(0,l.up)("q-page"),k=(0,l.up)("q-page-container");return(0,l.wg)(),(0,l.j4)(k,{style:{"margin-top":"-50px","padding-top":"100px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",r,[p.canSignIn?((0,l.wg)(),(0,l.j4)(d,{key:0,color:"primary",flat:"",label:"Inschrijven",onClick:t[0]||(t[0]=t=>e.$router.push("sign-up"))})):(0,l.kq)("",!0),p.canBookPublic?((0,l.wg)(),(0,l.j4)(d,{key:1,color:"primary",flat:"",label:"Starttijd",onClick:t[1]||(t[1]=t=>e.$router.push("teetimes"))})):(0,l.kq)("",!0),p.canBookCourse?((0,l.wg)(),(0,l.j4)(d,{key:2,color:"primary",flat:"",label:"Les",onClick:t[2]||(t[2]=t=>e.$router.push("public_lessons"))})):(0,l.kq)("",!0),p.canBookCourse?((0,l.wg)(),(0,l.j4)(d,{key:3,color:"primary",flat:"",label:"Cursus",onClick:t[3]||(t[3]=t=>e.$router.push("classes"))})):(0,l.kq)("",!0)])),(0,l.Wm)(f,{class:"login_card q-ml-auto q-mr-auto q-mt-xl"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l._)("div",i,[(0,l.Wm)(m,{fit:"scale-down",src:e.blobUrl,style:{"max-width":"400px","max-height":"100px"}},null,8,["src"])])]),a,(0,l.Wm)(g,{modelValue:e.form.relEmail,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.relEmail=t),rules:[e=>e&&e.length>0||"Voer aub uw e-mailadres in"],filled:"",label:"Uw e-mailadres","lazy-rules":""},null,8,["modelValue","rules"]),(0,l.Wm)(g,{modelValue:e.form.repPassword,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.repPassword=t),rules:[e=>e&&e.length>0||"Voer aub uw e-wachtwoord in"],type:e.isPwd?"password":"text",filled:"",label:"Uw wachtwoord","lazy-rules":""},{append:(0,l.w5)((()=>[(0,l.Wm)(h,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[5]||(t[5]=t=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","rules","type"]),(0,l._)("div",n,[(0,l.Wm)(d,{color:"primary",label:"Inloggen",onClick:p.onlogin},null,8,["onClick"]),(0,l.Wm)(d,{class:"q-mt-md",color:"primary",flat:"",label:"Wachtwoord vergeten",onClick:t[7]||(t[7]=t=>e.$router.push("verify-code"))})])])),_:1})])),_:1})])),_:1})])),_:1})}const u={name:"Login",data:function(){return{form:{relEmail:"",repPassword:"",repKey:""},isPwd:!0,blobUrl:"",redirect:""}},mounted(){this.loadImage(),this.$route.query.key&&(this.form.repKey=this.$route.query.key,this.onlogin()),this.form.redirect=this.$route.query.redirect},computed:{canSignIn:function(){return 1===parseInt(this.$store.state.settings.publicItems.website_display_register_button)},canBookPublic:function(){return 1===parseInt(this.$store.state.settings.publicItems.website_display_teetime_public)},canBookCourse:function(){return 1===parseInt(this.$store.state.settings.publicItems.website_display_lessons_public)}},methods:{loadImage(){this.$http.get("golfer/image/"+this.$store.state.settings.publicItems.system_logo).then((e=>{this.blobUrl="data:image/png;base64,"+e}))},async onlogin(){let e=null;if(this.$q.loading.show(),this.$q.platform.is.desktop&&(await this.$recaptchaLoaded(),this.form.captcha=await this.$recaptcha("login")),await this.$http.post("golfer/login",this.form).then((t=>{t&&(e=t,localStorage.setItem("golfer__currentUser",JSON.stringify(e)),localStorage.setItem("golfer__user_token",e.relation_password.apiToken),this.$store.dispatch("settings/clearPublic"))})).catch((e=>{this.$message.error(e)})),e.redirect)return window.location=e.redirect+"?key="+e.relation_password.apiToken;this.$q.loading.hide(),this.$router.push("/")}}};var p=o(4260),d=o(2652),m=o(4379),g=o(8240),h=o(151),w=o(5589),f=o(4027),b=o(4842),k=o(4554),y=o(7518),_=o.n(y);const q=(0,p.Z)(u,[["render",c]]),$=q;_()(u,"components",{QPageContainer:d.Z,QPage:m.Z,QBtn:g.Z,QCard:h.Z,QCardSection:w.Z,QImg:f.Z,QInput:b.Z,QIcon:k.Z})}}]);