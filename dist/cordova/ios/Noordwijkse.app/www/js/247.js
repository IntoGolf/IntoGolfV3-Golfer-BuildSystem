"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[247],{6247:(e,t,s)=>{s.r(t),s.d(t,{default:()=>$});s(5663);var l=s(3673);const o={key:0,class:"row cordova-hide fixed-bottom"},i={class:"row q-mt-sm"},r={class:"col text-center"},n=(0,l._)("div",{class:"row q-mt-md q-mb-md"},[(0,l._)("div",{class:"col text-center text-h5"},"Login met uw account")],-1),a={class:"text-center"};function u(e,t,s,u,c,m){const d=(0,l.up)("q-btn"),p=(0,l.up)("q-img"),h=(0,l.up)("q-input"),g=(0,l.up)("q-icon"),w=(0,l.up)("q-card-section"),f=(0,l.up)("q-card"),b=(0,l.up)("q-page-container");return(0,l.wg)(),(0,l.j4)(b,null,{default:(0,l.w5)((()=>[null!==e.settings?((0,l.wg)(),(0,l.iD)("div",o,[m.canSignIn?((0,l.wg)(),(0,l.j4)(d,{key:0,color:"primary",flat:"",label:"Inschrijven",onClick:t[0]||(t[0]=t=>e.$router.push("sign-up"))})):(0,l.kq)("",!0),m.canBookPublic?((0,l.wg)(),(0,l.j4)(d,{key:1,color:"primary",flat:"",label:"Starttijd",onClick:t[1]||(t[1]=t=>e.$router.push("teetimes"))})):(0,l.kq)("",!0),m.canBookCourse?((0,l.wg)(),(0,l.j4)(d,{key:2,color:"primary",flat:"",label:"Les",onClick:t[2]||(t[2]=t=>e.$router.push("public_lessons"))})):(0,l.kq)("",!0),m.canBookCourse?((0,l.wg)(),(0,l.j4)(d,{key:3,color:"primary",flat:"",label:"Cursus",onClick:t[3]||(t[3]=t=>e.$router.push("classes"))})):(0,l.kq)("",!0)])):(0,l.kq)("",!0),null!==e.settings?((0,l.wg)(),(0,l.j4)(f,{key:1,class:"login_card q-ml-auto q-mr-auto q-mt-xl"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",r,[(0,l.Wm)(p,{fit:"scale-down",src:e.blobUrl,style:{"max-width":"400px","max-height":"100px"}},null,8,["src"])])]),n,(0,l.Wm)(h,{modelValue:e.form.relEmail,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.relEmail=t),rules:[e=>e&&e.length>0||"Voer aub uw e-mailadres in"],filled:"",label:"Uw e-mailadres","lazy-rules":""},null,8,["modelValue","rules"]),(0,l.Wm)(h,{modelValue:e.form.repPassword,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.repPassword=t),rules:[e=>e&&e.length>0||"Voer aub uw e-wachtwoord in"],type:e.isPwd?"password":"text",filled:"",label:"Uw wachtwoord","lazy-rules":""},{append:(0,l.w5)((()=>[(0,l.Wm)(g,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[5]||(t[5]=t=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","rules","type"]),(0,l._)("div",a,[(0,l.Wm)(d,{color:"primary",label:"Inloggen",onClick:m.onlogin},null,8,["onClick"]),(0,l.Wm)(d,{class:"q-mt-md",color:"primary",flat:"",label:"Wachtwoord vergeten",onClick:t[7]||(t[7]=t=>e.$router.push("verify-code"))})])])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1})}var c=s(2662);const m={mixins:[c.Z],name:"Login",data:function(){return{form:{relEmail:"",repPassword:"",repKey:""},isPwd:!0,blobUrl:""}},mounted(){this.$route.query.key&&(this.form.repKey=this.$route.query.key,this.onlogin())},watch:{settings:function(){null!=this.settings&&this.$http.get("golfer/image/"+this.settings.logo).then((e=>{this.blobUrl="data:image/png;base64,"+e}))}},computed:{canSignIn:function(){return 1==parseInt(this.settings.website_display_register_button)},canBookPublic:function(){return 1==parseInt(this.settings.website_display_teetime_public)},canBookCourse:function(){return 1==parseInt(this.settings.website_display_lessons_public)}},methods:{async onlogin(){this.$q.loading.show(),this.$q.platform.is.desktop&&(await this.$recaptchaLoaded(),this.form.captcha=await this.$recaptcha("login")),this.$http.post("golfer/login",this.form).then((e=>{e&&(this.$ls.setItem("currentUser",e,864e8),this.$http.get("golfer/settings").then((e=>{this.$ls.setItem("settings",e,864e8),this.settings=e;let t={matchList:{subFilter:0}};this.$ls.setItem("currentUserPref",t,6048e5),this.$q.loading.hide(),this.$router.push("/")})))})).catch((e=>{this.$message.error(e)}))}}};var d=s(4260),p=s(2652),h=s(8240),g=s(151),w=s(5589),f=s(4027),b=s(4842),k=s(4554),y=s(7518),q=s.n(y);const _=(0,d.Z)(m,[["render",u]]),$=_;q()(m,"components",{QPageContainer:p.Z,QBtn:h.Z,QCard:g.Z,QCardSection:w.Z,QImg:f.Z,QInput:b.Z,QIcon:k.Z})}}]);