"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[414],{6414:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Qt});var a=t(2852);function i(e,l,t,i,n,s){const o=(0,a.g2)("List"),r=(0,a.g2)("Reservation"),d=(0,a.g2)("Booking"),c=(0,a.g2)("q-page-container");return(0,a.uX)(),(0,a.Wv)(c,null,{default:(0,a.k6)((()=>[n.page===n.LIST?((0,a.uX)(),(0,a.Wv)(o,{key:0,array:n.array,onHandleClose:s.handleClose,onHandleOpenBooking:s.handleOpenBooking,onHandleOpenFlight:s.handleOpenFlight,onLoadReservationList:s.loadReservationList},null,8,["array","onHandleClose","onHandleOpenBooking","onHandleOpenFlight","onLoadReservationList"])):(0,a.Q3)("",!0),n.page===n.RESERVATION?((0,a.uX)(),(0,a.Wv)(r,{key:1,flight:n.flight,onHandleClose:s.handleClose},null,8,["flight","onHandleClose"])):(0,a.Q3)("",!0),n.page===n.BOOKING?((0,a.uX)(),(0,a.Wv)(d,{key:2,onHandleClose:s.handleClose,onHandleOpenFlight:s.handleOpenFlight,onLoadReservationList:s.loadReservationList},null,8,["onHandleClose","onHandleOpenFlight","onLoadReservationList"])):(0,a.Q3)("",!0)])),_:1})}function n(e,l,t,i,n,s){const o=(0,a.g2)("comp-details"),r=(0,a.g2)("select-player"),d=(0,a.g2)("comp-edit-player"),c=(0,a.g2)("rent-add"),h=(0,a.g2)("check-in"),f=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(f,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[null!==e.editPlayer||null!==e.addPlayer||e.addRent||e.checkIn?e.addPlayer?((0,a.uX)(),(0,a.Wv)(r,{key:1,flight:e.local_flight,player:e.addPlayer,onHandleCloseEditPlayer:s.handleCloseEditPlayer,onHandleSave:s.handleSave},null,8,["flight","player","onHandleCloseEditPlayer","onHandleSave"])):e.editPlayer?((0,a.uX)(),(0,a.Wv)(d,{key:2,flight:e.local_flight,player:e.editPlayer,onHandleCloseEditPlayer:s.handleCloseEditPlayer,onHandleSave:s.handleSave},null,8,["flight","player","onHandleCloseEditPlayer","onHandleSave"])):e.addRent?((0,a.uX)(),(0,a.Wv)(c,{key:3,flight:e.local_flight,onHandleCloseEditPlayer:s.handleCloseEditPlayer,onHandleRefresh:s.handleRefresh,onHandleSave:s.handleSave},null,8,["flight","onHandleCloseEditPlayer","onHandleRefresh","onHandleSave"])):e.checkIn?((0,a.uX)(),(0,a.Wv)(h,{key:4,flight:e.local_flight},null,8,["flight"])):(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(o,{key:0,flight:e.local_flight,onHandleAddPlayer:s.handleAddPlayer,onHandleAddRent:s.handleAddRent,onHandleCheckIn:s.handleCheckIn,onHandleClose:s.handleClose,onHandleEditPlayer:s.handleEditPlayer,onHandleRefresh:s.handleRefresh,onHandleSave:s.handleSave},null,8,["flight","onHandleAddPlayer","onHandleAddRent","onHandleCheckIn","onHandleClose","onHandleEditPlayer","onHandleRefresh","onHandleSave"]))])),_:1})}var s=t(3100);const o=(0,a.Lk)("b",null,"Voeg speler toe",-1),r=(0,a.Lk)("b",null,"Voeg verhuur toe",-1),d=(0,a.Lk)("b",null,"Deel uw flight",-1),c=(0,a.Lk)("b",null,"Betaal",-1),h=(0,a.Lk)("b",null,"Checkin",-1),f=(0,a.Lk)("b",null,"Boek 2de negen",-1);function u(e,l,t,i,n,u){const p=(0,a.g2)("q-banner"),g=(0,a.g2)("q-btn"),m=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-separator"),b=(0,a.g2)("details-booking"),y=(0,a.g2)("q-item-label"),_=(0,a.g2)("detail-players"),v=(0,a.g2)("rent"),C=(0,a.g2)("q-card"),F=(0,a.g2)("q-icon"),N=(0,a.g2)("q-item-section"),I=(0,a.g2)("q-item"),A=(0,a.g2)("details-menu-cancel-flight"),w=(0,a.g2)("details-menu-cancel-player"),x=(0,a.g2)("q-list"),L=(0,a.g2)("comp-dialog18-holes"),S=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.CE)(a.FK,null,[e.$store.getters["settings/item"].app_display_booking_at_risk&&t.flight.booking_at_risk?((0,a.uX)(),(0,a.Wv)(p,{key:0,class:"text-white bg-red q-mb-md text-center",dense:""},{default:(0,a.k6)((()=>[(0,a.eW)(" Let op, u heeft tot "+(0,s.v_)(u.expire)+" om uw boeking af te ronden? ",1)])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(C,{class:"q-mb-md"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)(" Uw starttijd "),(0,a.bF)(g,{class:"float-right",flat:"",icon:"arrow_back",onClick:l[0]||(l[0]=l=>e.$emit("handleClose"))})])),_:1}),(0,a.bF)(k),(0,a.bF)(b,{flight:t.flight},null,8,["flight"]),(0,a.bF)(y,{header:""},{default:(0,a.k6)((()=>[(0,a.eW)("Deelnemers")])),_:1}),(0,a.bF)(_,{flight:t.flight,onHandleRefresh:l[1]||(l[1]=l=>e.$emit("handleRefresh")),onHandleSave:u.handleSave},null,8,["flight","onHandleSave"]),e.$store.getters["settings/item"].app_display_rent&&t.flight.UniReservations.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(y,{header:""},{default:(0,a.k6)((()=>[(0,a.eW)("Verhuur")])),_:1}),(0,a.bF)(v,{flight:t.flight,onHandleRefresh:l[2]||(l[2]=l=>e.$emit("handleRefresh"))},null,8,["flight"])],64)):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(C,{class:"q-mb-md"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{bordered:"",separator:""},{default:(0,a.k6)((()=>[u.freeSlots>0&&u.isMyBooking&&!u.inThePast?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(I,{key:0,clickable:"",onClick:u.handleAddPlayer},{default:(0,a.k6)((()=>[(0,a.bF)(N,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{name:"person_add"})])),_:1}),(0,a.bF)(N,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[o])),_:1}),(0,a.bF)(y,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" nog "+(0,s.v_)(u.freeSlots)+" plaatsen beschikbaar ",1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[S]]):(0,a.Q3)("",!0),e.$store.getters["settings/item"].app_display_rent&&u.isMyBooking&&!u.inThePast?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(I,{key:1,clickable:"",onClick:u.handleAddRent},{default:(0,a.k6)((()=>[(0,a.bF)(N,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{name:"add"})])),_:1}),(0,a.bF)(N,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[r])),_:1}),(0,a.bF)(y,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" reserveer een handicap of buggy")])),_:1})])),_:1})])),_:1},8,["onClick"])),[[S]]):(0,a.Q3)("",!0),e.$store.getters["settings/item"].app_display_chat&&u.isMyBooking&&!u.inThePast?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(I,{key:2,clickable:"",onClick:u.showShareDialog},{default:(0,a.k6)((()=>[(0,a.bF)(N,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{name:"ios_share"})])),_:1}),(0,a.bF)(N,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[d])),_:1}),(0,a.bF)(y,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" deel je flight via chats")])),_:1})])),_:1})])),_:1},8,["onClick"])),[[S]]):(0,a.Q3)("",!0),(0,a.Q3)("",!0),e.showPay&&u.canCancel&&u.isMyBooking&&!u.paid?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(I,{key:4,clickable:"",onClick:u.onPay},{default:(0,a.k6)((()=>[(0,a.bF)(N,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{name:"payments"})])),_:1}),(0,a.bF)(N,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[c])),_:1})])),_:1})])),_:1},8,["onClick"])),[[S]]):(0,a.Q3)("",!0),1!==e.$store.getters["settings/item"].app_display_checkin||u.inThePast||!e.$store.state.currentUser.item.tile_teetimes_y_n||null===e.$store.state.settings.item.teetime||void 0===e.$store.state.settings.item.teetime||e.$store.state.settings.item.teetime.flpFltNr!==u.local_flight.fltNr||0!==e.$store.state.settings.item.teetime.flpPrice&&null!==e.$store.state.settings.item.teetime.flpPrice?(0,a.Q3)("",!0):(0,a.bo)(((0,a.uX)(),(0,a.Wv)(I,{key:5,clickable:"",onClick:u.onCheckIn},{default:(0,a.k6)((()=>[(0,a.bF)(N,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{style:(0,s.Tr)({color:u.checkedIn?"green":""}),name:"check_circle"},null,8,["style"])])),_:1}),(0,a.bF)(N,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[h])),_:1}),u.checkedIn?((0,a.uX)(),(0,a.Wv)(y,{key:0,caption:""},{default:(0,a.k6)((()=>[(0,a.eW)("u bent ingechecked ")])),_:1})):((0,a.uX)(),(0,a.Wv)(y,{key:1,caption:""},{default:(0,a.k6)((()=>[(0,a.eW)("check uzelf in voor deze flight ")])),_:1}))])),_:1})])),_:1},8,["onClick"])),[[S]]),e.showSecondNine&&u.canCancel&&u.isMyBooking&&!u.paid&&!u.checkedIn&&null===t.flight.fltCrlNr2?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(I,{key:6,clickable:"",onClick:u.showDialogSecNine},{default:(0,a.k6)((()=>[(0,a.bF)(N,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{name:"counter_9"})])),_:1}),(0,a.bF)(N,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[f])),_:1})])),_:1})])),_:1},8,["onClick"])),[[S]]):(0,a.Q3)("",!0),(0,a.bF)(A,{canCancel:u.canCancel&&!u.checkedIn,cancelHours:u.cancelHours,flight:t.flight,isMyBooking:u.isMyBooking,paid:u.paid,onHandleSave:u.handleSave},null,8,["canCancel","cancelHours","flight","isMyBooking","paid","onHandleSave"]),(0,a.bF)(w,{canCancel:u.canCancel&&!u.checkedIn,cancelHours:u.cancelHours,flight:t.flight,isMyBooking:u.isMyBooking,paid:u.paid,onHandleClose:l[3]||(l[3]=l=>e.$emit("handleClose")),onHandleSave:u.handleSave},null,8,["canCancel","cancelHours","flight","isMyBooking","paid","onHandleSave"])])),_:1}),(0,a.bF)(L,{dialogVisible:e.dialogVisible&&!u.checkedIn,flight:t.flight,onHandleClose:u.handleClose18},null,8,["dialogVisible","flight","onHandleClose"])])),_:1})],64)}t(8250),t(5993),t(8988);const p=["onClick"];function g(e,l,t,i,n,o){const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-separator"),h=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.Wv)(f,{ref:"dialog_h18",onHide:o.onDialogHide},{default:(0,a.k6)((()=>[(0,a.bF)(h,{style:{"max-width":"320px",width:"95%"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)(" Uw tweede 9 "),(0,a.bF)(r,{class:"float-right",flat:"",onClick:l[0]||(l[0]=l=>e.$emit("handleClose")),label:"Sluiten"})])),_:1}),(0,a.bF)(c),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.filteredArray,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{class:"q-ma-xs button-second-nine",key:l,onClick:l=>o.handleSave(e)},(0,s.v_)(e.crlName+" "+e.sttTimeFromText),9,p)))),128))])),_:1})])),_:1})])),_:1},8,["onHide"])}t(6809);const m={props:{flight:Object,dialogVisible:Boolean},data:function(){return{teetimes:[],local_flight:{...this.flight}}},watch:{dialogVisible:function(e){e?this.$refs.dialog_h18.show():this.$refs.dialog_h18.hide()}},computed:{filteredArray:function(){let e=this,l=[];return this.teetimes.forEach((function(t,a){Object.entries(t.times).forEach((function(a){a[1].sttTimeFrom>e.flight.fltTime1+130&&l.push({crlNr:t.crlNr,crlName:t.crlName,sttTimeFrom:a[1].sttTimeFrom,sttTimeFromText:e.$filters.minuteToTime(a[1].sttTimeFrom)})}))})),l}},created(){this.handleLoadTeetimes()},methods:{handleLoadTeetimes:function(){let e=this.$filters.unixToDate(this.flight.fltDate,"YYYY-MM-DD");this.$http.get("golfer/teetimes?date="+e).then((e=>{this.teetimes=e.payload}))},handleSave:function(e){this.local_flight.fltCrlNr2=e.crlNr,this.local_flight.fltTime2=e.sttTimeFrom,this.$http.post("golfer/booking",this.local_flight).then((e=>{this.$emit("handleClose",e.flight)}))},onDialogHide:function(){this.$emit("handleClose")}}};var k=t(6317),b=t(2659),y=t(4483),_=t(1656),v=t(3178),C=t(1177),F=t(1082),N=t.n(F);const I=(0,k.A)(m,[["render",g]]),A=I;N()(m,"components",{QDialog:b.A,QCard:y.A,QCardSection:_.A,QBtn:v.A,QSeparator:C.A});var w=t(3842);function x(e,l,t,i,n,s){const o=(0,a.g2)("rent-item"),r=(0,a.g2)("q-list");return(0,a.uX)(),(0,a.Wv)(r,{bordered:"",separator:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.flight.UniReservations,((i,n)=>((0,a.uX)(),(0,a.Wv)(o,{key:n,flight:t.flight,item:i,onHandleRefresh:l[0]||(l[0]=l=>e.$emit("handleRefresh"))},null,8,["flight","item"])))),128))])),_:1})}function L(e,l,t,i,n,o){const r=(0,a.g2)("q-item-label"),d=(0,a.g2)("q-item-section"),c=(0,a.g2)("q-icon"),h=(0,a.g2)("q-item");return(0,a.uX)(),(0,a.Wv)(h,{clickable:"",onClick:o.handleCancel},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,s.v_)(t.item.uni_res_item.uimName),1)])),_:1}),(0,a.bF)(r,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" artikel: "+(0,s.v_)(t.item.uni_res_item_price.uipName+" "+e.$filters.money(t.item.uniAmount)),1)])),_:1})])),_:1}),(0,a.bF)(d,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{name:"remove"})])),_:1})])),_:1},8,["onClick"])}const S={props:{item:Object,flight:Object},methods:{handleCancel(){this.$q.dialog({title:"Bevestiging verwijderen huurartikel",message:"Je staat op het punt dit huurartikel uit je reservering te verwijderen. Weet je zeker dat je wilt doorgaan?",cancel:!0}).onOk((()=>{this.setCancel()}))},async setCancel(){await this.$http.delete("golfer/flight/rent",{params:this.item});this.$emit("handleRefresh")}}};var q=t(9091),P=t(3656),$=t(4701),H=t(8219);const Q=(0,k.A)(S,[["render",L]]),E=Q;N()(S,"components",{QItem:q.A,QItemSection:P.A,QItemLabel:$.A,QIcon:H.A});const R={components:{RentItem:E},props:{flight:Object}};var W=t(192);const M=(0,k.A)(R,[["render",x]]),X=M;N()(R,"components",{QList:W.A});var T=t(9006);const D={class:"row q-mb-sm"},B=(0,a.Lk)("div",{class:"col text-bold"},"Slot",-1),j={class:"col-8 text-right"},V={class:"row q-mb-sm"},O=(0,a.Lk)("div",{class:"col text-bold"},"Lus uit",-1),G={class:"col-8 text-right"},Y={key:0,class:"row q-mb-sm"},U=(0,a.Lk)("div",{class:"col text-bold"},"Lus in",-1),z={class:"col-8 text-right"},K={class:"row q-mb-sm"},J=(0,a.Lk)("div",{class:"col text-bold"},"Boeker",-1),Z={class:"col-8 text-right"},ee={class:"row q-mb-sm"},le=(0,a.Lk)("div",{class:"col text-bold"},"Spelers",-1),te={class:"col-8 text-right"},ae={class:"row q-mb-sm"},ie=(0,a.Lk)("div",{class:"col text-bold"},"Intro ruimte",-1),ne={class:"col-8 text-right"},se={class:"row q-mb-sm"},oe=(0,a.Lk)("div",{class:"col text-bold"},"Greenfee",-1),re={class:"col-8 text-right"},de={class:"row q-mb-sm"},ce=(0,a.Lk)("div",{class:"col text-bold"},"Greenfee tarief",-1),he={class:"col-8 text-right"},fe={class:"row q-mb-sm"},ue=(0,a.Lk)("div",{class:"col text-bold"},"Greenfee totaal",-1),pe={class:"col-8 text-right"},ge={class:"row"},me=(0,a.Lk)("div",{class:"col text-bold"},"Vervalt op",-1),ke={class:"col-8 text-right"},be={class:"row"},ye=(0,a.Lk)("div",{class:"col text-bold"},"Status",-1),_e=(0,a.Lk)("div",{class:"col-8 text-right"},"Betaald",-1),ve=[ye,_e];function Ce(e,l,t,i,n,o){const r=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.Wv)(r,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",D,[B,(0,a.Lk)("div",j,(0,s.v_)(o.slot),1)]),(0,a.Lk)("div",V,[O,(0,a.Lk)("div",G,(0,s.v_)(t.flight.loop1.crlName),1)]),t.flight.fltCrlNr2>0?((0,a.uX)(),(0,a.CE)("div",Y,[U,(0,a.Lk)("div",z,(0,s.v_)(o.courseLoop),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",K,[J,(0,a.Lk)("div",Z,(0,s.v_)(o.bookerName),1)]),(0,a.Lk)("div",ee,[le,(0,a.Lk)("div",te,(0,s.v_)(t.flight.flight_players.filter((e=>null===e.flpCarNr&&""!==e.flpName)).length),1)]),(0,a.Lk)("div",ae,[ie,(0,a.Lk)("div",ne,(0,s.v_)(t.flight.IntroMax-t.flight.IntroCount)+"X ",1)]),(0,a.bo)((0,a.Lk)("div",se,[oe,(0,a.Lk)("div",re,(0,s.v_)(null===t.flight.flight_players[0].greenfee?"-":t.flight.flight_players[0].greenfee.grfName),1)],512),[[T.aG,o.showPay]]),(0,a.bo)((0,a.Lk)("div",de,[ce,(0,a.Lk)("div",he,(0,s.v_)(null===t.flight.flight_players[0].flpPrice?e.$filters.money(0):e.$filters.money(t.flight.flight_players[0].flpPrice)),1)],512),[[T.aG,o.showPay]]),(0,a.bo)((0,a.Lk)("div",fe,[ue,(0,a.Lk)("div",pe,(0,s.v_)(e.$filters.money(o.total)),1)],512),[[T.aG,o.showPay]]),(0,a.bo)((0,a.Lk)("div",ge,[me,(0,a.Lk)("div",ke,(0,s.v_)(e.$dayjs(t.flight.fltTimestamp).add(30,"minutes").format("dddd D MMM HH:mm")),1)],512),[[T.aG,o.showPay&&!o.paid]]),(0,a.bo)((0,a.Lk)("div",be,ve,512),[[T.aG,o.showPay&&o.paid]])])),_:1})}const Fe={mixins:[w.A],props:{flight:Object},computed:{showPay(){return"1"===this.settings.app_display_greenfee_pay},slot:function(){return this.$dayjs(this.$filters.unixToDate(this.flight.fltDate)+" "+this.$filters.minuteToTime(this.flight.fltTime1),"DD-MM-YYYY H:mm").format("dddd D MMM HH:mm")},courseLoop:function(){return this.$filters.minuteToTime(this.flight.fltTime2)+" - "+this.flight.loop2.crlName},bookerName:function(){return this.flight.flight_players[0].flpName},total:function(){return this.flight.flight_players.reduce((function(e,l){return e+l.flpPrice}),0)},paid:function(){return this.flight.flight_players.filter((e=>e.flpBilNr>0||e.flpScorecard>0)).length>0}}},Ne=(0,k.A)(Fe,[["render",Ce]]),Ie=Ne;function Ae(e,l,t,i,n,s){const o=(0,a.g2)("detail-players-player"),r=(0,a.g2)("q-list");return(0,a.uX)(),(0,a.Wv)(r,{bordered:"",separator:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.players,((e,l)=>((0,a.uX)(),(0,a.Wv)(o,{key:l,flight:t.flight,player:e,onHandleSave:s.handleSave},null,8,["flight","player","onHandleSave"])))),128))])),_:1})}function we(e,l,t,i,n,o){const r=(0,a.g2)("player-avatar"),d=(0,a.g2)("q-item-section"),c=(0,a.g2)("q-item-label"),h=(0,a.g2)("q-item"),f=(0,a.gN)("ripple");return(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{clickable:"",onClick:l[0]||(l[0]=e=>o.handleCancelPlayer(t.player))},{default:(0,a.k6)((()=>[(0,a.bF)(d,{avatar:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{player:t.player},null,8,["player"])])),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,s.v_)(t.player.flpName),1)])),_:1}),(0,a.bF)(c,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(t.player.flpEmail),1)])),_:1})])),_:1}),(0,a.bF)(d,{side:"",style:{"font-size":"24px"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(t.player.flpHandicap),1)])),_:1})])),_:1})),[[f]])}function xe(e,l,t,i,n,s){const o=(0,a.g2)("q-img"),r=(0,a.g2)("q-avatar");return(0,a.uX)(),(0,a.Wv)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(o,{src:e.base64Image,height:"40px",style:{"border-radius":"50%"},width:"40px"},null,8,["src"])])),_:1})}N()(Fe,"components",{QCardSection:_.A});const Le={props:{player:Object},data:function(){return{base64Image:null}},async mounted(){await this.loadImage()},methods:{async loadImage(){let e=this.player.avatar;e=""===e?"empty":e;const l="golfer/image/"+e,t=await this.$http({method:"get",url:l});this.base64Image=`data:image/jpeg;base64,${t}`}}};var Se=t(2287),qe=t(24);const Pe=(0,k.A)(Le,[["render",xe]]),$e=Pe;N()(Le,"components",{QAvatar:Se.A,QImg:qe.A});const He={components:{PlayerAvatar:$e},props:{player:Object,flight:Object},computed:{isMyBooking:function(){return this.flight.flight_players[0].flpRelNr===this.$store.state.currentUser.item.relNr},canCancel:function(){return this.$dayjs(this.$filters.unixToDate(this.local_flight.fltDate),"DD-MM-YYYY").add(this.local_flight.fltTime1,"minutes").isAfter(this.$dayjs().add(60*this.cancelHours,"minutes"))}},methods:{handleCancelPlayer:function(e){1!==e.flpSide&&this.isMyBooking&&this.$q.dialog({title:"Speler annuleren",message:"U annuleert de deelname van deze speler, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let l={...this.flight},t=l.flight_players.findIndex((l=>l.flpNr===e.flpNr));l.flight_players[t].flpCarNr=1;let a={flpNr:null,flpSide:l.flight_players[t].flpSide,flpRelNr:null,flpName:"",flpEmail:"",flpHandicap:"",flpCarNr:null};l.flight_players.splice(e.flpSide,0,a),this.$emit("handleSave",l)}))}}};var Qe=t(4850);const Ee=(0,k.A)(He,[["render",we]]),Re=Ee;N()(He,"components",{QItem:q.A,QItemSection:P.A,QItemLabel:$.A}),N()(He,"directives",{Ripple:Qe.A});const We={mixins:[w.A],components:{DetailPlayersPlayer:Re},props:{flight:Object},computed:{playerArray:function(){return this.flight.flight_players.filter((e=>e.flpSide!==this.firstNr&&null===e.flpCarNr&&(this.isMyBooking||null!==e.flpName)))},players(){return this.playerArray.filter((e=>""!==e.flpName))},firstNr:function(){return this.flight.flight_players?this.flight.flight_players[0].flpSide:0},isMyBooking:function(){return this.flight.flight_players[0].flpRelNr===this.currentUser.relNr}},methods:{handleSave(e){this.$emit("handleSave",e)}}},Me=(0,k.A)(We,[["render",Ae]]),Xe=Me;N()(We,"components",{QList:W.A});const Te=(0,a.Lk)("b",null,"Annuleer flight",-1);function De(e,l,t,i,n,o){const r=(0,a.g2)("q-icon"),d=(0,a.g2)("q-item-section"),c=(0,a.g2)("q-item-label"),h=(0,a.g2)("q-item"),f=(0,a.gN)("ripple");return t.canCancel&&!t.paid&&t.isMyBooking?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{key:0,clickable:"",onClick:o.handleCancel},{default:(0,a.k6)((()=>[(0,a.bF)(d,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{name:"delete"})])),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[Te])),_:1}),(0,a.bF)(c,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" tot "+(0,s.v_)(t.cancelHours)+" uur voor start",1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[f]]):(0,a.Q3)("",!0)}const Be={props:{flight:Object,cancelHours:Number,canCancel:Boolean,paid:Boolean,isMyBooking:Boolean},methods:{handleCancel:function(){let e={...this.flight};e.fltCarNr=1,this.$q.dialog({title:"Starttijd annuleren",message:"Wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{this.$emit("handleSave",e,!0)}))}}},je=(0,k.A)(Be,[["render",De]]),Ve=je;N()(Be,"components",{QItem:q.A,QItemSection:P.A,QIcon:H.A,QItemLabel:$.A}),N()(Be,"directives",{Ripple:Qe.A});const Oe=(0,a.Lk)("b",null,"Annuleer mijn deelname",-1);function Ge(e,l,t,i,n,o){const r=(0,a.g2)("q-icon"),d=(0,a.g2)("q-item-section"),c=(0,a.g2)("q-item-label"),h=(0,a.g2)("q-item"),f=(0,a.gN)("ripple");return!t.canCancel||t.paid||t.isMyBooking?(0,a.Q3)("",!0):(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{key:0,clickable:"",onClick:o.handleCancel},{default:(0,a.k6)((()=>[(0,a.bF)(d,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{name:"delete"})])),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[Oe])),_:1}),(0,a.bF)(c,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" tot "+(0,s.v_)(t.cancelHours)+" uur voor start",1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[f]])}const Ye={props:{flight:Object,cancelHours:Number,canCancel:Boolean,paid:Boolean,isMyBooking:Boolean},methods:{handleCancel:function(){let e={...this.flight};e.fltCarNr=1,this.$q.dialog({title:"Deelname annuleren",message:"Je staat op het punt jezelf van de flight te verwijderen, wil je doorgaan?",cancel:!0}).onOk((()=>{let e={...this.flight},l=this.$store.state.currentUser.item.relNr,t=this.flight.flight_players.find((e=>e.flpRelNr===l));t.flpCarNr=1;let a={flpNr:null,flpSide:t.flpSide,flpRelNr:null,flpName:null,flpEmail:"",flpHandicap:"",flpCarNr:null};e.flight_players.splice(t.flpSide-1,0,a),this.$emit("handleSave",e),this.$emit("handleClose")}))}}},Ue=(0,k.A)(Ye,[["render",Ge]]),ze=Ue;N()(Ye,"components",{QItem:q.A,QItemSection:P.A,QIcon:H.A,QItemLabel:$.A}),N()(Ye,"directives",{Ripple:Qe.A});const Ke={mixins:[w.A],components:{DetailsMenuCancelPlayer:ze,DetailsMenuCancelFlight:Ve,DetailPlayers:Xe,DetailsBooking:Ie,Rent:X,compDialog18Holes:A},props:{flight:Object},emits:["handleAddPlayer","handleAddRent","handleCheckIn","handleClose","handleEditPlayer","handleRefresh","handleSave"],data:function(){return{dialogVisible:!1,showPay:0,showSecondNine:0,chatList:[],circleShare:null}},mounted(){this.showPay="1"===this.settings.app_display_greenfee_pay,this.showSecondNine=this.settings.app_display_second_nine_select,this.getChats()},computed:{local_flight(){return this.flight},playerArray:function(){return this.local_flight.flight_players.filter((e=>e.flpSide!==this.firstNr&&null===e.flpCarNr&&(this.isMyBooking||null!==e.flpName)))},firstNr:function(){return this.local_flight.flight_players[0].flpSide},players(){return this.playerArray.filter((e=>""!==e.flpName))},checkedIn(){return this.player.flpScorecard>0},freeSlots(){return 1===this.$store.state.settings.item.app_only_book_members?this.flight.startTime.sttMaxPlayers-this.playerArray.filter((e=>""!==e.flpName)).length:this.flight.startTime.sttMaxPlayers-this.local_flight.flight_players.filter((e=>""!==e.flpName)).length},inThePast:function(){return this.$dayjs(this.$filters.unixToDate(this.local_flight.fltDate),"DD-MM-YYYY").add(this.local_flight.fltTime1,"minutes").isBefore(this.$dayjs())},expire:function(){return this.$dayjs(this.flight.fltExpire).format("HH:mm")},cancelHours:function(){return this.settings.planner_cancel_hours&&parseInt(this.settings.planner_cancel_hours)>0?parseInt(this.settings.planner_cancel_hours):24},canCancel:function(){return this.$dayjs(this.$filters.unixToDate(this.local_flight.fltDate),"DD-MM-YYYY").add(this.local_flight.fltTime1,"minutes").isAfter(this.$dayjs().add(60*this.cancelHours,"minutes"))},isMyBooking:function(){return this.local_flight.flight_players[0].flpRelNr===this.currentUser.relNr},player:function(){return this.local_flight.flight_players.find((e=>e.flpRelNr===this.currentUser.relNr))},paid:function(){return this.local_flight.flight_players.filter((e=>e.flpBilNr>0||e.flpScorecard>0)).length>0},chatCheckArray(){return this.chatList.map((function(e){return{value:e.chtNr,label:e.chtName}}))}},methods:{handleCancel:function(){this.local_flight.fltCarNr=1,this.$q.dialog({title:"Starttijd annuleren",message:"Wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{this.$emit("handleSave",this.local_flight,!0)}))},handleSave:function(e){this.$emit("handleSave",e)},onCheckIn(){this.checkedIn||this.$emit("handleCheckIn")},onPay:function(){this.$http.get("golfer/pay",{params:{fltNr:this.flight.fltNr}}).then((e=>{200===e.status&&(window.location.href=e.url)}))},getIcs(){this.$q.dialog({title:"Voeg toe aan agenda",cancel:!0,message:"Na het klikken op ok, kan uw browser het ICS-bestand automatisch openen of opslaan. Als het bestand wordt opgeslagen, open het dan handmatig om het aan uw agenda toe te voegen"}).onOk((e=>{const l=this.getIcsFile();if(l){const e=new Blob([l],{type:"text/calendar"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="event.ics",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}))},async getIcsFile(){let e={fltNr:this.local_flight.fltNr};return await this.$http.get("golfer/flight/ics",{params:e})},showShareDialog(){this.$q.dialog({title:"Selecteer Chat's",message:"Kies de chats waar u uw boeking wilt delen",cancel:!0,options:{type:"checkbox",model:[],items:this.chatCheckArray}}).onOk((e=>{this.shareBooking(e)}))},async getChats(){if(this.$store.getters["settings/item"].app_display_chat){const e=await this.$http.get("chat/list?flat=true");this.chatList=e.data}},shareBooking(e){let l={fltNr:this.local_flight.fltNr,cirArray:e};this.$http.post("golfer/booking/share",l)},handleClose18:function(e){void 0!==e&&(this.local_flight=e),this.dialogVisible=!1},handleAddPlayer(){let e;const l=this.flight.flight_players.reduce(((e,l)=>l.flpSide>e?l.flpSide:e),this.flight.flight_players[0].flpSide);e={flpNr:null,flpFltNr:this.flight.fltNr,flpBilNr:null,flpCarNr:null,flpEmail:"",flpGrfNr:null,flpGsn:null,flpHandicap:null,flpIntro:null,flpName:"",flpPhone:"",flpPrice:null,flpRelNr:null,flpScorecard:null,flpSide:l+1},this.$emit("handleAddPlayer",e)},showDialogSecNine(){this.dialogVisible=!0},handleAddRent(){this.$emit("handleAddRent")}}};var Je=t(5795);const Ze=(0,k.A)(Ke,[["render",u]]),el=Ze;N()(Ke,"components",{QBanner:Je.A,QCard:y.A,QCardSection:_.A,QBtn:v.A,QSeparator:C.A,QItemLabel:$.A,QList:W.A,QItem:q.A,QItemSection:P.A,QIcon:H.A}),N()(Ke,"directives",{Ripple:Qe.A});const ll=(0,a.Lk)("br",null,null,-1),tl=(0,a.Lk)("br",null,null,-1),al=(0,a.Lk)("br",null,null,-1),il=(0,a.Lk)("br",null,null,-1),nl=(0,a.Lk)("br",null,null,-1);function sl(e,l,t,i,n,o){const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-separator"),h=(0,a.g2)("q-input"),f=(0,a.g2)("q-toggle"),u=(0,a.g2)("qrcode-stream"),p=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.title)+" ",1),o.showCancelBtn?((0,a.uX)(),(0,a.Wv)(r,{key:0,class:"float-right",color:"negative",icon:"delete",size:"md",onClick:o.onCancel},null,8,["onClick"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(c),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(h,{modelValue:e.flpName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.flpName=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Naam speler",maxlength:"40",outlined:""},null,8,["modelValue","readonly"]),[[T.aG,!e.scan]]),(0,a.bo)((0,a.bF)(h,{modelValue:e.flpHandicap,"onUpdate:modelValue":l[1]||(l[1]=l=>e.flpHandicap=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Handicap",maxlength:"4",outlined:""},null,8,["modelValue","readonly"]),[[T.aG,!e.scan]]),(0,a.bo)((0,a.bF)(h,{modelValue:e.flpEmail,"onUpdate:modelValue":l[2]||(l[2]=l=>e.flpEmail=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"E-mailadres",maxlength:"40",outlined:""},null,8,["modelValue","readonly"]),[[T.aG,!e.scan&&null===t.player.flpRelNr]]),(0,a.bo)((0,a.bF)(h,{modelValue:e.flpPhone,"onUpdate:modelValue":l[3]||(l[3]=l=>e.flpPhone=l),readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Telefoonnummer",mask:"###############",maxlength:"15",outlined:""},null,8,["modelValue","readonly"]),[[T.aG,!e.scan&&null===t.player.flpRelNr]]),(0,a.bo)((0,a.bF)(h,{modelValue:e.flpGsn,"onUpdate:modelValue":l[4]||(l[4]=l=>e.flpGsn=l),disable:1===e.flpIntro,readonly:t.player.flpRelNr>0,class:"q-mb-sm",clearable:"",counter:"",label:"Golfservicenummer",maxlength:"10",outlined:""},null,8,["modelValue","disable","readonly"]),[[T.aG,!e.scan&&null===t.player.flpRelNr]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("i",null,(0,s.v_)(e.textIntroMessage),1),ll],512),[[T.aG,o.showIntroMessage&&null===t.player.flpRelNr]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("i",null,(0,s.v_)(e.textExceedIntroodMessage),1),tl],512),[[T.aG,o.showExceedIntroodMessage&&null===t.player.flpRelNr]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("i",null,(0,s.v_)(e.textExceedIntrosMessage),1),al],512),[[T.aG,o.showExceedIntrosMessage&&null===t.player.flpRelNr]]),(0,a.bo)((0,a.bF)(f,{modelValue:e.flpIntro,"onUpdate:modelValue":l[5]||(l[5]=l=>e.flpIntro=l),disable:o.disableIntoToggle,"false-value":null,"true-value":1,label:"Introducee","left-label":""},null,8,["modelValue","disable"]),[[T.aG,0===t.player.flpRelNr||null===t.player.flpRelNr]]),il,(0,a.bo)((0,a.Lk)("div",null,[nl,(0,a.Lk)("i",null,(0,s.v_)(e.textIntroodMessage),1)],512),[[T.aG,o.showIntroodMessage&&null===t.player.flpRelNr]]),e.scan?((0,a.uX)(),(0,a.Wv)(u,{key:0,onDecode:o.onDecode,onInit:e.onInit},null,8,["onDecode","onInit"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(c),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{class:"q-mr-sm",color:"primary",icon:"save",onClick:o.handleSave},null,8,["onClick"]),[[T.aG,!e.scan]]),(0,a.bo)((0,a.bF)(r,{class:"q-mr-sm",color:"primary",icon:"arrow_back",onClick:l[6]||(l[6]=l=>e.$emit("handleCloseEditPlayer"))},null,512),[[T.aG,!e.scan]]),(0,a.bo)((0,a.bF)(r,{class:"q-mr-sm",color:"primary",icon:"arrow_back",onClick:l[7]||(l[7]=l=>e.scan=!1)},null,512),[[T.aG,e.scan]]),(0,a.bo)((0,a.bF)(r,{class:"q-mr-sm",color:"primary",icon:"qr_code_2",onClick:l[8]||(l[8]=l=>e.scan=!0)},null,512),[[T.aG,!e.scan&&null===t.player.flpRelNr]])])),_:1})])),_:1})}var ol=t(1662);const rl={components:{QrcodeStream:ol.QrcodeStream},props:{flight:Object,player:Object},data:function(){return{title:"Speler "+this.player.flpSide,local_flight:this.flight,local_player:this.player,flpName:this.player.flpName,flpHandicap:this.player.flpHandicap,flpEmail:this.player.flpEmail,flpPhone:this.player.flpPhone,flpGsn:this.player.flpGsn,flpIntro:this.player.flpIntro,scan:!1,IntroMax:1,Intros:0,titleCancel:"Speler annuleren",messageCancel:"U annuleert de deelname van deze speler en kunt hierna een andere speler aan de flight toevoegen, wilt u doorgaan?",textIntroMessage:"Wenst u deze speler te introduceren voer dan het GSN nummer van de speler in.",textExceedIntroodMessage:"Deze speler is over de introductie limiet van "+this.IntroMax+" intoducties en kan nier meer worden geintroduceerd.",textExceedIntrosMessage:"U kunt niet meer introduceren u heeft het maximum aantal van "+this.flight.IntroMax+" introducties bereikt.",textIntroodMessage:'U introduceert deze speler, voordat u start moet het GSN nummer gevalideerd worden. U kunt dit doen door op onderstaande knop "SCAN NGF" te klikken of bij de caddiemaster."'}},computed:{canCancel:function(){return!0},showIntroMessage:function(){return null===this.flpIntro&&this.flight.IntroMax>this.flight.IntroCount&&this.IntroMax>this.Intros},showExceedIntroodMessage:function(){return null!==this.flpGsn&&10===this.flpGsn.length&&this.IntroMax>0&&this.IntroMax<this.Intros},showExceedIntrosMessage:function(){return null===this.flpIntro&&this.flight.IntroMax<=this.flight.IntroCount},showIntroodMessage:function(){return 1===this.flpIntro},showCancelBtn:function(){return this.canCancel&&!this.scan},disableIntoToggle:function(){return null===this.flpGsn||this.flpGsn.length<10||this.flight.IntroMax<=this.flight.IntroCount||this.IntroMax<=this.Intros}},watch:{flpHandicap:function(e){this.flpHandicap=e.replace(",",".")},flpGsn:function(e){if(e.length<10)return;let l={params:{fltDate:this.flight.fltDate,flpGsn:e}};this.$http.get("golfer/intros",l).then((e=>{this.IntroMax=e.IntroMax,this.Intros=e.Intros}))}},methods:{onCancel:function(){this.$q.dialog({title:this.titleCancel,message:this.messageCancel,cancel:!0,persistent:!0}).onOk((()=>{let e=this.local_flight.flight_players.findIndex((e=>e.flpNr===this.player.flpNr));this.local_flight.flight_players[e].flpCarNr=1;let l={flpNr:null,flpSide:this.local_flight.flight_players[e].flpSide,flpRelNr:null,flpName:null,flpEmail:"",flpHandicap:"",flpCarNr:null};this.local_flight.flight_players.splice(this.local_flight.flight_players[e].flpSide-1,0,l),this.$emit("handleSave",this.local_flight,!0)}))},handleSave:function(){this.local_player.flpName=this.flpName,this.local_player.flpHandicap=this.flpHandicap,this.local_player.flpEmail=this.flpEmail,this.local_player.flpPhone=this.flpPhone,this.local_player.flpGsn=this.flpGsn,this.local_player.flpIntro=this.flpIntro,this.$emit("handleSave",this.local_flight)},onDecode:function(e){this.flpName=e.substring(11,59).trim(),this.flpHandicap=e.substring(77,82).trim(),this.flpGsn=e.substring(83,95).trim(),this.flpGender=e.substring(82,83).trim(),this.scan=!1}}};var dl=t(7316),cl=t(3059);const hl=(0,k.A)(rl,[["render",sl]]),fl=hl;N()(rl,"components",{QCard:y.A,QCardSection:_.A,QBtn:v.A,QSeparator:C.A,QInput:dl.A,QToggle:cl.A});const ul=(0,a.Lk)("b",null,"Bekende speler",-1),pl=(0,a.Lk)("b",null,"Locatie relaties",-1),gl=(0,a.Lk)("b",null,"Gast",-1),ml={key:1},kl=(0,a.Lk)("i",null,"bekende spelers",-1),bl=(0,a.Lk)("p",null,"Voer de gegevens in van de gast die u wenst uit te nodigen.",-1),yl={class:"q-gutter-y-md column"};function _l(e,l,t,i,n,o){const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-separator"),h=(0,a.g2)("q-item-label"),f=(0,a.g2)("q-item-section"),u=(0,a.g2)("q-icon"),p=(0,a.g2)("q-item"),g=(0,a.g2)("q-list"),m=(0,a.g2)("q-card"),k=(0,a.g2)("q-input"),b=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.CE)("div",null,[0===e.typePlayer?((0,a.uX)(),(0,a.Wv)(m,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)(" Voeg een speler toe "),(0,a.bF)(r,{class:"float-right",flat:"",icon:"arrow_back",onClick:o.handleClose},null,8,["onClick"])])),_:1}),(0,a.bF)(c),(0,a.bF)(g,{bordered:"",separator:""},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(p,{clickable:"",onClick:l[0]||(l[0]=l=>e.typePlayer=1)},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[ul])),_:1}),(0,a.bF)(h,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" spelers met wie je eerder hebt gespeeld ")])),_:1})])),_:1}),(0,a.bF)(f,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{name:"person"})])),_:1})])),_:1})),[[T.aG,1!==e.$store.state.settings.item.app_only_book_members],[b]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(p,{clickable:"",onClick:l[1]||(l[1]=l=>e.typePlayer=2)},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[pl])),_:1}),(0,a.bF)(h,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" personen die hun gegevens hebben gedeeld ")])),_:1})])),_:1}),(0,a.bF)(f,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{name:"search"})])),_:1})])),_:1})),[[b]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(p,{clickable:"",onClick:l[2]||(l[2]=l=>e.typePlayer=3)},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[gl])),_:1}),(0,a.bF)(h,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" voer een speler in als gast")])),_:1})])),_:1}),(0,a.bF)(f,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{name:"add"})])),_:1})])),_:1})),[[T.aG,1!==e.$store.state.settings.item.app_only_book_members],[b]])])),_:1})])),_:1})):(0,a.Q3)("",!0),1===e.typePlayer?((0,a.uX)(),(0,a.Wv)(m,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)(" Spelers "),(0,a.bF)(r,{class:"float-right",flat:"",icon:"arrow_back",onClick:l[3]||(l[3]=l=>e.typePlayer=0)})])),_:1}),(0,a.bF)(c),o.knownPlayers.length>0?((0,a.uX)(),(0,a.Wv)(g,{key:0,bordered:"",separator:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.knownPlayers,((l,t)=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(p,{key:t,clickable:"",onClick:t=>e.knownPlayer=l.flpName},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,s.v_)(l.flpName),1)])),_:2},1024),(0,a.bF)(h,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.flpEmail),1)])),_:2},1024)])),_:2},1024),(0,a.bF)(f,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{name:"person"})])),_:1})])),_:2},1032,["onClick"])),[[b]]))),128))])),_:1})):((0,a.uX)(),(0,a.CE)("p",ml,[(0,a.eW)(" Er zijn nog geen golfers in je "),kl,(0,a.eW)(" lijst. In deze lijst zie je golfers met wie je eerder een ronde hebt gespeeld. ")]))])),_:1})):2===e.typePlayer?((0,a.uX)(),(0,a.Wv)(m,{key:2},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)(" Relatie "),(0,a.bF)(r,{class:"float-right",flat:"",icon:"arrow_back",onClick:l[4]||(l[4]=l=>e.typePlayer=0)})])),_:1}),(0,a.bF)(c),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{modelValue:e.relationSearch,"onUpdate:modelValue":l[5]||(l[5]=l=>e.relationSearch=l),label:"Zoek in clubleden",onKeyup:(0,T.jR)(o.handleSearch,["enter"])},{append:(0,a.k6)((()=>[(0,a.bF)(u,{class:"cursor-pointer",name:"search",onClick:o.handleSearch},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])),_:1}),(0,a.bF)(g,{bordered:"",separator:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.relations,((l,t)=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(p,{key:t,clickable:"",onClick:t=>e.relation=l.relNr},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,s.v_)(l.full_name2),1)])),_:2},1024),(0,a.bF)(h,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" handicap: "+(0,s.v_)(l.relHandicap),1)])),_:2},1024)])),_:2},1024),(0,a.bF)(f,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{name:"person"})])),_:1})])),_:2},1032,["onClick"])),[[b]]))),128))])),_:1})])),_:1})):3===e.typePlayer?((0,a.uX)(),(0,a.Wv)(m,{key:3},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)(" Gast "),(0,a.bF)(r,{class:"float-right",flat:"",icon:"arrow_back",onClick:l[6]||(l[6]=l=>e.typePlayer=0)})])),_:1}),(0,a.bF)(c),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[bl,(0,a.Lk)("div",yl,[(0,a.bF)(k,{modelValue:e.guest.flpName,"onUpdate:modelValue":l[7]||(l[7]=l=>e.guest.flpName=l),clearable:"",dense:"",label:"Naam*",outlined:""},null,8,["modelValue"]),(0,a.bF)(k,{modelValue:e.guest.flpEmail,"onUpdate:modelValue":l[8]||(l[8]=l=>e.guest.flpEmail=l),clearable:"",dense:"",label:"E-mail",outlined:""},null,8,["modelValue"]),(0,a.bF)(k,{modelValue:e.guest.flpPhone,"onUpdate:modelValue":l[9]||(l[9]=l=>e.guest.flpPhone=l),clearable:"",dense:"",label:"Telefoon",outlined:""},null,8,["modelValue"]),(0,a.bF)(k,{modelValue:e.guest.flpHandicap,"onUpdate:modelValue":l[10]||(l[10]=l=>e.guest.flpHandicap=l),clearable:"",dense:"",label:"Handicap*",outlined:""},null,8,["modelValue"])])])),_:1}),(0,a.bF)(c),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{disable:!o.validGuest,class:"q-mr-md",color:"primary",icon:"save",label:"Opslaan",onClick:o.handleSave},null,8,["disable","onClick"])])),_:1})])),_:1})):(0,a.Q3)("",!0)])}const vl={props:{flight:Object,player:Object},data:function(){return{knownPlayerList:[],list:[],relations:[],knownPlayer:"",relation:"",relationSearch:"",guest:{flpName:"",flpEmail:"",flpPhone:"",flpHandicap:""},filterVal:"",typePlayer:0}},watch:{knownPlayer:function(e){this.knownPlayer=null===e?"":e,""!==this.knownPlayer&&this.handleSave()},relation:function(e){this.relation=null===e?"":e,null!==this.knownPlayer&&this.handleSave()},guest:function(e){this.guest=null===e?"":e}},created(){this.handleLoad()},computed:{handicapGuestValid(){const e=this.guest.flpHandicap.replace(",","."),l=parseFloat(e);if(!isNaN(l)&&l>=-9.9&&l<=54){const l=(e.split(".")[1]||"").length;return l<=1}return!1},validGuest(){return this.guest.flpName.length>2&&this.handicapGuestValid},currentPlayers(){return this.flight.flight_players.filter((e=>""!==e.flpName&&null===e.flpCarNr)).map((e=>e.flpName))},knownPlayers(){let e=this.currentPlayers;return this.knownPlayerList.filter((l=>!e.includes(l.flpName)))}},methods:{handleClose(){this.$emit("handleCloseEditPlayer")},handleLoad:function(){let e=this;this.$http.get("golfer/knownPlayers?fltNr="+this.flight.fltNr).then((l=>{e.knownPlayerList=e.list=l}))},handleSave:function(){let e,l={...this.flight};if(null===this.player.flpNr?(e=this.player,l.flight_players.push(e)):e=l.flight_players.find((e=>e.flpNr===this.player.flpNr)),this.knownPlayer){let l=this.knownPlayerList.find((e=>e.flpName===this.knownPlayer));e.flpName=l.flpName,e.flpHandicap=l.flpHandicap,e.flpGsn=l.flpGsn,e.flpEmail=l.flpEmail,e.flpPhone=l.flpPhone,e.flpRelNr=l.flpRelNr}else if(this.guest.flpName.length>0)e.flpName=this.guest.flpName,e.flpEmail=this.guest.flpEmail,e.flpPhone=this.guest.flpPhone,e.flpHandicap=this.guest.flpHandicap;else{let l=this.relations.find((e=>e.relNr===this.relation));e.flpName=l.full_name2,e.flpRelNr=this.relation,e.flpHandicap=this.relation.relHandicap}if(e.flpHandicap>l.crlMaxHandicap)return this.$q.notify("Handicap niet toereikend");this.$q.dialog({title:"Bevestiging toevoegen speler",message:'Je staat op het punt "'+e.flpName+'" toe te voegen aan je reservering. Weet je zeker dat je wilt doorgaan?',cancel:!0}).onOk((()=>{this.$emit("handleSave",l)}))},async handleSearch(){if(this.relationSearch.length<2)return;let e=this.flight.fltNr;await this.$http.get(`golfer/relation?search=${this.relationSearch}&fltNr=${e}`).then((e=>{this.relations=e}))}}},Cl=(0,k.A)(vl,[["render",_l]]),Fl=Cl;function Nl(e,l,t,i,n,o){const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-separator"),h=(0,a.g2)("q-item-label"),f=(0,a.g2)("q-item-section"),u=(0,a.g2)("q-icon"),p=(0,a.g2)("q-item"),g=(0,a.g2)("q-list"),m=(0,a.g2)("q-card"),k=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)(" Verhuurartikelen "),(0,a.bF)(r,{class:"float-right",flat:"",icon:"arrow_back",onClick:o.handleClose},null,8,["onClick"])])),_:1}),(0,a.bF)(c),(0,a.bF)(g,{bordered:"",separator:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.list,((e,l)=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(p,{key:l,clickable:"",onClick:l=>o.handleAdd(e)},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,s.v_)(e.uitName),1)])),_:2},1024),(0,a.bF)(h,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)(" aantal beschikbaar "+(0,s.v_)(e.available),1)])),_:2},1024)])),_:2},1024),(0,a.bF)(f,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{name:"add"})])),_:1})])),_:2},1032,["onClick"])),[[k]]))),128))])),_:1})])),_:1})])}N()(vl,"components",{QCard:y.A,QCardSection:_.A,QBtn:v.A,QSeparator:C.A,QList:W.A,QItem:q.A,QItemSection:P.A,QItemLabel:$.A,QIcon:H.A,QInput:dl.A}),N()(vl,"directives",{Ripple:Qe.A});const Il={props:{flight:Object},data:function(){return{list:[]}},created(){this.handleLoad()},methods:{handleClose(){this.$emit("handleCloseEditPlayer")},async handleLoad(){this.list=await this.$http.get("golfer/flight/rent?fltNr="+this.flight.fltNr)},async handleAdd(e){this.$q.dialog({title:"Bevestiging toevoegen huurartikel",message:'Je staat op het punt huurartikel "'+e.uitName+'" toe te voegen aan je reservering. Weet je zeker dat je wilt doorgaan?',cancel:!0}).onOk((()=>{this.setAdd(e)}))},async setAdd(e){let l={fltNr:this.flight.fltNr,numberOfItems:1,rent:{uitNr:e.uitNr},rentPrice:{uipNr:e.uni_res_item_prices[0].uipNr,uipPrice:e.uni_res_item_prices[0].uipPrice}};await this.$http.post("golfer/flight/rent",l);this.$emit("handleRefresh")}}},Al=(0,k.A)(Il,[["render",Nl]]),wl=Al;N()(Il,"components",{QCard:y.A,QCardSection:_.A,QBtn:v.A,QSeparator:C.A,QList:W.A,QItem:q.A,QItemSection:P.A,QItemLabel:$.A,QIcon:H.A}),N()(Il,"directives",{Ripple:Qe.A});var xl=t(2284);const Ll={mixins:[w.A],components:{CheckIn:xl["default"],rentAdd:wl,SelectPlayer:Fl,compDetails:el,compEditPlayer:fl},props:{flight:Object},data:function(){return{loading:!1,dialogVisible:!1,editPlayer:null,addPlayer:null,addRent:!1,local_flight:{...this.flight},checkIn:!1}},computed:{playerArray:function(){return this.local_flight.flight_players.filter((e=>e.flpSide!==this.firstNr&&null===e.flpCarNr&&(this.isMyBooking||null!==e.flpName)))},isMyBooking:function(){return this.local_flight.flight_players[0].flpRelNr===this.currentUser.relNr},firstNr:function(){return this.local_flight.flight_players?this.local_flight.flight_players[0].flpSide:0}},methods:{handleSave:function(e){this.loading=!1,this.$http.post("golfer/booking",e).then((l=>{e.fltCarNr>0?this.handleClose():(this.local_flight=l.flight,this.handleCloseEditPlayer())})).catch((()=>{this.handleRefresh()}))},handleClose:function(){this.$emit("handleClose")},handleEditPlayer:function(e){this.editPlayer=e},handleAddPlayer:function(e){this.addPlayer=e},handleAddRent:function(){this.addRent=!0},handleCloseEditPlayer:function(){this.editPlayer=null,this.addPlayer=null,this.addRent=!1},async handleRefresh(){this.local_flight=await this.$http.get("golfer/booking",{params:this.local_flight}),this.editPlayer=null,this.addPlayer=null,this.addRent=!1},handleCheckIn(){this.checkIn=!0}}};var Sl=t(2507);const ql=(0,k.A)(Ll,[["render",n]]),Pl=ql;N()(Ll,"components",{QPage:Sl.A});const $l={class:"row"},Hl={class:"col"},Ql={class:"row items-center justify-end",flat:""},El={class:"row q-mt-md"},Rl={class:"col-5 q-pr-sm"},Wl={key:0,class:"col-7"},Ml={key:0,class:"row",style:{"margin-top":"10px",padding:"5px",border:"3px solid orange"}},Xl={key:1,class:"row"},Tl={class:"row text-center text-white bg-secondary",style:{height:"40px","border-bottom":"black"}},Dl={class:"col",style:{"font-size":"18px","margin-top":"5px","font-weight":"bold","border-bottom":"black"}},Bl={class:"row q-gutter-xs",style:{"max-height":"600px",overflow:"scroll"}},jl=["onClick"],Vl={class:"row"},Ol={class:"col"},Gl={key:0,class:"row"},Yl={class:"col"},Ul={key:0},zl={key:1},Kl={class:"row"},Jl=(0,a.Lk)("div",{class:"col text-left text-bold"},"Datum",-1),Zl={class:"col text-right"},et={class:"row q-mt-xs"},lt=(0,a.Lk)("div",{class:"col text-left text-bold"},"Tijd",-1),tt={class:"col text-right"},at={key:0,class:"row q-mt-xs"},it=(0,a.Lk)("div",{class:"col text-left text-bold"},"Spelers",-1),nt={class:"col text-right"},st={key:1,class:"row q-mt-xs"},ot=(0,a.Lk)("div",{class:"col text-left text-bold"},"Max. spelers",-1),rt={class:"col text-right"},dt={class:"row q-mt-xs"},ct=(0,a.Lk)("div",{class:"col text-left text-bold"},"Baan",-1),ht={class:"col text-right"},ft={class:"col text-left"};function ut(e,l,t,i,n,o){const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-date"),c=(0,a.g2)("q-popup-proxy"),h=(0,a.g2)("q-btn-group"),f=(0,a.g2)("q-separator"),u=(0,a.g2)("q-icon"),p=(0,a.g2)("q-card-section"),g=(0,a.g2)("q-card-actions"),m=(0,a.g2)("q-card"),k=(0,a.g2)("q-dialog"),b=(0,a.g2)("q-page"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(b,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",$l,[(0,a.Lk)("div",Hl,[(0,a.eW)(" Datum: "),(0,a.bF)(h,{class:"full-width",unelevated:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{color:"primary",icon:"chevron_left",style:{width:"50px"},onClick:l[0]||(l[0]=e=>o.navDay(-1))}),(0,a.bF)(r,{class:"full-width",color:"primary",style:{width:"calc(100% - 100px)"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$dayjs(e.form.fltDate).format("dddd DD MMMM"))+" ",1),(0,a.bF)(c,{ref:"qDateTeeTime","transition-hide":"scale","transition-show":"scale"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:e.date,"onUpdate:modelValue":l[1]||(l[1]=l=>e.date=l),options:o.optionsFn,mask:"YYYY-MM-DD","today-btn":"",onChange:o.loadTeetimes},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ql,[(0,a.bo)((0,a.bF)(r,{color:"primary",flat:"",label:"Sluiten"},null,512),[[y]])])])),_:1},8,["modelValue","options","onChange"])])),_:1},512)])),_:1}),(0,a.bF)(r,{color:"primary",icon:"chevron_right",style:{width:"50px"},onClick:l[2]||(l[2]=e=>o.navDay(1))})])),_:1})])]),(0,a.Lk)("div",El,[(0,a.Lk)("div",Rl,[(0,a.eW)(" Holes: "),(0,a.bF)(h,{class:"full-width",spread:"",unelevated:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.filterForm.holes,((l,t)=>((0,a.uX)(),(0,a.Wv)(r,{key:t,color:e.form.holes===l?"primary":"white",label:l,"text-color":e.form.holes===l?"":"black",onClick:e=>o.handleFilterHole(l)},null,8,["color","label","text-color","onClick"])))),128))])),_:1})]),0===e.$store.state.settings.item.app_only_book_members?((0,a.uX)(),(0,a.CE)("div",Wl,[(0,a.eW)(" Spelers: "),(0,a.bF)(h,{class:"full-width",spread:"",unelevated:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.filterForm.players,((l,t)=>((0,a.uX)(),(0,a.Wv)(r,{key:t,color:e.form.fltSize===l?"primary":"white",label:l,"text-color":e.form.fltSize===l?"":"black",onClick:e=>o.handleFilterPlayers(l)},null,8,["color","label","text-color","onClick"])))),128))])),_:1})])):(0,a.Q3)("",!0)]),e.res&&e.res.dayNote?((0,a.uX)(),(0,a.CE)("div",Ml,[(0,a.Lk)("p",null,(0,s.v_)(e.res.dayNote.tdnContent),1)])):(0,a.Q3)("",!0),e.teetimes.length>0?((0,a.uX)(),(0,a.CE)("div",Xl,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.teetimes,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l,class:"q-mt-md col items-start"},[(0,a.Lk)("div",Tl,[(0,a.Lk)("div",Dl,(0,s.v_)(e.crlNameInternet),1)])])))),128))])):(0,a.Q3)("",!0),(0,a.bF)(f),(0,a.Lk)("div",Bl,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.teetimes,((l,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"col text-grey-8 text-bold"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.timeFilter(l.times),((t,i)=>((0,a.uX)(),(0,a.CE)("div",{key:i,class:(0,s.C4)([t.sttPlayerArray.length>0?"bg-blue-3":"bg-green-3","text-center q-mt-xs q-pa-sm"]),onClick:e=>o.handleOpenDialog(t,l)},[(0,a.Lk)("div",Vl,[(0,a.Lk)("div",Ol,[(0,a.eW)((0,s.v_)(e.$filters.minuteToTime(t.sttTimeFrom))+" ",1),(0,a.bo)((0,a.bF)(u,{class:"q-ml-sm q-mb-xs",name:"group",size:"18px"},null,512),[[T.aG,t.sttPlayers>0]]),(0,a.eW)(" "+(0,s.v_)(t.sttPlayers),1)])]),t.sttPlayerArray.length>0?((0,a.uX)(),(0,a.CE)("div",Gl,[(0,a.Lk)("div",Yl,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.sttPlayerArray,((e,l)=>((0,a.uX)(),(0,a.CE)("span",{key:l,class:"text-center"},(0,s.v_)(l>0?"/":"")+" "+(0,s.v_)(e.name),1)))),128))])])):(0,a.Q3)("",!0)],10,jl)))),128))])))),128))]),e.dialogVisible?((0,a.uX)(),(0,a.Wv)(k,{key:2,modelValue:e.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=l=>e.dialogVisible=l)},{default:(0,a.k6)((()=>[(0,a.bF)(m,{style:{"max-width":"320px",width:"95%"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"text-h6"},{default:(0,a.k6)((()=>[0===e.dialogErrors.length?((0,a.uX)(),(0,a.CE)("div",Ul,"Uw reservering")):(0,a.Q3)("",!0),e.dialogErrors.length>0?((0,a.uX)(),(0,a.CE)("div",zl,"Probleem gevonden!")):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(f,{inset:""}),0===e.dialogErrors.length?((0,a.uX)(),(0,a.Wv)(p,{key:0},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Kl,[Jl,(0,a.Lk)("div",Zl,(0,s.v_)(e.$dayjs(e.form.fltDate).format("dddd DD MMMM")),1)]),(0,a.Lk)("div",et,[lt,(0,a.Lk)("div",tt,(0,s.v_)(e.$filters.minuteToTime(e.selectedTimeItem.sttTimeFrom)),1)]),0===e.$store.state.settings.item.app_only_book_members?((0,a.uX)(),(0,a.CE)("div",at,[it,(0,a.Lk)("div",nt,(0,s.v_)(e.form.fltSize),1)])):((0,a.uX)(),(0,a.CE)("div",st,[ot,(0,a.Lk)("div",rt,(0,s.v_)(this.selectedTimeItem.sttPlayers),1)])),(0,a.Lk)("div",dt,[ct,(0,a.Lk)("div",ht,(0,s.v_)(e.selectedCourseItem.crlName),1)])])),_:1})):(0,a.Q3)("",!0),e.dialogErrors.length>0?((0,a.uX)(),(0,a.Wv)(p,{key:1},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.dialogErrors,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l,class:"row"},[(0,a.Lk)("div",ft,(0,s.v_)(e),1)])))),128))])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(f,{inset:""}),(0,a.bF)(g,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{color:"primary",flat:"",size:"mds",onClick:o.handleDialogClose},{default:(0,a.k6)((()=>[(0,a.eW)(" Annuleer ")])),_:1},8,["onClick"]),0===e.dialogErrors.length?((0,a.uX)(),(0,a.Wv)(r,{key:0,color:"primary",size:"md",onClick:o.handleReservation},{default:(0,a.k6)((()=>[(0,a.eW)(" Reserveer ")])),_:1},8,["onClick"])):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1})])),_:1})}const pt={mixins:[w.A],data:function(){return{loading:!1,flight:null,res:null,teetimes:[],dialogVisible:!1,dialogErrors:[],selectedTimeItem:null,filterForm:{holes:[9,18],players:[1,2,3,4]},form:{fltDate:this.$dayjs().format("YYYY-MM-DD"),fltTime:"",fltCrlNr1:"",fltCrlNr2:"",fltSize:0,players:[],holes:9,size:3},date:this.$dayjs().format("YYYY-MM-DD")}},created:function(){this.loadTeetimes()},mounted(){this.form.fltSize=this.settings.planner_default_reservation_count,1===this.$store.state.settings.item.app_only_book_members&&(this.form.fltSize=1),this.form.holes=this.settings.planner_default_holes},watch:{date:function(e,l){this.form.fltDate=e,this.loadTeetimes(),this.$refs.qDateTeeTime.hide()}},methods:{timeFilter:function(e){return e.filter((e=>e.sttPlayers>=this.form.fltSize&&(9===this.form.holes||e.sttAvailable18&&18===this.form.holes)&&(9===this.form.holes||e.sttCrlNrNext>0&&18===this.form.holes)))},optionsFn(e){return this.$dayjs(e)>=this.$dayjs().add(-1,"day")&&this.$dayjs(e)<=this.$dayjs().add(21,"day")},navDay:function(e){this.date=this.$dayjs(this.date).add(e,"day").format("YYYY-MM-DD")},async loadTeetimes(){this.loading=!0,await this.$http.get("golfer/teetimes",{params:{date:this.$dayjs(this.form.fltDate).format("YYYY-MM-DD")}}).then((e=>{this.res=e,this.teetimes=e.payload,this.loading=!1}))},handleOpenDialog:function(e,l){this.selectedTimeItem=e,this.selectedCourseItem=Object.assign({},l),delete this.selectedCourseItem.times,this.dialogVisible=!0},async handleReservation(){let e=[];for(let a=1;a<=this.form.fltSize;a++)e.push({flpNr:null,flpSide:a,flpRelNr:null,flpName:"",flpEmail:"",flpHandicap:"",flpCarNr:null});e[0].flpRelNr=this.currentUser.relNr,e[0].flpName=this.currentUser.full_name2;const l={fltNr:this.selectedTimeItem.sttRefNr,fltTime1:this.selectedTimeItem.sttTimeFrom,fltDate:this.$filters.dateToUnix(this.form.fltDate,"YYYY-MM-DD"),fltSize:this.form.fltSize,fltCrlNr1:this.selectedCourseItem.crlNr,fltCrlNr2:18===this.form.holes?this.selectedTimeItem.sttCrlNrNext:null,fltOrigin:2,flight_players:e};let t=await this.$http.post("golfer/booking",l);t.flight?(this.flight=t.flight,await this.$store.dispatch("settings/fetchSettings"),this.$emit("handleOpenFlight",this.flight)):(this.dialogVisible=!1,this.loadTeetimes())},handleDialogClose:function(){this.dialogErrors=[],this.dialogVisible=!1},handleFilterHole:function(e){this.form.holes=e},handleFilterPlayers:function(e){this.form.fltSize=e}}};var gt=t(54),mt=t(5194),kt=t(1132),bt=t(9204),yt=t(5895);const _t=(0,k.A)(pt,[["render",ut]]),vt=_t;N()(pt,"components",{QPage:Sl.A,QCard:y.A,QBtnGroup:gt.A,QBtn:v.A,QPopupProxy:mt.A,QDate:kt.A,QSeparator:C.A,QIcon:H.A,QDialog:b.A,QCardSection:_.A,QCardActions:bt.A}),N()(pt,"directives",{ClosePopup:yt.A});const Ct={class:"row q-mb-sm"},Ft={class:"col"},Nt={class:"row"},It={class:"col"},At=(0,a.Lk)("i",{class:"far fa-calendar-alt mr-2"},null,-1),wt=(0,a.Lk)("i",{class:"far fa-golf-club mr-2"},null,-1);function xt(e,l,t,i,n,o){const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-item-label"),c=(0,a.g2)("q-item-section"),h=(0,a.g2)("q-item"),f=(0,a.g2)("q-list"),u=(0,a.g2)("q-banner"),p=(0,a.g2)("q-page"),g=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.Wv)(p,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ct,[(0,a.Lk)("div",Ft,[(0,a.bF)(r,{class:"full-width",color:"primary",icon:"add",label:"Nieuwe reservering",onClick:o.handleOpenNew},null,8,["onClick"])])]),(0,a.Lk)("div",Nt,[(0,a.Lk)("div",It,[t.array.length>0?((0,a.uX)(),(0,a.Wv)(f,{key:0,separator:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.array,((l,t)=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{key:t,class:"full-width bg-white shadow-1 q-mb-sm",clickable:"",onClick:e=>o.handleOpenFlight(l)},{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"itg-text-overflow"},{default:(0,a.k6)((()=>[At,(0,a.eW)(" "+(0,s.v_)(e.$filters.unixToDate(l.fltDate,"dddd DD-MM"))+" "+(0,s.v_)()+" - "+(0,s.v_)(e.$filters.minuteToTime(l.fltTime1)),1)])),_:2},1024),(0,a.bF)(d,{caption:""},{default:(0,a.k6)((()=>[wt,(0,a.eW)(" "+(0,s.v_)(l.loop1.crlName),1)])),_:2},1024)])),_:2},1024),(0,a.bF)(c,{avatar:""},{default:(0,a.k6)((()=>[(0,a.eW)(" >")])),_:1})])),_:2},1032,["onClick"])),[[g]]))),128))])),_:1})):((0,a.uX)(),(0,a.Wv)(u,{key:1,class:"bg-orange-3 text-grey-8 text-bold text-center"},{default:(0,a.k6)((()=>[(0,a.eW)(" U heeft geen reserveringen openstaan ")])),_:1}))])])])),_:1})}const Lt={props:{array:Array},data(){return{loading:!1}},methods:{handleOpenFlight:function(e){this.$emit("handleOpenFlight",e)},handleOpenNew:function(){this.$emit("handleOpenBooking")}}},St=(0,k.A)(Lt,[["render",xt]]),qt=St;N()(Lt,"components",{QPage:Sl.A,QBtn:v.A,QList:W.A,QItem:q.A,QItemSection:P.A,QItemLabel:$.A,QBanner:Je.A}),N()(Lt,"directives",{Ripple:Qe.A});const Pt={components:{Reservation:Pl,Booking:vt,List:qt},data(){return{LIST:"list",RESERVATION:"reservation",BOOKING:"booking",array:[],page:null,loading:!1,back_icon:"fa-home",back_link:"/",title:"Reserveringen",callBack:void 0,flight:null}},created:function(){this.loadReservationList()},methods:{async loadReservationList(){this.loading=!0,await this.$http.get("golfer/bookings").then((e=>{if(this.loading=!1,this.array=e,this.$store.state.settings.fltNr>0){let e=this.array.find((e=>e.fltNr===this.$store.state.settings.fltNr));void 0!==e&&this.handleOpenFlight(e)}else this.page=this.LIST}))},handleOpenFlight:function(e){this.$store.commit("settings/CLEAR_FLIGHT"),this.back_icon="fa-arrow-left",this.back_link="/reservations",this.title="Reservering",this.callBack=function(){this.$emit("handleClose")},e.flight_players.forEach((function(e){e.flpType=null,e.flpRelNr?e.flpType=2:null!==e.flpName&&(e.flpType=1)})),this.flight=e,this.page=this.RESERVATION},handleOpenBooking:function(){this.back_icon="fa-arrow-left",this.back_link="/reservations",this.title="Boeking",this.callBack=function(){this.$emit("handleClose")},this.page=this.BOOKING},handleClose:function(){this.back_icon="fa-home",this.back_link="/",this.title="Reserveringen",this.callBack=void 0,this.flight=null,this.page=this.LIST,this.loadReservationList()}}};var $t=t(7984);const Ht=(0,k.A)(Pt,[["render",i]]),Qt=Ht;N()(Pt,"components",{QPageContainer:$t.A})}}]);