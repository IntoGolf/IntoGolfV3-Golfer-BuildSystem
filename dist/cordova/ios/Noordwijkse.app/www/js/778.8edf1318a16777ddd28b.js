"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[778],{1778:(e,s,o)=>{o.r(s),o.d(s,{default:()=>le});var l=o(3673),n=o(8880);const t={class:"text-center"},r=(0,l._)("h5",null,"Geen toekomstige lessen gevonden",-1),i=[r];function a(e,s,o,r,a,p){const d=(0,l.up)("q-btn"),c=(0,l.up)("q-separator"),u=(0,l.up)("comp-lesson"),h=(0,l.up)("comp-new"),m=(0,l.up)("q-page"),y=(0,l.up)("q-page-container");return(0,l.wg)(),(0,l.j4)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(d,{color:"primary",label:"Nieuwe les",size:"small",onClick:s[0]||(s[0]=s=>e.newLesson=!0)}),(0,l.Wm)(c,{class:"q-mt-md"}),(0,l.wy)((0,l._)("div",t,i,512),[[n.F8,0===e.clientLessonArray.length]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.clientLessonArray,((e,s)=>((0,l.wg)(),(0,l.j4)(u,{key:s,lesson:e,onHandleLoadClientLessons:p.handleLoadClientLessons},null,8,["lesson","onHandleLoadClientLessons"])))),128))],512),[[n.F8,!e.newLesson]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(h,{onHandleCloseNew:p.handleCloseNew},null,8,["onHandleCloseNew"])],512),[[n.F8,e.newLesson]])])),_:1})])),_:1})}var p=o(6490),d=o(2323);const c={class:"row full-width q-mt-md q-pa-sm",style:{border:"1px solid lightgrey","border-radius":"4px"}},u={class:"col-12"},h={class:"row"},m={class:"col-6"},y={class:"col-6 text-right"},w={class:"row"},g={class:"col-6"},f={class:"col-6 text-right"};function L(e,s,o,n,t,r){const i=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("div",u,[(0,l._)("div",h,[(0,l._)("div",m,[(0,l._)("b",null,(0,d.zw)(o.lesson.pro_lesson.pro_lesson_type.pltName),1)]),(0,l._)("div",y,[(0,l._)("b",null,(0,d.zw)(e.$filters.unixToDate(o.lesson.pro_lesson.lesDate,"ddd DD MMM")),1),(0,l.Uk)(" "+(0,d.zw)(e.$filters.minuteToTime(o.lesson.pro_lesson.lesTimeFrom)),1)])]),(0,l._)("div",w,[(0,l._)("div",g,[(0,l._)("i",null,"pro: "+(0,d.zw)(o.lesson.pro_lesson.relation.full_name2),1)]),(0,l._)("div",f,[(0,l.Wm)(i,{color:"primary",size:"xs",onClick:s[0]||(s[0]=e=>r.handleCancel(o.lesson.pro_lesson))},{default:(0,l.w5)((()=>[(0,l.Uk)("Annuleer ")])),_:1})])])])])}const _={props:{lesson:Object},data:function(){return{}},methods:{handleCancel:function(e){this.$q.dialog({title:"Annuleer les",message:"Deze les wordt geannuleerd, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{e.lesCarNr=1,this.$http.post("golfer/lesson",e).then((()=>{this.$q.notify({type:"positive",message:"uw les is geannuleerd"}),this.newLesson=!1,this.$emit("handleLoadClientLessons")}))}))}}};var v=o(4260),T=o(8240),N=o(7518),A=o.n(N);const b=(0,v.Z)(_,[["render",L]]),k=b;A()(_,"components",{QBtn:T.Z});const C={class:"row q-mt-md q-gutter-sm"},q={class:"col"},D={class:"col"},$={class:"row"},x={class:"col hide-scrollbar",style:{"overflow-x":"scroll"}},F={class:"row"},Z={class:"col q-pt-sm text-bold text-center"},B={class:"row hide-scrollbar"};function z(e,s,o,n,t,r){const i=(0,l.up)("q-input"),a=(0,l.up)("q-select"),p=(0,l.up)("q-separator"),c=(0,l.up)("comp-lesson");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",C,[(0,l._)("div",q,[(0,l.Wm)(i,{ref:"date",modelValue:e.date,"onUpdate:modelValue":s[0]||(s[0]=s=>e.date=s),dense:"",label:"Datum","lazy-rules":"",type:"date"},null,8,["modelValue"])]),(0,l._)("div",D,[(0,l.Wm)(a,{modelValue:e.pltNr,"onUpdate:modelValue":s[1]||(s[1]=s=>e.pltNr=s),options:r.lessonType1Array,behavior:"menu",dense:"","emit-value":"",label:"Soort les","map-options":"","option-label":"pltName","option-value":"pltNr"},null,8,["modelValue","options"])])]),(0,l.Wm)(p,{class:"q-mt-md"}),(0,l._)("div",$,[(0,l._)("div",x,[(0,l._)("div",{style:(0,d.j5)({width:r.colWidth}),class:"row q-gutter-sm"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.proArray,((s,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:"col q-mb-lg"},[(0,l._)("div",F,[(0,l._)("div",Z,[(0,l._)("b",null,(0,d.zw)(s.full_name2),1)])]),(0,l._)("div",B,[(0,l.Wm)(c,{lessons:e.lessonArray,pro:s,proLessonType:r.proLessonType,onHandleBook:r.handleBook},null,8,["lessons","pro","proLessonType","onHandleBook"])])])))),128))],4)])])])}o(4564);const W=["onClick"],Y={class:"row"},H={class:"col"},M={class:"row"},Q={class:"col"},j={class:"row"},U={class:"col"};function V(e,s,o,n,t,r){return(0,l.wg)(),(0,l.iD)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.lessonFilter,((s,n)=>((0,l.wg)(),(0,l.iD)("div",{key:n,align:"left",class:"full-width q-mt-md bg-orange q-pa-sm",onClick:o=>e.$emit("handleBook",s)},[(0,l._)("div",Y,[(0,l._)("div",H,[(0,l._)("div",M,[(0,l._)("div",Q,[(0,l._)("b",null,(0,d.zw)(e.$filters.minuteToTime(s.pagTimeFrom)),1)])]),(0,l._)("div",j,[(0,l._)("div",U,[(0,l._)("i",null,"max. "+(0,d.zw)(o.proLessonType.pltMaxPers)+" pers.",1)])])])])],8,W)))),128))])}const O={props:{pro:Object,lessons:Array,proLessonType:Object},computed:{lessonFilter:function(){return void 0===this.lessons?[]:this.lessons.filter((e=>e.pro.relNr===this.pro.relNr))}},methods:{}},P=(0,v.Z)(O,[["render",V]]),S=P,K={components:{compLesson:S},data:function(){return{date:null,relNr:null,pltNr:null,lessonArray:[],lessonTypeArray:[],clientLessonArray:[]}},watch:{date:function(){this.handleLoad()},pltNr:function(){this.handleLoad()}},mounted(){this.handleLoadLessonTypes()},computed:{lessonType1Array:function(){return this.lessonTypeArray.filter((e=>1==e.pltLtcNr))},pro:function(){return this.proArray.find((e=>e.relNr===this.relNr))},proLessonType:function(){return this.lessonTypeArray.find((e=>e.pltNr===this.pltNr))},proArray:function(){if(void 0===this.lessonArray)return[];let e=[];return this.lessonArray.reduce(((s,o)=>(e.includes(o.pro.relNr)||(e.push(o.pro.relNr),s.push(o.pro)),s)),[])},colWidth:function(){return 120*this.proArray.length+"px"}},methods:{handleLoad:function(){this.$http.get("golfer/lessons?date="+this.date+"&pltNr="+this.pltNr).then((e=>{this.lessonArray=e,this.proArray.length>0&&(this.relNr=this.proArray[0].relNr)}))},handleLoadLessonTypes:function(){this.$http.get("golfer/lessonTypes").then((e=>{this.lessonTypeArray=e,this.pltNr=this.lessonTypeArray[0].pltNr,this.date=this.$dayjs().format("YYYY-MM-DD")}))},handleBook:function(e){this.$q.dialog({title:"Boek een les",message:"Uw boekt nu een les, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let s={lesNr:null,lesRelNrPro:e.pro.relNr,lesPltNr:e.pro_lesson_type.pltNr,lesDate:this.$filters.dateToUnix(this.date,"YYYY-MM-DD"),lesTimeFrom:e.pagTimeFrom,lesTimeTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesBlockedFrom:e.pagTimeFrom,lesBlockedTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesCarNr:0};this.$http.post("golfer/lesson",s).then((()=>{this.$q.notify({type:"positive",message:"Uw les is geboekt"}),this.$emit("handleCloseNew")}))}))}}};var G=o(4842),I=o(3017),R=o(5869);const E=(0,v.Z)(K,[["render",z]]),J=E;A()(K,"components",{QInput:G.Z,QSelect:I.Z,QSeparator:R.Z});const X={mixins:[p.Z],components:{compLesson:k,compNew:J},data:function(){return{newLesson:!1,clientLessonArray:[]}},watch:{newLesson:function(e){e||this.handleLoadClientLessons()}},mounted(){this.handleLoadClientLessons()},methods:{handleLoadClientLessons:function(){this.$http.get("golfer/clientLessons").then((e=>{this.clientLessonArray=e}))},handleCloseNew:function(){this.handleLoadClientLessons(),this.newLesson=!1}}};var ee=o(2652),se=o(4379);const oe=(0,v.Z)(X,[["render",a]]),le=oe;A()(X,"components",{QPageContainer:ee.Z,QPage:se.Z,QBtn:T.Z,QSeparator:R.Z})}}]);