"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[849],{4849:(e,l,a)=>{a.r(l),a.d(l,{default:()=>I});var t=a(2852),s=a(3100),o=a(9006);const r={class:"ml-auto mr-auto text-center"},i={class:"row q-col-gutter-md"},n=(0,t.Lk)("br",null,null,-1),d=(0,t.Lk)("br",null,null,-1),m=(0,t.Lk)("br",null,null,-1),u={class:"q-mt-md"},b={class:"text-center q-mt-md q-pb-md"},p={class:"text-center q-mt-md q-pb-md"};function c(e,l,a,c,h,g){const f=(0,t.g2)("q-img"),w=(0,t.g2)("q-tab"),V=(0,t.g2)("q-tabs"),y=(0,t.g2)("q-input"),C=(0,t.g2)("q-tab-panel"),v=(0,t.g2)("q-select"),F=(0,t.g2)("q-toggle"),k=(0,t.g2)("password-meter"),P=(0,t.g2)("q-btn"),N=(0,t.g2)("q-tab-panels"),U=(0,t.g2)("q-form"),$=(0,t.g2)("q-page"),_=(0,t.g2)("q-page-container");return(0,t.uX)(),(0,t.Wv)(_,null,{default:(0,t.k6)((()=>[(0,t.bF)($,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(U,{onSubmit:g.saveProfile},{default:(0,t.k6)((()=>[(0,t.Lk)("div",r,[(0,t.bF)(f,{src:e.blobUrl,style:{"max-width":"240px","max-height":"240px"},onClick:g.triggerUpload},null,8,["src","onClick"]),(0,t.Lk)("input",{ref:"fileInput",accept:"image/*",hidden:"",type:"file",onChange:l[0]||(l[0]=(...e)=>g.onFileChange&&g.onFileChange(...e))},null,544)]),(0,t.bF)(V,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=l=>e.tab=l),class:"text-teal",dense:"","mobile-arrows":"","outside-arrows":""},{default:(0,t.k6)((()=>[(0,t.bF)(w,{class:"pl-0",label:"Naam",name:"adres"}),(0,t.bF)(w,{class:"pl-0",label:"Contact",name:"contact"}),(0,t.bF)(w,{class:"pl-0",label:"Golf",name:"golf"}),(0,t.bF)(w,{class:"pl-0",label:"Voorkeuren",name:"preference"}),(0,t.bF)(w,{class:"pl-0",label:"Wachtwoord",name:"password"})])),_:1},8,["modelValue"]),(0,t.bF)(N,{modelValue:e.tab,"onUpdate:modelValue":l[22]||(l[22]=l=>e.tab=l)},{default:(0,t.k6)((()=>[(0,t.bF)(C,{class:"q-pa-none",name:"adres"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:e.form.relFirstName,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.relFirstName=l),disable:!g.canChange,label:e.$t("Initialen"),"lazy-rules":""},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relCallName,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.relCallName=l),disable:!g.canChange,label:e.$t("Voornaam"),"lazy-rules":""},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relPrefix,"onUpdate:modelValue":l[4]||(l[4]=l=>e.form.relPrefix=l),disable:!g.canChange,label:e.$t("Tussenvoegsel"),"lazy-rules":""},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relName,"onUpdate:modelValue":l[5]||(l[5]=l=>e.form.relName=l),disable:!g.canChange,label:e.$t("Achternaam"),"lazy-rules":""},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relAddress1,"onUpdate:modelValue":l[6]||(l[6]=l=>e.form.relAddress1=l),disable:!g.canChange,label:e.$t("Straat"),"lazy-rules":""},null,8,["modelValue","disable","label"]),(0,t.Lk)("div",i,[(0,t.bF)(y,{modelValue:e.form.relAddressStreetNumber,"onUpdate:modelValue":l[7]||(l[7]=l=>e.form.relAddressStreetNumber=l),disable:!g.canChange,label:e.$t("Huisnummer"),"lazy-rules":""},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relAddressStreetAddition,"onUpdate:modelValue":l[8]||(l[8]=l=>e.form.relAddressStreetAddition=l),disable:!g.canChange,label:e.$t("Toevoeging"),"lazy-rules":""},null,8,["modelValue","disable","label"])]),(0,t.bF)(y,{modelValue:e.form.relPostalCode,"onUpdate:modelValue":l[9]||(l[9]=l=>e.form.relPostalCode=l),disable:!g.canChange,label:e.$t("Postcode"),"lazy-rules":""},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relCity,"onUpdate:modelValue":l[10]||(l[10]=l=>e.form.relCity=l),disable:!g.canChange,label:e.$t("Woonplaats"),"lazy-rules":""},null,8,["modelValue","disable","label"])])),_:1}),(0,t.bF)(C,{class:"q-pa-none",name:"contact"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:e.form.relPhone,"onUpdate:modelValue":l[11]||(l[11]=l=>e.form.relPhone=l),disable:!g.canChange,label:e.$t("Phone number"),"lazy-rules":"",mask:"###############",maxlength:"15"},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relPhoneMobile,"onUpdate:modelValue":l[12]||(l[12]=l=>e.form.relPhoneMobile=l),disable:!g.canChange,label:e.$t("Mobiel telefoonnummer"),"lazy-rules":"",mask:"###############",maxlength:"15"},null,8,["modelValue","disable","label"]),(0,t.bF)(y,{modelValue:e.form.relEmail,"onUpdate:modelValue":l[13]||(l[13]=l=>e.form.relEmail=l),disable:!g.canChange,label:e.$t("Emailadres"),"lazy-rules":""},null,8,["modelValue","disable","label"])])),_:1}),(0,t.bF)(C,{class:"q-pa-none",name:"golf"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:e.form.relGsn,"onUpdate:modelValue":l[14]||(l[14]=l=>e.form.relGsn=l),label:e.$t("Golfservicenummer"),"lazy-rules":"",readonly:""},null,8,["modelValue","label"]),(0,t.bF)(y,{modelValue:e.form.relHandicap,"onUpdate:modelValue":l[15]||(l[15]=l=>e.form.relHandicap=l),label:e.$t("Speelsterkte"),"lazy-rules":"",readonly:""},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(C,{class:"q-pa-none",name:"preference"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{modelValue:g.relVisibilityLevel,"onUpdate:modelValue":l[16]||(l[16]=e=>g.relVisibilityLevel=e),options:e.visibilityArray,behavior:"menu","emit-value":"",label:"Zichtbaarheid in ledenboekje","map-options":""},null,8,["modelValue","options"]),n,(0,t.bF)(F,{modelValue:g.relMagazineGolfNL,"onUpdate:modelValue":l[17]||(l[17]=e=>g.relMagazineGolfNL=e),disable:!g.canChange,label:"Golfers magazine ontvangen"},null,8,["modelValue","disable"]),d,(0,t.bF)(F,{modelValue:g.relEmailnewsletterNGF,"onUpdate:modelValue":l[18]||(l[18]=e=>g.relEmailnewsletterNGF=e),disable:!g.canChange,label:"E-mail nieuwsbrief ontvangen"},null,8,["modelValue","disable"]),m,(0,t.bF)(F,{modelValue:g.relInvoiceByEmail,"onUpdate:modelValue":l[19]||(l[19]=e=>g.relInvoiceByEmail=e),disable:!g.canChangeInvoiceByEmail,label:"Factuur per e-mail ontvangen"},null,8,["modelValue","disable"])])),_:1}),(0,t.bF)(C,{class:"q-pa-none",name:"password"},{default:(0,t.k6)((()=>[(0,t.Lk)("p",u,(0,s.v_)(g.passwordComplexityTest),1),(0,t.bF)(y,{ref:"passwordInput",modelValue:e.password,"onUpdate:modelValue":l[20]||(l[20]=l=>e.password=l),autocomplete:!1,label:e.$t("Password"),rules:[g.validatePasswordRule],type:"password"},null,8,["modelValue","label","rules"]),(0,t.bF)(k,{password:e.password},null,8,["password"]),(0,t.bF)(y,{modelValue:e.passwordCheck,"onUpdate:modelValue":l[21]||(l[21]=l=>e.passwordCheck=l),autocomplete:!1,label:e.$t("PasswordCheck"),rules:[g.checkPassword],type:"password"},null,8,["modelValue","label","rules"]),(0,t.Lk)("div",b,[(0,t.bF)(P,{disable:g.disablePassword,color:"primary",label:"Wachtwoord opslaan",onClick:g.savePassword},null,8,["disable","onClick"])])])),_:1})])),_:1},8,["modelValue"]),(0,t.bo)((0,t.Lk)("div",p,[(0,t.bF)(P,{color:"primary",label:"Opslaan",type:"submit"}),(0,t.bF)(P,{class:"q-ml-md",color:"primary",label:"Uitloggen",outline:"",onClick:g.logout},null,8,["onClick"])],512),[[o.aG,"password"!==e.tab]])])),_:1},8,["onSubmit"])])),_:1})])),_:1})}a(6809),a(8250),a(5993),a(8988);var h=a(3842),g=a(3141),f=a.n(g);const w={components:{PasswordMeter:f()},mixins:[h.A],data:function(){return{back_icon:"fa-home",back_link:"/",title:"Profiel",callBack:void 0,flagList:[{img:"../assets/images/nl.png",name:"Netherlands (+31)",value:"NL(+31)"},{img:"../assets/images/gb.png",name:"Great Brittain (+44)",value:"EN(+44)"}],tab:"adres",uploading:"",form:{relFirstName:"",relCallName:"",relPrefix:"",relName:"",relAddress1:"",relPostalCode:"",relCity:"",relCouNr:"",relPhone:"",mobile_relCouNr:"",relPhoneMobile:"",relEmail:"",relHandicap:"",relNr:"",relImage:"",relMagazineGolfNL:!1,relInvoiceByEmail:!1,relEmailnewsletterNGF:!1,relVisibilityLevel:0},password:"",passwordCheck:"",visibilityArray:[{value:0,label:"Niet zichtbaar"},{value:1,label:"Naam en speelsterkte"},{value:2,label:"Naam, speelsterkte en e-mailadres"},{value:3,label:"Naam, speelsterkte, e-mailadres en telefoonnummer"},{value:4,label:"Naam, speelsterkte, e-mailadres, telefoonnummer, adres"}],blobUrl:"",uploadUrl:"/api/golfer/relation/avatar-upload"}},computed:{canChange(){return 1===parseInt(this.settings.app_allow_member_change_contact)},canChangeInvoiceByEmail(){return 1===this.settings.app_allow_member_set_invoice_email},disablePassword(){return this.password!==this.passwordCheck||!this.validatePassword},passwordComplexity(){return parseInt(this.$store.state.settings.item.app_password_complexity)},passwordComplexityTest(){return 1===this.passwordComplexity?this.$t("PasswordComplexityText1"):2===this.passwordComplexity?this.$t("PasswordComplexityText2"):this.$t("PasswordComplexityText0")},validatePassword(){const e=2===this.passwordComplexity?8:6,l=this.password.length>=e,a=/[A-Z]/.test(this.password),t=/[a-z]/.test(this.password),s=/[0-9]/.test(this.password),o=/[!@#$%^&*(),.?":{}|<>]/.test(this.password);return 1===this.passwordComplexity?l&&a&&t&&s:2!==this.passwordComplexity||l&&a&&t&&s&&o},relMagazineGolfNL:{get:function(){return null!==this.form.relMagazineGolfNL&&this.form.relMagazineGolfNL>0},set:function(e){this.form.relMagazineGolfNL=e?1:0}},relInvoiceByEmail:{get:function(){return null!==this.form.relInvoiceByEmail&&this.form.relInvoiceByEmail>0},set:function(e){this.form.relInvoiceByEmail=e?1:0}},relEmailnewsletterNGF:{get:function(){return null!==this.form.relEmailnewsletterNGF&&this.form.relEmailnewsletterNGF>0},set:function(e){this.form.relEmailnewsletterNGF=e?1:0}},relVisibilityLevel:{get:function(){return null!==this.form.relVisibilityLevel&&this.form.relVisibilityLevel>0?this.form.relVisibilityLevel:0},set:function(e){this.form.relVisibilityLevel=e}}},mounted(){this.loadImage()},methods:{async update(){await this.$store.dispatch("currentUser/fetch"),this.form=this.$store.getters["currentUser/item"]},loadImage:function(){let e=this;this.$http.get("golfer/image").then((l=>{e.blobUrl="data:image/png;base64,"+l}))},async saveProfile(){await this.$http.post("golfer/user",this.form),await this.update()},async savePassword(){this.form.password=this.password,this.form.passwordCheck=this.passwordCheck;let e=await this.$http.post("golfer/user",this.form);"success"===e.message&&this.$q.notify({type:"positive",message:"Je wachtwoord js aangepast"}),await this.update()},logout(){this.$http.post("golfer/logout").then((()=>{this.$store.dispatch("clearState"),this.$router.push("/login")}))},triggerUpload(){this.$store.state.settings.item.app_allow_member_upload_photo&&this.$refs.fileInput.click()},onFileChange(e){const l=e.target.files;if(l&&l[0]){const e=l[0];this.imageUrl=URL.createObjectURL(e),this.uploadAvatar(e)}},async uploadAvatar(e){let l=new FormData;l.append("avatar",e);const a=await this.$http.post("golfer/image",l,{headers:{"Content-Type":"multipart/form-data"}});this.currentUser.relImage=a.filename,this.loadImage(),this.$refs.fileInput.value=null},async checkPassword(e){return e===this.password||"Wachtwoorden zijn niet gelijk"},async validatePasswordRule(){return 0===this.passwordComplexity||(!!this.validatePassword||"Wachtwoord voldoet nog niet aan eisen")}},created(){document.body.classList.add("page-profile"),this.update()}};var V=a(6317),y=a(7984),C=a(2507),v=a(8767),F=a(24),k=a(2979),P=a(5415),N=a(3472),U=a(6565),$=a(7316),_=a(2013),x=a(3059),A=a(3178),L=a(1082),q=a.n(L);const z=(0,V.A)(w,[["render",c]]),I=z;q()(w,"components",{QPageContainer:y.A,QPage:C.A,QForm:v.A,QImg:F.A,QTabs:k.A,QTab:P.A,QTabPanels:N.A,QTabPanel:U.A,QInput:$.A,QSelect:_.A,QToggle:x.A,QBtn:A.A})}}]);