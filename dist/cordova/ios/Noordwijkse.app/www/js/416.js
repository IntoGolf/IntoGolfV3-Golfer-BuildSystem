"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[416],{6416:(l,e,t)=>{t.r(e),t.d(e,{default:()=>qe});var a=t(3673);function i(l,e,t,i,n,o){const s=(0,a.up)("List"),r=(0,a.up)("Reservation"),c=(0,a.up)("Booking"),d=(0,a.up)("q-page-container");return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[n.page==n.LIST?((0,a.wg)(),(0,a.j4)(s,{key:0,onHandleClose:o.handleClose,onHandleOpenFlight:o.handleOpenFlight,onHandleOpenBooking:o.handleOpenBooking},null,8,["onHandleClose","onHandleOpenFlight","onHandleOpenBooking"])):(0,a.kq)("",!0),n.page==n.RESERVATION?((0,a.wg)(),(0,a.j4)(r,{key:1,flight:n.flight,onHandleClose:o.handleClose},null,8,["flight","onHandleClose"])):(0,a.kq)("",!0),n.page==n.BOOKING?((0,a.wg)(),(0,a.j4)(c,{key:2,onHandleClose:o.handleClose,onHandleOpenFlight:o.handleOpenFlight},null,8,["onHandleClose","onHandleOpenFlight"])):(0,a.kq)("",!0)])),_:1})}var n=t(8880);function o(l,e,t,i,o,s){const r=(0,a.up)("comp-details"),c=(0,a.up)("comp-player"),d=(0,a.up)("comp-edit-player"),h=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(h,{class:"q-page q-pa-md"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flight:t.flight,onHandleSave:s.handleSave,onHandleClose:s.handleClose},null,8,["flight","onHandleSave","onHandleClose"]),[[n.F8,null==l.editPlayer]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.playerArray,((e,i)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{key:i,flight:t.flight,player:e,class:"q-mb-md",onHandleEditPlayer:s.handleEditPlayer,onHandleSave:s.handleSave},null,8,["flight","player","onHandleEditPlayer","onHandleSave"])),[[n.F8,null==l.editPlayer]]))),128)),l.editPlayer?((0,a.wg)(),(0,a.j4)(d,{key:0,flight:t.flight,player:l.editPlayer,onHandleSave:s.handleSave,onHandleCloseEditPlayer:s.handleCloseEditPlayer},null,8,["flight","player","onHandleSave","onHandleCloseEditPlayer"])):(0,a.kq)("",!0)])),_:1})}var s=t(2323);const r=(0,a.Uk)(" Uw starttijd "),c={class:"row"},d=(0,a._)("div",{class:"col text-bold"},"Slot",-1),h={class:"col-8 text-right"},f={class:"row"},p=(0,a._)("div",{class:"col text-bold"},"Lus uit",-1),m={class:"col-8 text-right"},u={key:0,class:"row"},g=(0,a._)("div",{class:"col text-bold"},"Lus in",-1),y={class:"col-8 text-right"},w={class:"row"},_=(0,a._)("div",{class:"col text-bold"},"Boeker",-1),k={class:"col-8 text-right"},v={class:"row"},b=(0,a._)("div",{class:"col text-bold"},"Spelers",-1),C={class:"col-8 text-right"},q={key:0,class:"row q-gutter-md"},D={key:0,class:"col"};function N(l,e,t,i,o,N){const x=(0,a.up)("q-btn"),S=(0,a.up)("q-card-section"),T=(0,a.up)("q-separator"),H=(0,a.up)("comp-dialog18-holes"),W=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(W,{class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"text-h6"},{default:(0,a.w5)((()=>[r,(0,a.wy)((0,a.Wm)(x,{onClick:N.handleCancel,color:"accent",class:"float-right",label:"Annuleer"},null,8,["onClick"]),[[n.F8,N.canCancel]])])),_:1}),(0,a.Wm)(T),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a._)("div",c,[d,(0,a._)("div",h,(0,s.zw)(N.slot),1)]),(0,a._)("div",f,[p,(0,a._)("div",m,(0,s.zw)(l.local_flight.loop1.crlName),1)]),l.local_flight.fltCrlNr2>0?((0,a.wg)(),(0,a.iD)("div",u,[g,(0,a._)("div",y,(0,s.zw)(N.courseLoop),1)])):(0,a.kq)("",!0),(0,a._)("div",w,[_,(0,a._)("div",k,(0,s.zw)(N.bookerName),1)]),(0,a._)("div",v,[b,(0,a._)("div",C,(0,s.zw)(t.flight.fltSize),1)])])),_:1}),l.myBooking?((0,a.wg)(),(0,a.j4)(T,{key:0})):(0,a.kq)("",!0),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[l.myBooking?((0,a.wg)(),(0,a.iD)("div",q,[N.canCancel?((0,a.wg)(),(0,a.iD)("div",D,[(0,a.Wm)(x,{onClick:e[0]||(e[0]=e=>l.$emit("handleClose")),class:"q-mr-md",color:"primary",label:"sluiten"}),(0,a.Wm)(x,{onClick:N.handleBook18,color:"primary",label:"Wijzig 18"},null,8,["onClick"])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(H,{flight:t.flight},null,8,["flight"])])),_:1})}const x=(0,a.Uk)(" Uw tweede 9 "),S=["onClick"];function T(l,e,t,i,n,o){const r=(0,a.up)("q-btn"),c=(0,a.up)("q-card-section"),d=(0,a.up)("q-separator"),h=(0,a.up)("q-card"),f=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"max-width":"320px",width:"95%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"text-h6"},{default:(0,a.w5)((()=>[x,(0,a.Wm)(r,{class:"float-right",flat:"",onClick:e[0]||(e[0]=e=>l.$emit("handleClose")),label:"Sluiten"})])),_:1}),(0,a.Wm)(d),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filteredArray,((l,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"q-ma-xs button-second-nine",key:e,onClick:e=>o.handleSave(l)},(0,s.zw)(l.crlName+" "+l.sttTimeFromText),9,S)))),128))])),_:1})])),_:1})])),_:1})}t(71);const H={props:{flight:Object},data:function(){return{teetimes:[],local_flight:{...this.flight}}},computed:{timesFor18:function(){return this.teetimes.forEach((function(l,e){let t=[];Object.entries(l.times).forEach((function(l){l[1].sttTimeFrom>that.flight.fltTime1+130&&t.push(l[1])})),this.teetimes[e].times=t})),this.teetimes},filteredArray:function(){let l=[];return this.teetimes.entries(loop.times).forEach((function(e){e[1].sttTimeFrom>that.flight.fltTime1+130&&l.push(e[1])})),l}},created(){this.handleLoadTeetimes()},methods:{handleLoadTeetimes:function(){let l=this.$filters.unixToDate(this.flight.fltDate,"YYYY-MM-DD");this.$http.get("golfer/teetimes?date="+l).then((l=>{this.teetimes=l.payload}))},handleSave:function(){this.local_flight.fltCrlNr2=object.crlNr,this.local_flight.fltTime2=object.sttTimeFrom}}};var W=t(4260),j=t(4390),$=t(151),Z=t(5589),z=t(8240),E=t(5869),O=t(7518),Y=t.n(O);const Q=(0,W.Z)(H,[["render",T]]),F=Q;Y()(H,"components",{QDialog:j.Z,QCard:$.Z,QCardSection:Z.Z,QBtn:z.Z,QSeparator:E.Z});const P={components:{compDialog18Holes:F},props:{flight:Object},data:function(){return{local_flight:this.flight}},computed:{canCancel:function(){return!0},slot:function(){return this.$dayjs(this.$filters.unixToDate(this.flight.fltDate)+" "+this.$filters.minuteToTime(this.flight.fltTime1),"DD-MM-YYYY H:mm").format("dddd D MMM HH:mm")},courseLoop:function(){return this.$filters.minuteToTime(this.flight.fltTime2)+" - "+this.flight.loop2.crlName},bookerName:function(){return this.flight.flight_players[0].flpName}},methods:{handleCancel:function(){this.local_flight.fltCarNr=1,this.$emit("handleSave",this.local_flight)},handleBook18:function(){let l=this.$ls.getItem("currentUser").value;console.log(this.flight.fltDate);let e=this;this.$http.get("golfer/teetimes",{params:{date:this.$filters.unixToDate(this.flight.fltDate,"YYYY-MM-DD"),relNr:l.relNr}}).then((l=>{l.payload.forEach((function(t,a){let i=[];Object.entries(t.times).forEach((function(l){l[1].sttTimeFrom>e.flight.fltTime1+130&&i.push(l[1])})),l.payload[a].times=i})),this.teetimes=l.payload,this.loading=!1,this.dialogVisible=!0}))}}},U=(0,W.Z)(P,[["render",N]]),M=U;Y()(P,"components",{QCard:$.Z,QCardSection:Z.Z,QBtn:z.Z,QSeparator:E.Z});const B={class:"row q-mb-sm"},I=(0,a._)("div",{class:"col text-bold"},"E-mail",-1),R={class:"col-8 text-right"},V={class:"row q-mb-sm"},G=(0,a._)("div",{class:"col text-bold"},"Telefoon",-1),L={class:"col-8 text-right"},A={class:"row q-mb-sm"},K=(0,a._)("div",{class:"col text-bold"},"Handicap",-1),J={class:"col-8 text-right"},X={class:"row"},ll=(0,a._)("div",{class:"col text-bold"},"Gsn",-1),el={class:"col-8 text-right"};function tl(l,e,t,i,n,o){const r=(0,a.up)("q-card-section"),c=(0,a.up)("q-separator"),d=(0,a.up)("q-btn"),h=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(null==t.player.flpName?"gast":t.player.flpName),1)])),_:1}),(0,a.Wm)(c),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",B,[I,(0,a._)("div",R,(0,s.zw)(null==t.player.flpEmail?"-":t.player.flpEmail),1)]),(0,a._)("div",V,[G,(0,a._)("div",L,(0,s.zw)(null==t.player.flpPhone?"-":t.player.flpPhone),1)]),(0,a._)("div",A,[K,(0,a._)("div",J,(0,s.zw)(null==t.player.flpHandicap?"-":t.player.flpHandicap),1)]),(0,a._)("div",X,[ll,(0,a._)("div",el,(0,s.zw)(null==t.player.flpGsn?"-":t.player.flpGsn),1)])])),_:1}),(0,a.Wm)(c),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{onClick:e[0]||(e[0]=e=>l.$emit("handleEditPlayer",t.player)),class:"q-mr-md",color:"primary",label:"Wijzigen"})])),_:1})])),_:1})}const al={props:{flight:Object,player:Object},data:function(){return{local_flight:this.flight,local_player:this.player}},computed:{canCancel:function(){return!0},isMyBooking:function(){return this.flight.flight_players[0].flpRelNr==this.currentUser.relNr}},methods:{handleCancel:function(){this.$q.dialog({title:"Speler annuleren",message:"U annuleert de deelname van deze speler, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let l=this.local_flight.flight_players.find((l=>l.flpNr=this.player.flpNr));l.flpCarNr=1;let e={flpNr:null,flpSide:l.flpSide,flpRelNr:null,flpName:null,flpEmail:"",flpHandicap:"",flpCarNr:null};this.local_flight.flight_players.splice(l.flpSide-1,0,e),this.$emit("handleSave",this.local_flight)}))}}},il=(0,W.Z)(al,[["render",tl]]),nl=il;function ol(l,e,t,i,o,r){const c=(0,a.up)("q-btn"),d=(0,a.up)("q-card-section"),h=(0,a.up)("q-separator"),f=(0,a.up)("q-input"),p=(0,a.up)("qrcode-stream"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Speler "+(0,s.zw)(t.player.flpSide)+" ",1),r.canCancel?((0,a.wg)(),(0,a.j4)(c,{key:0,onClick:r.handleCancel,color:"accent",size:"md",class:"float-right",label:"Annuleer speler"},null,8,["onClick"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(h),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(f,{class:"q-mb-sm",readonly:t.player.flpRelNr>0,label:"Naam speler",outlined:"",counter:"",maxlength:"40",clearable:"",modelValue:l.flpName,"onUpdate:modelValue":e[0]||(e[0]=e=>l.flpName=e)},null,8,["readonly","modelValue"]),[[n.F8,!l.scan]]),(0,a.wy)((0,a.Wm)(f,{class:"q-mb-sm",readonly:t.player.flpRelNr>0,label:"Handicap",outlined:"",counter:"",maxlength:"4",clearable:"",modelValue:l.flpHandicap,"onUpdate:modelValue":e[1]||(e[1]=e=>l.flpHandicap=e)},null,8,["readonly","modelValue"]),[[n.F8,!l.scan]]),(0,a.wy)((0,a.Wm)(f,{class:"q-mb-sm",readonly:t.player.flpRelNr>0,label:"E-mailadres",outlined:"",counter:"",maxlength:"40",clearable:"",modelValue:l.flpEmail,"onUpdate:modelValue":e[2]||(e[2]=e=>l.flpEmail=e)},null,8,["readonly","modelValue"]),[[n.F8,!l.scan]]),(0,a.wy)((0,a.Wm)(f,{class:"q-mb-sm",readonly:t.player.flpRelNr>0,label:"Telefoonnummer",outlined:"",counter:"",maxlength:"15",clearable:"",modelValue:l.flpPhone,"onUpdate:modelValue":e[3]||(e[3]=e=>l.flpPhone=e)},null,8,["readonly","modelValue"]),[[n.F8,!l.scan]]),(0,a.wy)((0,a.Wm)(f,{class:"q-mb-sm",readonly:t.player.flpRelNr>0,label:"Golfservicenummer",outlined:"",counter:"",maxlength:"10",clearable:"",modelValue:l.flpGsn,"onUpdate:modelValue":e[4]||(e[4]=e=>l.flpGsn=e)},null,8,["readonly","modelValue"]),[[n.F8,!l.scan]]),l.scan?((0,a.wg)(),(0,a.j4)(p,{key:0,onDecode:r.onDecode,onInit:r.onInit},null,8,["onDecode","onInit"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(h),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{onClick:r.handleSave,class:"q-mr-sm",color:"primary",label:"Opslaan"},null,8,["onClick"]),(0,a.Wm)(c,{onClick:e[5]||(e[5]=e=>l.$emit("handleCloseEditPlayer",t.player)),class:"q-mr-sm",color:"primary",label:"Sluiten"}),(0,a.Wm)(c,{onClick:e[6]||(e[6]=e=>l.scan=!0),class:"q-mr-sm",color:"primary",label:"Scan"})])),_:1})])),_:1})}Y()(al,"components",{QCard:$.Z,QCardSection:Z.Z,QSeparator:E.Z,QBtn:z.Z});t(5363);var sl=t(4626);const rl={components:{QrcodeStream:sl.QrcodeStream},props:{flight:Object,player:Object},data:function(){return{local_flight:this.flight,local_player:this.player,flpName:this.player.flpName,flpHandicap:this.player.flpHandicap,flpEmail:this.player.flpEmail,flpPhone:this.player.flpPhone,flpGsn:this.player.flpGsn,scan:!1}},computed:{canCancel:function(){return!0}},watch:{flpHandicap:function(l){this.flpHandicap=l.replace(",",".")}},methods:{handleCancel:function(){this.$q.dialog({title:"Speler annuleren",message:"U annuleert de deelname van deze speler, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let l=this.local_flight.flight_players.find((l=>l.flpNr=this.player.flpNr));l.flpCarNr=1;let e={flpNr:null,flpSide:l.flpSide,flpRelNr:null,flpName:null,flpEmail:"",flpHandicap:"",flpCarNr:null};this.local_flight.flight_players.splice(l.flpSide-1,0,e),this.$emit("handleSave",this.local_flight)}))},handleSave:function(){this.local_player.flpName=this.flpName,this.local_player.flpHandicap=this.flpHandicap,this.local_player.flpEmail=this.flpEmail,this.local_player.flpPhone=this.flpPhone,this.local_player.flpGsn=this.flpGsn,this.$emit("handleSave",this.local_flight)},onDecode:function(l){this.flpName=l.substring(11,59).trim(),this.flpHandicap=l.substring(77,82).trim(),this.flpGsn=l.substring(83,95).trim(),this.flpGender=l.substring(82,83).trim(),console.log(l),this.scan=!1},onInit(l){l.then(console.log).catch(console.error)}}};var cl=t(4842);const dl=(0,W.Z)(rl,[["render",ol]]),hl=dl;Y()(rl,"components",{QCard:$.Z,QCardSection:Z.Z,QBtn:z.Z,QSeparator:E.Z,QInput:cl.Z});const fl={components:{compPlayer:nl,compDetails:M,compEditPlayer:hl},props:{flight:Object},data:function(){return{loading:!1,currentUser:this.$ls.getItem("currentUser").value,dialogVisible:!1,editPlayer:null}},computed:{playerArray:function(){return this.flight.flight_players.filter((l=>1!=l.flpSide&&null==l.flpCarNr&&(this.isMyBooking||null!=l.flpName)))},isMyBooking:function(){return this.flight.flight_players[0].flpRelNr==this.currentUser.relNr}},methods:{handleSave:function(l){let e=this;this.loading=!1,this.$http.post("golfer/booking",l).then((l=>{l.errors.length>0?e.$q.dialog({title:"Probleem gevonden!",message:l.data.errors[0],cancel:!1,persistent:!0}).onOk((()=>{})):e.$q.dialog({title:"Bevestiging",message:"Uw wijzigingen zijn opgeslagen, wilt u de flight sluiten?",cancel:!0,persistent:!0}).onOk((()=>{this.$emit("handleClose")}))}))},handleClose:function(){this.$emit("handleClose")},handleEditPlayer:function(l){this.editPlayer=l},handleCloseEditPlayer:function(l){this.editPlayer=null}}};var pl=t(4379);const ml=(0,W.Z)(fl,[["render",o]]),ul=ml;Y()(fl,"components",{QPage:pl.Z});const gl={class:"row"},yl={class:"col"},wl=(0,a.Uk)(" Datum: "),_l={class:"row items-center justify-end",flat:""},kl={class:"row q-mt-md"},vl={class:"col-5 q-pr-sm"},bl=(0,a.Uk)(" Holes: "),Cl={class:"col-7"},ql=(0,a.Uk)(" Spelers: "),Dl={key:0,class:"row"},Nl={class:"row text-center text-white bg-secondary",style:{height:"40px","border-bottom":"black"}},xl={style:{"font-size":"18px","margin-top":"5px","font-weight":"bold","border-bottom":"black"},class:"col"},Sl={class:"row q-gutter-xs",style:{"max-height":"600px",overflow:"scroll"}},Tl=["onClick"],Hl=(0,a._)("br",null,null,-1),Wl={key:0},jl={key:1},$l={class:"row"},Zl=(0,a._)("div",{class:"col text-left text-bold"},"Datum",-1),zl={class:"col text-right"},El={class:"row q-mt-xs"},Ol=(0,a._)("div",{class:"col text-left text-bold"},"Tijd",-1),Yl={class:"col text-right"},Ql={class:"row q-mt-xs"},Fl=(0,a._)("div",{class:"col text-left text-bold"},"Spelers",-1),Pl={class:"col text-right"},Ul={class:"row q-mt-xs"},Ml=(0,a._)("div",{class:"col text-left text-bold"},"Baan",-1),Bl={class:"col text-right"},Il={class:"col text-left"},Rl=(0,a.Uk)(" Annuleer "),Vl=(0,a.Uk)(" Reserveer ");function Gl(l,e,t,i,o,r){const c=(0,a.up)("q-btn"),d=(0,a.up)("q-date"),h=(0,a.up)("q-popup-proxy"),f=(0,a.up)("q-btn-group"),p=(0,a.up)("q-separator"),m=(0,a.up)("q-card-section"),u=(0,a.up)("q-card-actions"),g=(0,a.up)("q-card"),y=(0,a.up)("q-dialog"),w=(0,a.up)("q-page"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(w,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("div",gl,[(0,a._)("div",yl,[wl,(0,a.Wm)(f,{unelevated:"",class:"full-width"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"secondary",icon:"chevron_left",style:{width:"50px"},onClick:e[0]||(e[0]=l=>r.navDay(-1))}),(0,a.Wm)(c,{color:"secondary",class:"full-width",style:{width:"calc(100% - 100px)"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(l.$dayjs(l.form.fltDate).format("dddd DD MMMM"))+" ",1),(0,a.Wm)(h,{ref:"qDateTeeTime","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:l.date,"onUpdate:modelValue":e[1]||(e[1]=e=>l.date=e),mask:"YYYY-MM-DD",options:r.optionsFn,onChange:r.loadTeetimes,"today-btn":""},{default:(0,a.w5)((()=>[(0,a._)("div",_l,[(0,a.wy)((0,a.Wm)(c,{label:"Closee",color:"primary",flat:""},null,512),[[_]])])])),_:1},8,["modelValue","options","onChange"])])),_:1},512)])),_:1}),(0,a.Wm)(c,{color:"secondary",icon:"chevron_right",style:{width:"50px"},onClick:e[2]||(e[2]=l=>r.navDay(1))})])),_:1})])]),(0,a._)("div",kl,[(0,a._)("div",vl,[bl,(0,a.Wm)(f,{unelevated:"",spread:"",class:"full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.filterForm.holes,((e,t)=>((0,a.wg)(),(0,a.j4)(c,{key:t,label:e,color:l.form.holes===e?"secondary":"white","text-color":l.form.holes===e?"":"black",onClick:l=>r.handleFilterHole(e)},null,8,["label","color","text-color","onClick"])))),128))])),_:1})]),(0,a._)("div",Cl,[ql,(0,a.Wm)(f,{unelevated:"",spread:"",class:"full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.filterForm.players,((e,t)=>((0,a.wg)(),(0,a.j4)(c,{key:t,label:e,color:l.form.fltSize===e?"secondary":"white","text-color":l.form.fltSize===e?"":"black",onClick:l=>r.handleFilterPlayers(e)},null,8,["label","color","text-color","onClick"])))),128))])),_:1})])]),l.teetimes.length>0?((0,a.wg)(),(0,a.iD)("div",Dl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.teetimes,((l,e)=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"q-mt-md col items-start"},[(0,a._)("div",Nl,[(0,a._)("div",xl,(0,s.zw)(l.crlName),1)])])))),128))])):(0,a.kq)("",!0),(0,a.Wm)(p),(0,a._)("div",Sl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.teetimes,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"col text-grey-8 text-bold"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.timeFilter(e.times),((t,i)=>((0,a.wg)(),(0,a.iD)("div",{key:i,class:"row text-center q-pt-xs",onClick:l=>r.handleOpenDialog(t,e)},[(0,a._)("div",{class:(0,s.C_)(["col q-pa-sm",t.sttRefNr>0?"bg-blue-3":"bg-green-3"])},[(0,a.Uk)((0,s.zw)(l.$filters.minuteToTime(t.sttTimeFrom))+" ",1),Hl,(0,a.wy)((0,a._)("i",null,"merged",512),[[n.F8,t.sttRefNr>0]])],2)],8,Tl)))),128))])))),128))]),l.dialogVisible?((0,a.wg)(),(0,a.j4)(y,{key:1,modelValue:l.dialogVisible,"onUpdate:modelValue":e[3]||(e[3]=e=>l.dialogVisible=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{style:{"max-width":"320px",width:"95%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"text-h6"},{default:(0,a.w5)((()=>[0==l.dialogErrors.length?((0,a.wg)(),(0,a.iD)("div",Wl,"Uw reservering")):(0,a.kq)("",!0),l.dialogErrors.length>0?((0,a.wg)(),(0,a.iD)("div",jl,"Probleem gevonden!")):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(p,{inset:""}),0==l.dialogErrors.length?((0,a.wg)(),(0,a.j4)(m,{key:0},{default:(0,a.w5)((()=>[(0,a._)("div",$l,[Zl,(0,a._)("div",zl,(0,s.zw)(l.$dayjs(l.form.fltDate).format("dddd DD MMMM")),1)]),(0,a._)("div",El,[Ol,(0,a._)("div",Yl,(0,s.zw)(l.$filters.minuteToTime(l.selectedTimeItem.sttTimeFrom)),1)]),(0,a._)("div",Ql,[Fl,(0,a._)("div",Pl,(0,s.zw)(l.form.fltSize),1)]),(0,a._)("div",Ul,[Ml,(0,a._)("div",Bl,(0,s.zw)(l.selectedCourseItem.crlName),1)])])),_:1})):(0,a.kq)("",!0),l.dialogErrors.length>0?((0,a.wg)(),(0,a.j4)(m,{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.dialogErrors,((l,e)=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"row"},[(0,a._)("div",Il,(0,s.zw)(l),1)])))),128))])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(p,{inset:""}),(0,a.Wm)(u,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{flat:"",onClick:r.handleDialogClose,color:"secondary",size:"mds"},{default:(0,a.w5)((()=>[Rl])),_:1},8,["onClick"]),0==l.dialogErrors.length?((0,a.wg)(),(0,a.j4)(c,{key:0,onClick:r.handleReservation,color:"secondary",size:"md"},{default:(0,a.w5)((()=>[Vl])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])),_:1})}const Ll={data:function(){return{loading:!1,flight:null,teetimes:[],dialogVisible:!1,dialogErrors:[],selectedTimeItem:null,filterForm:{holes:[9,18],players:[1,2,3,4]},form:{fltDate:this.$dayjs().format("YYYY-MM-DD"),fltTime:"",fltCrlNr1:"",fltCrlNr2:"",fltSize:3,players:[],holes:9,size:3},date:this.$dayjs().format("YYYY-MM-DD")}},created:function(){this.loadTeetimes()},watch:{date:function(l,e){this.form.fltDate=l,this.loadTeetimes(),this.$refs.qDateTeeTime.hide()}},methods:{timeFilter:function(l){return l.filter((l=>l.sttPlayers>=this.form.fltSize&&(9==this.form.holes||l.sttAvailable18&&18==this.form.holes)&&(9==this.form.holes||l.sttCrlNrNext>0&&18==this.form.holes)))},optionsFn(l){return this.$dayjs(l)>=this.$dayjs().add(-1,"day")&&this.$dayjs(l)<=this.$dayjs().add(21,"day")},navDay:function(l){this.date=this.$dayjs(this.date).add(l,"day").format("YYYY-MM-DD")},loadTeetimes:function(){let l=this.$ls.getItem("currentUser").value;this.loading=!0,this.$http.get("golfer/teetimes",{params:{date:this.$dayjs(this.form.fltDate).format("YYYY-MM-DD"),relNr:l.relNr}}).then((l=>{this.teetimes=l.payload,this.loading=!1}))},handleOpenDialog:function(l,e){this.selectedTimeItem=l,this.selectedCourseItem=Object.assign({},e),delete this.selectedCourseItem.times,this.dialogVisible=!0},handleReservation:function(){let l=[];for(let i=0;i<this.form.fltSize;i++)l.push({flpNr:null,flpSide:i+1,flpRelNr:null,flpName:"",flpEmail:"",flpHandicap:"",flpCarNr:null});let e=this.$ls.getItem("currentUser").value;l[0].flpRelNr=e.relNr,l[0].flpName=e.full_name2;const t={fltNr:this.selectedTimeItem.sttRefNr,fltTime1:this.selectedTimeItem.sttTimeFrom,fltDate:this.$filters.dateToUnix(this.form.fltDate,"YYYY-MM-DD"),fltSize:this.form.fltSize,fltCrlNr1:this.selectedCourseItem.crlNr,fltCrlNr2:18==this.form.holes?this.selectedTimeItem.sttCrlNrNext:null,fltOrigin:2,flight_players:l};let a=this;this.$http.post("golfer/booking",t).then((l=>{a.flight=l.flight,this.$emit("handleOpenFlight",a.flight)})).catch((l=>{a.dialogErrors=l}))},handleDialogClose:function(){this.dialogErrors=[],this.dialogVisible=!1},handleFilterHole:function(l){this.form.holes=l},handleFilterPlayers:function(l){this.form.fltSize=l}}};var Al=t(6375),Kl=t(3944),Jl=t(6915),Xl=t(9367),le=t(677);const ee=(0,W.Z)(Ll,[["render",Gl]]),te=ee;Y()(Ll,"components",{QPage:pl.Z,QBtnGroup:Al.Z,QBtn:z.Z,QPopupProxy:Kl.Z,QDate:Jl.Z,QSeparator:E.Z,QDialog:j.Z,QCard:$.Z,QCardSection:Z.Z,QCardActions:Xl.Z}),Y()(Ll,"directives",{ClosePopup:le.Z});const ae={class:"row"},ie={class:"col"},ne={class:"row"},oe={class:"col"},se=(0,a._)("i",{class:"far fa-calendar-alt mr-2"},null,-1),re=(0,a._)("i",{class:"far fa-golf-club mr-2"},null,-1),ce=(0,a.Uk)(" > "),de=(0,a.Uk)(" U heeft geen reserveringen openstaan ");function he(l,e,t,i,n,o){const r=(0,a.up)("q-btn"),c=(0,a.up)("q-item-label"),d=(0,a.up)("q-item-section"),h=(0,a.up)("q-item"),f=(0,a.up)("q-list"),p=(0,a.up)("q-banner"),m=(0,a.up)("q-page"),u=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(m,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("div",ae,[(0,a._)("div",ie,[(0,a.Wm)(r,{class:"full-width q-mb-md",color:"secondary",label:"Nieuwe reservering",icon:"add",onClick:o.handleOpenNew},null,8,["onClick"])])]),(0,a._)("div",ne,[(0,a._)("div",oe,[n.openData.length>0?((0,a.wg)(),(0,a.j4)(f,{key:0,separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.openData,((e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(h,{clickable:"",class:"full-width bg-white shadow-1 q-mb-sm",onClick:l=>o.handleOpenFlight(e),key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"itg-text-overflow"},{default:(0,a.w5)((()=>[se,(0,a.Uk)(" "+(0,s.zw)(l.$filters.unixToDate(e.fltDate,"dddd DD-MM"))+" "+(0,s.zw)()+" - "+(0,s.zw)(l.$filters.minuteToTime(e.fltTime1)),1)])),_:2},1024),(0,a.Wm)(c,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.flight_players.length)+" golfers ",1),re,(0,a.Uk)(" "+(0,s.zw)(e.loop1.crlName),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(d,{avatar:""},{default:(0,a.w5)((()=>[ce])),_:1})])),_:2},1032,["onClick"])),[[u]]))),128))])),_:1})):((0,a.wg)(),(0,a.j4)(p,{key:1,class:"bg-orange-3 text-grey-8 text-bold text-center"},{default:(0,a.w5)((()=>[de])),_:1}))])])])),_:1})}const fe={data(){return{loading:!1,openData:[]}},methods:{loadReservationList(){this.loading=!0,this.$http.get("golfer/bookings").then((l=>{this.loading=!1,this.openData=l}))},handleOpenFlight:function(l){this.$emit("handleOpenFlight",l)},handleOpenNew:function(){this.$emit("handleOpenBooking")}},created(){this.loadReservationList()}};var pe=t(7011),me=t(3414),ue=t(2035),ge=t(2350),ye=t(5607),we=t(6489);const _e=(0,W.Z)(fe,[["render",he]]),ke=_e;Y()(fe,"components",{QPage:pl.Z,QBtn:z.Z,QList:pe.Z,QItem:me.Z,QItemSection:ue.Z,QItemLabel:ge.Z,QBanner:ye.Z}),Y()(fe,"directives",{Ripple:we.Z});const ve={components:{Reservation:ul,Booking:te,List:ke},data(){return{LIST:"list",RESERVATION:"reservation",BOOKING:"booking",page:null,loading:!1,back_icon:"fa-home",back_link:"/",title:"Reserveringen",callBack:void 0,flight:null}},created:function(){this.page=this.LIST},methods:{handleOpenFlight:function(l){this.back_icon="fa-arrow-left",this.back_link="/reservations",this.title="Reservering",this.callBack=function(){this.$emit("handleClose")},l.flight_players.forEach((function(l){l.flpType=null,l.flpRelNr?l.flpType=2:null!=l.flpName&&(l.flpType=1)})),this.flight=l,this.page=this.RESERVATION},handleOpenBooking:function(){this.back_icon="fa-arrow-left",this.back_link="/reservations",this.title="Boeking",this.callBack=function(){this.$emit("handleClose")},this.page=this.BOOKING},handleClose:function(){this.back_icon="fa-home",this.back_link="/",this.title="Reserveringen",this.callBack=void 0,this.flight=null,this.page=this.LIST}}};var be=t(2652);const Ce=(0,W.Z)(ve,[["render",i]]),qe=Ce;Y()(ve,"components",{QPageContainer:be.Z})}}]);