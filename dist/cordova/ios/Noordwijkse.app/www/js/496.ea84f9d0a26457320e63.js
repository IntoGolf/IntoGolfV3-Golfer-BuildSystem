"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[496],{496:(e,s,l)=>{l.r(s),l.d(s,{default:()=>oe});var o=l(7408),n=l(8624);const t={class:"text-center"},r=(0,o.QD)("h5",null,"Geen toekomstige lessen gevonden",-1),i=[r];function a(e,s,l,r,a,p){const d=(0,o.E1)("q-btn"),c=(0,o.E1)("q-separator"),u=(0,o.E1)("comp-lesson"),h=(0,o.E1)("comp-new"),m=(0,o.E1)("q-page"),y=(0,o.E1)("q-page-container");return(0,o.Wz)(),(0,o.Az)(y,null,{default:(0,o.Ql)((()=>[(0,o.K2)(m,{class:"q-pa-sm"},{default:(0,o.Ql)((()=>[(0,o.wt)((0,o.QD)("div",null,[(0,o.K2)(d,{color:"primary",label:"Nieuwe les",size:"small",onClick:s[0]||(s[0]=s=>e.newLesson=!0)}),(0,o.K2)(c,{class:"q-mt-md"}),(0,o.wt)((0,o.QD)("div",t,i,512),[[n.Ub,0===e.clientLessonArray.length]]),((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(e.clientLessonArray,((e,s)=>((0,o.Wz)(),(0,o.Az)(u,{key:s,lesson:e,onHandleLoadClientLessons:p.handleLoadClientLessons},null,8,["lesson","onHandleLoadClientLessons"])))),128))],512),[[n.Ub,!e.newLesson]]),(0,o.wt)((0,o.QD)("div",null,[(0,o.K2)(h,{onHandleCloseNew:p.handleCloseNew},null,8,["onHandleCloseNew"])],512),[[n.Ub,e.newLesson]])])),_:1})])),_:1})}var p=l(776),d=l(9912);const c={class:"row full-width q-mt-md q-pa-sm",style:{border:"1px solid lightgrey","border-radius":"4px"}},u={class:"col-12"},h={class:"row"},m={class:"col-6"},y={class:"col-6 text-right"},f={class:"row"},L={class:"col-6"},g={class:"col-6 text-right"};function A(e,s,l,n,t,r){const i=(0,o.E1)("q-btn");return(0,o.Wz)(),(0,o.An)("div",c,[(0,o.QD)("div",u,[(0,o.QD)("div",h,[(0,o.QD)("div",m,[(0,o.QD)("b",null,(0,d.WA)(l.lesson.pro_lesson.pro_lesson_type.pltName),1)]),(0,o.QD)("div",y,[(0,o.QD)("b",null,(0,d.WA)(e.$filters.unixToDate(l.lesson.pro_lesson.lesDate,"ddd DD MMM")),1),(0,o.mY)(" "+(0,d.WA)(e.$filters.minuteToTime(l.lesson.pro_lesson.lesTimeFrom)),1)])]),(0,o.QD)("div",f,[(0,o.QD)("div",L,[(0,o.QD)("i",null,"pro: "+(0,d.WA)(l.lesson.pro_lesson.relation.full_name2),1)]),(0,o.QD)("div",g,[(0,o.K2)(i,{color:"primary",size:"xs",onClick:s[0]||(s[0]=e=>r.handleCancel(l.lesson.pro_lesson))},{default:(0,o.Ql)((()=>[(0,o.mY)("Annuleer ")])),_:1})])])])])}const D={props:{lesson:Object},data:function(){return{}},methods:{handleCancel:function(e){this.$q.dialog({title:"Annuleer les",message:"Deze les wordt geannuleerd, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{e.lesCarNr=1,this.$http.post("golfer/lesson",e).then((()=>{this.$q.notify({type:"positive",message:"uw les is geannuleerd"}),this.newLesson=!1,this.$emit("handleLoadClientLessons")}))}))}}};var v=l(4032),w=l(5824),Q=l(5488),T=l.n(Q);const N=(0,v.c)(D,[["render",A]]),b=N;T()(D,"components",{QBtn:w.c});const k={class:"row q-mt-md q-gutter-sm"},q={class:"col"},C={class:"col"},W={class:"row"},_={class:"col hide-scrollbar",style:{"overflow-x":"scroll"}},$={class:"row"},z={class:"col q-pt-sm text-bold text-center"},x={class:"row hide-scrollbar"};function B(e,s,l,n,t,r){const i=(0,o.E1)("q-input"),a=(0,o.E1)("q-select"),p=(0,o.E1)("q-separator"),c=(0,o.E1)("comp-lesson");return(0,o.Wz)(),(0,o.An)("div",null,[(0,o.QD)("div",k,[(0,o.QD)("div",q,[(0,o.K2)(i,{ref:"date",modelValue:e.date,"onUpdate:modelValue":s[0]||(s[0]=s=>e.date=s),dense:"",label:"Datum","lazy-rules":"",type:"date"},null,8,["modelValue"])]),(0,o.QD)("div",C,[(0,o.K2)(a,{modelValue:e.pltNr,"onUpdate:modelValue":s[1]||(s[1]=s=>e.pltNr=s),options:r.lessonType1Array,behavior:"menu",dense:"","emit-value":"",label:"Soort les","map-options":"","option-label":"pltName","option-value":"pltNr"},null,8,["modelValue","options"])])]),(0,o.K2)(p,{class:"q-mt-md"}),(0,o.QD)("div",W,[(0,o.QD)("div",_,[(0,o.QD)("div",{style:(0,d.MN)({width:r.colWidth}),class:"row q-gutter-sm"},[((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(r.proArray,((s,l)=>((0,o.Wz)(),(0,o.An)("div",{key:l,class:"col q-mb-lg"},[(0,o.QD)("div",$,[(0,o.QD)("div",z,[(0,o.QD)("b",null,(0,d.WA)(s.full_name2),1)])]),(0,o.QD)("div",x,[(0,o.K2)(c,{lessons:e.lessonArray,pro:s,proLessonType:r.proLessonType,onHandleBook:r.handleBook},null,8,["lessons","pro","proLessonType","onHandleBook"])])])))),128))],4)])])])}l(640);const E=["onClick"],F={class:"row"},Y={class:"col"},K={class:"row"},M={class:"col"},U={class:"row"},H={class:"col"};function V(e,s,l,n,t,r){return(0,o.Wz)(),(0,o.An)("div",null,[((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(r.lessonFilter,((s,n)=>((0,o.Wz)(),(0,o.An)("div",{key:n,align:"left",class:"full-width q-mt-md bg-orange q-pa-sm",onClick:l=>e.$emit("handleBook",s)},[(0,o.QD)("div",F,[(0,o.QD)("div",Y,[(0,o.QD)("div",K,[(0,o.QD)("div",M,[(0,o.QD)("b",null,(0,d.WA)(e.$filters.minuteToTime(s.pagTimeFrom)),1)])]),(0,o.QD)("div",U,[(0,o.QD)("div",H,[(0,o.QD)("i",null,"max. "+(0,d.WA)(l.proLessonType.pltMaxPers)+" pers.",1)])])])])],8,E)))),128))])}const O={props:{pro:Object,lessons:Array,proLessonType:Object},computed:{lessonFilter:function(){return void 0===this.lessons?[]:this.lessons.filter((e=>e.pro.relNr===this.pro.relNr))}},methods:{}},P=(0,v.c)(O,[["render",V]]),j=P,S={components:{compLesson:j},data:function(){return{date:null,relNr:null,pltNr:null,lessonArray:[],lessonTypeArray:[],clientLessonArray:[]}},watch:{date:function(){this.handleLoad()},pltNr:function(){this.handleLoad()}},mounted(){this.handleLoadLessonTypes()},computed:{lessonType1Array:function(){return this.lessonTypeArray.filter((e=>1==e.pltLtcNr))},pro:function(){return this.proArray.find((e=>e.relNr===this.relNr))},proLessonType:function(){return this.lessonTypeArray.find((e=>e.pltNr===this.pltNr))},proArray:function(){if(void 0===this.lessonArray)return[];let e=[];return this.lessonArray.reduce(((s,l)=>(e.includes(l.pro.relNr)||(e.push(l.pro.relNr),s.push(l.pro)),s)),[])},colWidth:function(){return 120*this.proArray.length+"px"}},methods:{handleLoad:function(){this.$http.get("golfer/lessons?date="+this.date+"&pltNr="+this.pltNr).then((e=>{this.lessonArray=e,this.proArray.length>0&&(this.relNr=this.proArray[0].relNr)}))},handleLoadLessonTypes:function(){this.$http.get("golfer/lessonTypes").then((e=>{this.lessonTypeArray=e,this.pltNr=this.lessonTypeArray[0].pltNr,this.date=this.$dayjs().format("YYYY-MM-DD")}))},handleBook:function(e){this.$q.dialog({title:"Boek een les",message:"Uw boekt nu een les, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk((()=>{let s={lesNr:null,lesRelNrPro:e.pro.relNr,lesPltNr:e.pro_lesson_type.pltNr,lesDate:this.$filters.dateToUnix(this.date,"YYYY-MM-DD"),lesTimeFrom:e.pagTimeFrom,lesTimeTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesBlockedFrom:e.pagTimeFrom,lesBlockedTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesCarNr:0};this.$http.post("golfer/lesson",s).then((()=>{this.$q.notify({type:"positive",message:"Uw les is geboekt"}),this.$emit("handleCloseNew")}))}))}}};var G=l(7644),I=l(1452),R=l(5164);const J=(0,v.c)(S,[["render",B]]),X=J;T()(S,"components",{QInput:G.c,QSelect:I.c,QSeparator:R.c});const Z={mixins:[p.c],components:{compLesson:b,compNew:X},data:function(){return{newLesson:!1,clientLessonArray:[]}},watch:{newLesson:function(e){e||this.handleLoadClientLessons()}},mounted(){this.handleLoadClientLessons()},methods:{handleLoadClientLessons:function(){this.$http.get("golfer/clientLessons").then((e=>{this.clientLessonArray=e}))},handleCloseNew:function(){this.handleLoadClientLessons(),this.newLesson=!1}}};var ee=l(688),se=l(6207);const le=(0,v.c)(Z,[["render",a]]),oe=le;T()(Z,"components",{QPageContainer:ee.c,QPage:se.c,QBtn:w.c,QSeparator:R.c})}}]);