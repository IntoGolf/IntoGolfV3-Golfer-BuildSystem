"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[821],{8821:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var n=a(2852),r=a(3100);const t={class:"row justify-between items-center q-mb-md"},l={key:0,class:"text-center q-pa-md"},i={key:1,class:"text-center q-pa-md text-grey-6"},o={key:2,class:"text-center q-pa-md text-grey-6"},u={class:"column items-center",style:{gap:"1px"}},c=["src"],d={key:0,class:"text-caption text-grey-6"};function m(e,s,a,m,p,g){const v=(0,n.g2)("q-btn"),k=(0,n.g2)("q-icon"),h=(0,n.g2)("q-input"),b=(0,n.g2)("q-spinner"),f=(0,n.g2)("q-avatar"),y=(0,n.g2)("q-item-section"),_=(0,n.g2)("q-item-label"),q=(0,n.g2)("q-chip"),x=(0,n.g2)("q-item"),F=(0,n.g2)("q-list"),Q=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(Q,{class:"q-pa-md"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",t,[(0,n.bF)(v,{flat:"",round:"",dense:"",icon:"arrow_back",onClick:s[0]||(s[0]=s=>e.$router.back()),size:"md"}),s[4]||(s[4]=(0,n.Lk)("div",{class:"text-h6 text-weight-bold"},"Vrienden Zoeken",-1)),s[5]||(s[5]=(0,n.Lk)("div",{style:{width:"40px"}},null,-1))]),(0,n.bF)(h,{modelValue:m.searchQuery,"onUpdate:modelValue":[s[2]||(s[2]=e=>m.searchQuery=e),m.searchUsers],placeholder:"Zoek op naam of email...",outlined:"",dense:"",class:"q-mb-md",debounce:"500",autofocus:""},(0,n.eX)({prepend:(0,n.k6)(()=>[(0,n.bF)(k,{name:"search"})]),_:2},[m.searchQuery?{name:"append",fn:(0,n.k6)(()=>[(0,n.bF)(k,{name:"close",onClick:s[1]||(s[1]=e=>m.searchQuery=""),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue"]),m.loadingSearch?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(b,{color:"primary",size:"2em"})])):0===m.searchResults.length&&m.searchQuery?((0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(k,{name:"search_off",size:"4em",class:"q-mb-md"}),s[6]||(s[6]=(0,n.Lk)("div",null,"Geen gebruikers gevonden",-1)),s[7]||(s[7]=(0,n.Lk)("div",{class:"text-caption"},"Probeer een andere zoekterm",-1))])):m.searchQuery?m.searchResults.length>0?((0,n.uX)(),(0,n.Wv)(F,{key:3,bordered:"",separator:""},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.searchResults,e=>((0,n.uX)(),(0,n.Wv)(x,{key:e.rel_nr,class:"q-pa-md"},{default:(0,n.k6)(()=>[(0,n.bF)(y,{avatar:""},{default:(0,n.k6)(()=>[(0,n.Lk)("div",u,[(0,n.bF)(f,{size:"30px"},{default:(0,n.k6)(()=>[e.image?((0,n.uX)(),(0,n.CE)("img",{key:0,src:m.getImageUrl(e.image),onError:s[3]||(s[3]=e=>e.target.style.display="none")},null,40,c)):(0,n.Q3)("",!0),(0,n.bF)(k,{name:"person",size:"30px"})]),_:2},1024),e.handicap?((0,n.uX)(),(0,n.CE)("div",d,(0,r.v_)(e.handicap),1)):(0,n.Q3)("",!0)])]),_:2},1024),(0,n.bF)(y,null,{default:(0,n.k6)(()=>[(0,n.bF)(_,{class:"text-weight-medium"},{default:(0,n.k6)(()=>[(0,n.eW)((0,r.v_)(e.name),1)]),_:2},1024)]),_:2},1024),(0,n.bF)(y,{side:""},{default:(0,n.k6)(()=>["none"===e.friendship_status?((0,n.uX)(),(0,n.Wv)(v,{key:0,color:"primary",label:"Uitnodigen",size:"sm",onClick:s=>m.sendFriendRequest(e),loading:m.sendingRequest===e.rel_nr},null,8,["onClick","loading"])):"friend"===e.friendship_status?((0,n.uX)(),(0,n.Wv)(q,{key:1,color:"positive",size:"sm"},{default:(0,n.k6)(()=>[(0,n.bF)(k,{name:"check",size:"xs",class:"q-mr-xs"}),s[10]||(s[10]=(0,n.eW)(" Vrienden ",-1))]),_:1,__:[10]})):"request_sent"===e.friendship_status?((0,n.uX)(),(0,n.Wv)(q,{key:2,color:"orange",size:"sm"},{default:(0,n.k6)(()=>[(0,n.bF)(k,{name:"schedule",size:"xs",class:"q-mr-xs"}),s[11]||(s[11]=(0,n.eW)(" Verzonden ",-1))]),_:1,__:[11]})):"request_received"===e.friendship_status?((0,n.uX)(),(0,n.Wv)(q,{key:3,color:"blue",size:"sm"},{default:(0,n.k6)(()=>[(0,n.bF)(k,{name:"mail",size:"xs",class:"q-mr-xs"}),s[12]||(s[12]=(0,n.eW)(" Ontvangen ",-1))]),_:1,__:[12]})):(0,n.Q3)("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(k,{name:"people_outline",size:"4em",class:"q-mb-md"}),s[8]||(s[8]=(0,n.Lk)("div",null,"Zoek naar vrienden",-1)),s[9]||(s[9]=(0,n.Lk)("div",{class:"text-caption"},"Typ een naam of emailadres om te beginnen",-1))]))]),_:1})}var p=a(5124),g=a(4004);const v={name:"FriendsSearch",setup(){const e=(0,g.A)(),{proxy:s}=(0,n.nI)(),a=(0,p.KR)(!1),r=(0,p.KR)(null),t=(0,p.KR)(""),l=(0,p.KR)([]),i=async()=>{if(!t.value||t.value.length<2)l.value=[];else{a.value=!0;try{const e=await s.$axios.get("golfer/search-users",{params:{search:t.value}});l.value=e||[]}catch(n){console.error("Error searching users:",n),e.notify({type:"negative",message:"Fout bij zoeken van gebruikers"})}finally{a.value=!1}}},o=async a=>{r.value=a.rel_nr;try{await s.$axios.post("golfer/friend-request",{rel_nr:a.rel_nr}),e.notify({type:"positive",message:"Vriendschapsverzoek verzonden",timeout:2e3}),a.friendship_status="request_sent"}catch(n){console.error("Error sending friend request:",n),e.notify({type:"negative",message:"Fout bij verzenden van vriendschapsverzoek"})}finally{r.value=null}},u=e=>e?`https://delfland.baan.intogolf.nl/api/public/image?path=${e}`:null;return(0,n.wB)(t,e=>{e&&e.length>=2?i():l.value=[]},{debounce:500}),{loadingSearch:a,sendingRequest:r,searchQuery:t,searchResults:l,searchUsers:i,sendFriendRequest:o,getImageUrl:u}}};var k=a(6317),h=a(2507),b=a(3178),f=a(7316),y=a(8219),_=a(2977),q=a(192),x=a(9091),F=a(3656),Q=a(2287),z=a(4701),A=a(6279),X=a(1082),C=a.n(X);const R=(0,k.A)(v,[["render",m],["__scopeId","data-v-47e8cab6"]]),w=R;C()(v,"components",{QPage:h.A,QBtn:b.A,QInput:f.A,QIcon:y.A,QSpinner:_.A,QList:q.A,QItem:x.A,QItemSection:F.A,QAvatar:Q.A,QItemLabel:z.A,QChip:A.A})}}]);