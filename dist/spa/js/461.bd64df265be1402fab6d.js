"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[461],{2461:(e,a,t)=>{t.r(a),t.d(a,{default:()=>H});var n=t(2852),l=t(3100),i=t(9006);const s={class:"standalone-page"},o={class:"page-container"},r={class:"logo-section"},d={class:"logo-container"},u={key:1,class:"logo-text"},c={key:0,class:"content-section"},g={class:"state-container loading-state"},m={key:1,class:"content-section"},v={class:"state-container"},p={class:"state-message"},b={key:2,class:"content-section"},f={class:"state-container"},k={class:"state-message"},h={key:3,class:"content-section"},y={class:"form-container"},_={class:"text-center q-mb-lg"},F={class:"text-h6"},z={key:0,class:"q-pa-md bg-grey-1 rounded-borders"},w={class:"text-body2"},q={class:"q-gutter-md"};function x(e,a,t,x,C,V){const R=(0,n.g2)("q-img"),L=(0,n.g2)("q-spinner-dots"),A=(0,n.g2)("q-icon"),I=(0,n.g2)("q-card-section"),N=(0,n.g2)("q-btn"),U=(0,n.g2)("q-card-actions"),j=(0,n.g2)("q-card"),E=(0,n.g2)("q-separator"),Q=(0,n.g2)("q-avatar"),D=(0,n.g2)("q-input"),G=(0,n.g2)("q-form");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",o,[(0,n.Lk)("div",r,[(0,n.Lk)("div",d,[x.blobUrl?((0,n.uX)(),(0,n.Wv)(R,{key:0,fit:"scale-down",src:x.blobUrl,class:"logo-image"},null,8,["src"])):((0,n.uX)(),(0,n.CE)("div",u," IntoGolf "))])]),x.loading?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",g,[(0,n.bF)(L,{color:"primary",size:"50px"}),a[6]||(a[6]=(0,n.Lk)("div",{class:"state-text"},"Uitnodiging laden...",-1))])])):x.error?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("div",v,[(0,n.bF)(j,{class:"state-card error-card"},{default:(0,n.k6)(()=>[(0,n.bF)(I,null,{default:(0,n.k6)(()=>[(0,n.bF)(A,{color:"negative",name:"error",size:"60px"}),a[7]||(a[7]=(0,n.Lk)("div",{class:"state-title error-title"},"Fout",-1)),(0,n.Lk)("div",p,(0,l.v_)(x.error),1)]),_:1}),(0,n.bF)(U,null,{default:(0,n.k6)(()=>[(0,n.bF)(N,{class:"full-width",color:"primary",flat:"",label:"Opnieuw proberen",onClick:x.loadInvitation},null,8,["onClick"])]),_:1})]),_:1})])])):x.successMessage?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",f,[(0,n.bF)(j,{class:"state-card success-card"},{default:(0,n.k6)(()=>[(0,n.bF)(I,null,{default:(0,n.k6)(()=>[(0,n.bF)(A,{color:"positive",name:"check_circle",size:"60px"}),a[8]||(a[8]=(0,n.Lk)("div",{class:"state-title success-title"},"Gelukt!",-1)),(0,n.Lk)("div",k,(0,l.v_)(x.successMessage),1)]),_:1})]),_:1})])])):x.invitation?((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",y,[(0,n.bF)(j,{class:"q-mb-lg"},{default:(0,n.k6)(()=>[(0,n.bF)(I,null,{default:(0,n.k6)(()=>[a[10]||(a[10]=(0,n.Lk)("div",{class:"text-h5 text-center q-mb-md"},"Vriendschapsuitnodiging",-1)),(0,n.bF)(E,{class:"q-mb-md"}),(0,n.Lk)("div",_,[(0,n.bF)(Q,{class:"q-mb-md",color:"primary",size:"80px","text-color":"white"},{default:(0,n.k6)(()=>[(0,n.bF)(A,{name:"person",size:"40px"})]),_:1}),(0,n.Lk)("div",F,(0,l.v_)(x.invitation.inviter_name),1),a[9]||(a[9]=(0,n.Lk)("div",{class:"text-body2 text-grey-6"},"wil vrienden worden",-1))]),x.invitation.message?((0,n.uX)(),(0,n.CE)("div",z,[(0,n.Lk)("div",w,[(0,n.bF)(A,{class:"q-mr-sm",name:"format_quote"}),(0,n.eW)(" "+(0,l.v_)(x.invitation.message),1)])])):(0,n.Q3)("",!0)]),_:1})]),_:1}),(0,n.bF)(j,null,{default:(0,n.k6)(()=>[(0,n.bF)(I,null,{default:(0,n.k6)(()=>[a[11]||(a[11]=(0,n.Lk)("div",{class:"text-h6 q-mb-md"},"Jouw gegevens",-1)),(0,n.bF)(G,{ref:"formRef",onSubmit:(0,i.D$)(x.acceptInvitation,["prevent"])},{default:(0,n.k6)(()=>[(0,n.Lk)("div",q,[(0,n.bF)(D,{modelValue:x.form.relCallName,"onUpdate:modelValue":a[0]||(a[0]=e=>x.form.relCallName=e),rules:x.firstNameRules,filled:"",label:"Voornaam *","lazy-rules":""},{prepend:(0,n.k6)(()=>[(0,n.bF)(A,{name:"person"})]),_:1},8,["modelValue","rules"]),(0,n.bF)(D,{modelValue:x.form.relPrefix,"onUpdate:modelValue":a[1]||(a[1]=e=>x.form.relPrefix=e),rules:x.prefixRules,filled:"",label:"Tussenvoegsel","lazy-rules":""},{prepend:(0,n.k6)(()=>[(0,n.bF)(A,{name:"person"})]),_:1},8,["modelValue","rules"]),(0,n.bF)(D,{modelValue:x.form.relName,"onUpdate:modelValue":a[2]||(a[2]=e=>x.form.relName=e),rules:x.lastNameRules,filled:"",label:"Achternaam *","lazy-rules":""},{prepend:(0,n.k6)(()=>[(0,n.bF)(A,{name:"person"})]),_:1},8,["modelValue","rules"]),(0,n.bF)(D,{modelValue:x.form.birth_date,"onUpdate:modelValue":a[3]||(a[3]=e=>x.form.birth_date=e),rules:x.birthDateRules,filled:"",label:"Geboortedatum *","lazy-rules":"",type:"date"},{prepend:(0,n.k6)(()=>[(0,n.bF)(A,{name:"cake"})]),_:1},8,["modelValue","rules"]),(0,n.bF)(D,{modelValue:x.form.handicap,"onUpdate:modelValue":a[4]||(a[4]=e=>x.form.handicap=e),modelModifiers:{number:!0},rules:x.handicapRules,filled:"",hint:"Voer een handicap in tussen -36 en 54",label:"Handicap (optioneel)","lazy-rules":"",type:"number"},{prepend:(0,n.k6)(()=>[(0,n.bF)(A,{name:"golf_course"})]),_:1},8,["modelValue","rules"]),(0,n.bF)(D,{modelValue:x.form.gsn_number,"onUpdate:modelValue":a[5]||(a[5]=e=>x.form.gsn_number=e),rules:x.gsnRules,filled:"",hint:"Golf Service Nederland nummer",label:"GSN nummer (optioneel)","lazy-rules":""},{prepend:(0,n.k6)(()=>[(0,n.bF)(A,{name:"badge"})]),_:1},8,["modelValue","rules"])])]),_:1},8,["onSubmit"])]),_:1}),(0,n.bF)(U,{class:"q-pa-md"},{default:(0,n.k6)(()=>[(0,n.bF)(N,{loading:x.submitting,class:"full-width q-mb-sm",color:"positive",icon:"check",label:"Uitnodiging accepteren",size:"lg",type:"submit",onClick:x.acceptInvitation},null,8,["loading","onClick"]),(0,n.bF)(N,{loading:x.submitting,class:"full-width",color:"negative",flat:"",icon:"close",label:"Uitnodiging afwijzen",onClick:x.declineInvitation},null,8,["loading","onClick"])]),_:1})]),_:1})])])):(0,n.Q3)("",!0)])])}var C=t(5124),V=t(3394),R=t(4004),L=t(4299),A=t(7352),I=t.n(A);const N={name:"FriendInvitation",setup(){const e=(0,V.lq)(),a=(0,R.A)(),t=(0,L.Pj)(),l=(0,C.KR)(!1),i=(0,C.KR)(!1),s=(0,C.KR)(""),o=(0,C.KR)(""),r=(0,C.KR)(null),d=(0,C.KR)(null),u=(0,C.KR)(""),c=(0,C.KR)({relCallName:"",relPrefix:"",relName:"",birth_date:"",handicap:null,gsn_number:""}),g=(0,n.EW)(()=>e.params.hash),m=[e=>e&&e.length>0||"Voornaam is verplicht",e=>e&&e.length>=2||"Voornaam moet minimaal 2 karakters zijn"],v=[e=>!e||(e.length<=50||"Tussenvoegsel mag maximaal 50 karakters zijn")],p=[e=>e&&e.length>0||"Achternaam is verplicht",e=>e&&e.length>=2||"Achternaam moet minimaal 2 karakters zijn"],b=[e=>!!e||"Geboortedatum is verplicht",e=>{if(!e)return!0;const a=new Date(e),t=new Date;return a<t||"Geboortedatum moet in het verleden liggen"}],f=[e=>{if(null===e||void 0===e||""===e)return!0;const a=Number(e);return a>=-36&&a<=54||"Handicap moet tussen -36 en 54 liggen"}],k=[e=>!e||(e.length>=6||"GSN nummer moet minimaal 6 karakters zijn")],h=async()=>{try{if(t.state.settings.publicItems&&0!==Object.keys(t.state.settings.publicItems).length||await t.dispatch("settings/fetchPublicSettings"),t.state.settings?.publicItems?.system_logo){const e=await I().get(`golfer/image/${t.state.settings.publicItems.system_logo}`);u.value="data:image/png;base64,"+e}}catch(e){console.error("Error loading logo:",e),u.value=""}},y=async()=>{if(g.value){l.value=!0,s.value="";try{const e=await I().get(`invitation/${g.value}`);r.value=e.invitation}catch(e){console.error("Error loading invitation:",e),404===e.response?.status?s.value="Uitnodiging niet gevonden of verlopen":410===e.response?.status?s.value="Deze uitnodiging is verlopen":s.value="Er is een fout opgetreden bij het laden van de uitnodiging"}finally{l.value=!1}}else s.value="Geen geldige uitnodiging gevonden"},_=async()=>{if(d.value){const e=await d.value.validate();if(!e)return void a.notify({type:"negative",message:"Controleer de ingevulde gegevens"})}i.value=!0;try{await I().post(`invitation/${g.value}/accept`,{relCallName:c.value.relCallName,relPrefix:c.value.relPrefix||null,relName:c.value.relName,birth_date:c.value.birth_date,handicap:c.value.handicap||null,gsn_number:c.value.gsn_number||null});o.value="Uitnodiging geaccepteerd! Je bent nu vrienden.",r.value=null,a.notify({type:"positive",message:"Uitnodiging succesvol geaccepteerd!"})}catch(e){console.error("Error accepting invitation:",e);let t="Er is een fout opgetreden bij het accepteren van de uitnodiging";409===e.response?.status?t="Deze uitnodiging is al verwerkt":410===e.response?.status?t="Deze uitnodiging is verlopen":e.response?.data?.message&&(t=e.response.data.message),a.notify({type:"negative",message:t})}finally{i.value=!1}},F=async()=>{a.dialog({title:"Uitnodiging afwijzen",message:"Weet je zeker dat je deze uitnodiging wilt afwijzen?",cancel:!0,persistent:!0}).onOk(async()=>{i.value=!0;try{await I().post(`invitation/${g.value}/decline`),o.value="Uitnodiging afgewezen.",r.value=null,a.notify({type:"info",message:"Uitnodiging afgewezen"})}catch(e){console.error("Error declining invitation:",e);let t="Er is een fout opgetreden bij het afwijzen van de uitnodiging";409===e.response?.status?t="Deze uitnodiging is al verwerkt":410===e.response?.status?t="Deze uitnodiging is verlopen":e.response?.data?.message&&(t=e.response.data.message),a.notify({type:"negative",message:t})}finally{i.value=!1}})};return(0,n.sV)(()=>{h(),y()}),{loading:l,submitting:i,error:s,successMessage:o,invitation:r,form:c,formRef:d,blobUrl:u,firstNameRules:m,prefixRules:v,lastNameRules:p,birthDateRules:b,handicapRules:f,gsnRules:k,loadImage:h,loadInvitation:y,acceptInvitation:_,declineInvitation:F}}};var U=t(6317),j=t(24),E=t(1829),Q=t(4483),D=t(1656),G=t(8219),S=t(9204),K=t(3178),X=t(1177),P=t(2287),$=t(8767),M=t(7316),T=t(1082),W=t.n(T);const O=(0,U.A)(N,[["render",x],["__scopeId","data-v-52ba09d5"]]),H=O;W()(N,"components",{QImg:j.A,QSpinnerDots:E.A,QCard:Q.A,QCardSection:D.A,QIcon:G.A,QCardActions:S.A,QBtn:K.A,QSeparator:X.A,QAvatar:P.A,QForm:$.A,QInput:M.A})}}]);