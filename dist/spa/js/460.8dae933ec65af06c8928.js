"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[460],{4460:(e,s,l)=>{l.r(s),l.d(s,{default:()=>de});var o=l(2852),t=l(9006);const n={key:0},a={key:0},r={key:1},i={key:2};function d(e,s,l,d,c,p){const m=(0,o.g2)("q-btn"),h=(0,o.g2)("q-separator"),u=(0,o.g2)("comp-lesson"),L=(0,o.g2)("lesson-details"),k=(0,o.g2)("comp-new"),y=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(y,{class:"q-pa-sm"},{default:(0,o.k6)(()=>[e.newLesson||e.lesson?e.lesson?((0,o.uX)(),(0,o.Wv)(L,{key:1,lesson:e.lesson,onOnCloseLesson:p.onCloseLesson},null,8,["lesson","onOnCloseLesson"])):((0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(k,{onHandleCloseNew:p.handleCloseNew},null,8,["onHandleCloseNew"])])):((0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(m,{color:"primary",label:"Priveles",size:"small",onClick:s[0]||(s[0]=s=>e.newLesson=!0)}),(0,o.bo)((0,o.bF)(m,{class:"q-ml-sm",color:"primary",label:"Inlooplessen",size:"small",to:"walkins"},null,512),[[t.aG,e.walkinsArray.length>0]]),(0,o.bo)((0,o.bF)(m,{class:"q-ml-sm",color:"primary",label:"Cursussen",size:"small",to:"relation_classes"},null,512),[[t.aG,e.classesArray.length>0]]),(0,o.bF)(h,{class:"q-mt-md q-mb-md"}),0===e.clientLessonArray.length?((0,o.uX)(),(0,o.CE)("div",a,[...s[1]||(s[1]=[(0,o.Lk)("div",{class:"text-bold text-h6"},"Geen geboekte privelessen",-1)])])):((0,o.uX)(),(0,o.CE)("div",r,[...s[2]||(s[2]=[(0,o.Lk)("div",{class:"text-bold text-h6"},"Jouw lessen",-1),(0,o.Lk)("span",null,"Hieronder vindt je de door jouw geboekte lessen.",-1)])])),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.clientLessonArray,(e,s)=>((0,o.uX)(),(0,o.Wv)(u,{key:s,lesson:e,onHandleLoadClientLessons:p.handleLoadClientLessons,onOnSelectLesson:p.onSelectLesson},null,8,["lesson","onHandleLoadClientLessons","onOnSelectLesson"]))),128))]))]),_:1})}l(9552),l(401);var c=l(3842),p=l(3100);const m={class:"col-12"},h={class:"row"},u={class:"col-6"},L={class:"col-6 text-right"},k={class:"row"},y={class:"col-6"};function g(e,s,l,t,n,a){return(0,o.uX)(),(0,o.CE)("div",{class:"row full-width q-mt-md q-pa-sm",style:{border:"1px solid lightgrey","border-radius":"4px"},onClick:s[0]||(s[0]=s=>e.$emit("onSelectLesson",l.lesson))},[(0,o.Lk)("div",m,[(0,o.Lk)("div",h,[(0,o.Lk)("div",u,[(0,o.Lk)("b",null,(0,p.v_)(l.lesson.pro_lesson.pro_lesson_type.pltName),1)]),(0,o.Lk)("div",L,[(0,o.Lk)("b",null,(0,p.v_)(e.$filters.unixToDate(l.lesson.pro_lesson.lesDate,"ddd DD MMM")),1),(0,o.eW)(" "+(0,p.v_)(e.$filters.minuteToTime(l.lesson.pro_lesson.lesTimeFrom)),1)])]),(0,o.Lk)("div",k,[(0,o.Lk)("div",y,[(0,o.Lk)("i",null,"pro: "+(0,p.v_)(l.lesson.pro_lesson.relation.full_name2),1)]),s[1]||(s[1]=(0,o.Lk)("div",{class:"col-6 text-right"},null,-1))])])])}const v={props:{lesson:Object},data:function(){return{}},methods:{handleCancel:function(e){this.$q.dialog({title:"Annuleer les",message:"Deze les wordt geannuleerd, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk(()=>{e.lesCarNr=1,this.$http.post("golfer/lesson",e).then(()=>{this.$q.notify({type:"positive",message:"uw les is geannuleerd"}),this.newLesson=!1,this.$emit("handleLoadClientLessons")})})}}};var b=l(6317);const f=(0,b.A)(v,[["render",g]]),w=f,q={class:"row q-mt-sm"},_={class:"col-6 text-right"},A={class:"row q-mt-md q-gutter-sm"},C={class:"col"},N={class:"col"};function T(e,s,l,t,n,a){const r=(0,o.g2)("q-btn"),i=(0,o.g2)("q-input"),d=(0,o.g2)("q-select"),c=(0,o.g2)("q-separator"),p=(0,o.g2)("component-lesson-pros");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",q,[s[4]||(s[4]=(0,o.Lk)("div",{class:"col-6"},[(0,o.Lk)("h5",{class:"q-mt-none q-mb-none"},"Reserveer een les")],-1)),(0,o.Lk)("div",_,[(0,o.bF)(r,{color:"primary",flat:"",icon:"arrow_back",onClick:s[0]||(s[0]=s=>e.$emit("handleCloseNew"))},{default:(0,o.k6)(()=>[...s[3]||(s[3]=[(0,o.eW)("Sluiten ",-1)])]),_:1})])]),(0,o.Lk)("div",A,[(0,o.Lk)("div",C,[(0,o.bF)(i,{ref:"date",modelValue:e.date,"onUpdate:modelValue":s[1]||(s[1]=s=>e.date=s),dense:"",label:"Datum","lazy-rules":"",type:"date"},null,8,["modelValue"])]),(0,o.Lk)("div",N,[(0,o.bF)(d,{modelValue:e.pltNr,"onUpdate:modelValue":s[2]||(s[2]=s=>e.pltNr=s),options:e.lessonTypeArray,behavior:"menu",dense:"","emit-value":"",label:"Soort les","map-options":"","option-label":"pltName","option-value":"pltNr"},null,8,["modelValue","options"])])]),(0,o.bF)(c,{class:"q-mt-md"}),(0,o.bF)(p,{lessonType:a.proLessonType,lessons:e.lessonArray,per:e.per,onHandleBook:a.handleBook},null,8,["lessonType","lessons","per","onHandleBook"])])}l(2296);var $=l(3053);const F={components:{ComponentLessonPros:$.A},data:function(){return{date:this.$dayjs().format("YYYY-MM-DD"),relNr:null,pltNr:null,lessonArray:[],lessonTypeArray:[],clientLessonArray:[],per:{value:1,label:"Dag"}}},watch:{date:function(){this.handleLoad()},pltNr:function(){this.handleLoad()}},async created(){await this.handleLoadLessonTypes()},computed:{pro:function(){return this.proArray.find(e=>e.relNr===this.relNr)},proLessonType:function(){return this.lessonTypeArray.find(e=>e.pltNr===this.pltNr)},proArray:function(){if(void 0===this.lessonArray)return[];let e=[];return this.lessonArray.reduce((s,l)=>(e.includes(l.pro.relNr)||(e.push(l.pro.relNr),s.push(l.pro)),s),[])},colWidth:function(){return 120*this.proArray.length+"px"}},methods:{async handleLoad(){this.lessonArray=await this.$http.get("golfer/lessons?date="+this.date+"&pltNr="+this.pltNr),this.proArray.length>0&&(this.relNr=this.proArray[0].relNr)},async handleLoadLessonTypes(){this.lessonTypeArray=await this.$http.get("golfer/lessonTypes"),this.pltNr=this.lessonTypeArray[0].pltNr},handleBook:function(e){const s=this.$filters.minuteToTime(e.pagTimeFrom),l=this.$dayjs(this.date).format("ddd DD MMM"),o=e.pro_lesson_type.pltName,t="Je boekt nu een "+o+" op "+l+" om "+s+" , wil je doorgaan?";this.$q.dialog({title:o,message:t,cancel:!0,persistent:!0}).onOk(()=>{this.onBooking(e)})},async onBooking(e){let s={lesNr:null,lesRelNrPro:e.proNr,lesProNr:e.proNr,lesPltNr:e.pro_lesson_type.pltNr,lesDate:this.$filters.dateToUnix(this.date,"YYYY-MM-DD"),lesTimeFrom:e.pagTimeFrom,lesTimeTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesBlockedFrom:e.pagTimeFrom,lesBlockedTo:e.pagTimeFrom+this.proLessonType.pltBefore+this.proLessonType.pltAfter+this.proLessonType.pltDuration,lesCarNr:0};await this.$http.post("golfer/lesson",s),this.$q.notify({type:"positive",message:"Uw les is geboekt"}),this.$emit("handleCloseNew")}}};var x=l(3178),D=l(7316),Q=l(6723),M=l(1177),W=l(1082),X=l.n(W);const S=(0,b.A)(F,[["render",T]]),B=S;X()(F,"components",{QBtn:x.A,QInput:D.A,QSelect:Q.A,QSeparator:M.A});const Y={class:"row q-pb-sm q-pt-sm"},j={class:"col overflow-hidden text-right"},O={class:"row q-pb-sm q-pt-sm"},P={class:"col overflow-hidden text-right"},E={class:"row q-pb-sm q-pt-sm"},I={class:"col overflow-hidden text-right"},H={class:"row q-pb-sm q-pt-sm"},z={class:"col overflow-hidden text-right"},V={class:"row q-pb-sm q-pt-sm"},U={class:"col overflow-hidden text-right"};function G(e,s,l,t,n,a){const r=(0,o.g2)("q-separator"),i=(0,o.g2)("q-item-label"),d=(0,o.g2)("q-item-section"),c=(0,o.g2)("q-icon"),m=(0,o.g2)("q-item"),h=(0,o.g2)("q-list"),u=(0,o.g2)("q-btn"),L=(0,o.g2)("q-card"),k=(0,o.g2)("q-page"),y=(0,o.gN)("ripple");return(0,o.uX)(),(0,o.Wv)(k,{class:"q-pa-sm"},{default:(0,o.k6)(()=>[(0,o.bF)(L,{bordered:"",class:"q-pa-sm q-mt-md",flat:""},{default:(0,o.k6)(()=>[s[7]||(s[7]=(0,o.Lk)("div",{class:"row q-pb-sm q-pt-sm"},[(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("h5",{class:"q-mt-sm q-mb-sm"},"Lesinformatie")])],-1)),(0,o.bF)(r),(0,o.Lk)("div",Y,[s[1]||(s[1]=(0,o.Lk)("div",{class:"col text-bold"},"Soort les",-1)),(0,o.Lk)("div",j,(0,p.v_)(a.soortLes),1)]),(0,o.Lk)("div",O,[s[2]||(s[2]=(0,o.Lk)("div",{class:"col text-bold"},"Datum",-1)),(0,o.Lk)("div",P,(0,p.v_)(e.$dayjs(a.date,"DD-MM-YYYY").format("dddd D MMM")),1)]),(0,o.Lk)("div",E,[s[3]||(s[3]=(0,o.Lk)("div",{class:"col text-bold"},"Tijd",-1)),(0,o.Lk)("div",I,(0,p.v_)(a.time),1)]),(0,o.Lk)("div",H,[s[4]||(s[4]=(0,o.Lk)("div",{class:"col text-bold"},"Pro",-1)),(0,o.Lk)("div",z,(0,p.v_)(a.pro),1)]),(0,o.Lk)("div",V,[s[5]||(s[5]=(0,o.Lk)("div",{class:"col text-bold"},"Max. aantal deelnemers",-1)),(0,o.Lk)("div",U,(0,p.v_)(a.pro_lesson.pro_lesson_type.pltMaxPers),1)]),(0,o.bF)(r,{class:"q-mt-sm q-mb-sm"}),s[8]||(s[8]=(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("h6",{class:"q-mt-sm q-mb-sm"},"Deelnemer(s)")],-1)),(0,o.bF)(h,{separator:""},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.pro_lesson.clients,(e,s)=>(0,o.bo)(((0,o.uX)(),(0,o.Wv)(m,{key:s,class:"full-width q-mb-sm",clickable:"",style:{"border-radius":"4px"}},{default:(0,o.k6)(()=>[(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.bF)(i,{class:"itg-text-overflow"},{default:(0,o.k6)(()=>[(0,o.eW)((0,p.v_)(e.plcName),1)]),_:2},1024)]),_:2},1024),(0,o.bF)(d,{avatar:""},{default:(0,o.k6)(()=>[1===e.canCancel?((0,o.uX)(),(0,o.Wv)(c,{key:0,name:"delete"})):(0,o.Q3)("",!0)]),_:2},1024)]),_:2},1024)),[[y]])),128))]),_:1}),(0,o.bF)(r,{class:"q-mt-sm q-mb-sm"}),s[9]||(s[9]=(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("h6",{class:"q-mt-sm q-mb-sm"},"Acties")],-1)),1===a.pro_lesson.canCancel?((0,o.uX)(),(0,o.Wv)(u,{key:0,class:"full-width q-mb-md",color:"primary",icon:"delete",onClick:a.handleCancel},{default:(0,o.k6)(()=>[(0,o.eW)((0,p.v_)(a.cancelLabel),1)]),_:1},8,["onClick"])):(0,o.Q3)("",!0),(0,o.bF)(u,{class:"full-width q-mb-md",color:"primary",icon:"arrow_back_ios",onClick:s[0]||(s[0]=s=>e.$emit("onCloseLesson"))},{default:(0,o.k6)(()=>[...s[6]||(s[6]=[(0,o.eW)(" Sluit les ",-1)])]),_:1})]),_:1})]),_:1})}const R={props:{lesson:Object},data:function(){return{}},computed:{pro_lesson(){return this.lesson.pro_lesson},date(){return this.$filters.unixToDate(this.pro_lesson.lesDate)},time(){return this.$filters.minuteToTime(this.pro_lesson.lesTimeFrom)},pro(){return this.pro_lesson.relation.full_name2},soortLes(){return this.pro_lesson.pro_lesson_type.pltName},cancelLabel(){return 2===this.pro_lesson.pro_lesson_type.pltLtcNr?"Annuleer deelname":"Annuleer les"}},methods:{handleCancel:function(){this.$q.dialog({title:"Annuleer les",message:"Deze les wordt geannuleerd, wilt u doorgaan?",cancel:!0,persistent:!0}).onOk(()=>{this.$http.post("golfer/cancelLesson",this.pro_lesson).then(()=>{this.$q.notify({type:"positive",message:"uw les is geannuleerd"}),this.newLesson=!1,this.$emit("onCloseLesson")})})}}};var J=l(2507),K=l(4483),Z=l(192),ee=l(9091),se=l(3656),le=l(4701),oe=l(8219),te=l(4850);const ne=(0,b.A)(R,[["render",G]]),ae=ne;X()(R,"components",{QPage:J.A,QCard:K.A,QSeparator:M.A,QList:Z.A,QItem:ee.A,QItemSection:se.A,QItemLabel:le.A,QIcon:oe.A,QBtn:x.A}),X()(R,"directives",{Ripple:te.A});const re={mixins:[c.A],components:{LessonDetails:ae,compLesson:w,compNew:B},data:function(){return{newLesson:!1,lesson:null,clientLessonArray:[],clinicsArray:[],classesArray:[],walkinsArray:[]}},watch:{newLesson:function(e){e||this.handleLoadClientLessons()}},methods:{async handleLoadClientLessons(){this.clientLessonArray=await this.$http.get("golfer/clientLessons"),this.$route.params.lesNr>0&&(this.lesson=this.clientLessonArray.find(e=>e.pro_lesson.lesNr==this.$route.params.lesNr))},async handleLoadClasses(){this.classesArray=await this.$http.get("public/courses")},async handleLoadWalkins(){this.walkinsArray=await this.$http.get("public/walkins")},handleCloseNew:function(){this.handleLoadClientLessons(),this.newLesson=!1},onSelectLesson(e){this.lesson=e},async onCloseLesson(){this.lesson=null,await this.handleLoadClientLessons(),this.$router.push({name:"lessons"})}},async mounted(){await this.handleLoadClientLessons(),await this.handleLoadClasses(),await this.handleLoadWalkins()}},ie=(0,b.A)(re,[["render",d]]),de=ie;X()(re,"components",{QPage:J.A,QBtn:x.A,QSeparator:M.A})}}]);