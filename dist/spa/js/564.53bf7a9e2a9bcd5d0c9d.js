"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[564],{1564:(e,n,s)=>{s.r(n),s.d(n,{default:()=>_});var i=s(2852);const a={class:"row justify-between items-center q-mb-md"},t={class:"text-center q-mb-lg"},r={class:"text-center q-mt-lg"},l={class:"text-subtitle2 text-blue-8 q-mb-sm"};function o(e,n,s,o,d,m){const u=(0,i.g2)("q-btn"),g=(0,i.g2)("q-icon"),c=(0,i.g2)("q-input"),v=(0,i.g2)("q-spinner-hourglass"),p=(0,i.g2)("q-form"),b=(0,i.g2)("q-card"),f=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(f,{class:"q-pa-md"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",a,[(0,i.bF)(u,{dense:"",flat:"",icon:"arrow_back",round:"",size:"md",onClick:n[0]||(n[0]=n=>e.$router.back())}),n[3]||(n[3]=(0,i.Lk)("div",{class:"text-h6 text-weight-bold"},"Vrienden Uitnodigen",-1)),n[4]||(n[4]=(0,i.Lk)("div",{style:{width:"40px"}},null,-1))]),(0,i.Lk)("div",t,[(0,i.bF)(g,{class:"q-mb-md",color:"primary",name:"person_add",size:"3em"}),n[5]||(n[5]=(0,i.Lk)("div",{class:"text-h6 q-mb-sm"},"Nodig een vriend uit",-1)),n[6]||(n[6]=(0,i.Lk)("div",{class:"text-body2 text-grey-7"}," Voer het emailadres en de naam van je vriend in om een uitnodiging te versturen. ",-1))]),(0,i.bF)(p,{class:"q-gutter-md",onSubmit:o.sendFriendRequest},{default:(0,i.k6)(()=>[(0,i.bF)(c,{modelValue:o.form.email,"onUpdate:modelValue":n[1]||(n[1]=e=>o.form.email=e),rules:[e=>!!e||"Emailadres is verplicht",e=>o.isValidEmail(e)||"Voer een geldig emailadres in"],autofocus:"",dense:"",label:"Emailadres *",outlined:"",type:"email"},{prepend:(0,i.k6)(()=>[(0,i.bF)(g,{name:"email"})]),_:1},8,["modelValue","rules"]),(0,i.bF)(c,{modelValue:o.form.name,"onUpdate:modelValue":n[2]||(n[2]=e=>o.form.name=e),rules:[e=>!!e||"Naam is verplicht"],dense:"",label:"Naam *",outlined:""},{prepend:(0,i.k6)(()=>[(0,i.bF)(g,{name:"person"})]),_:1},8,["modelValue","rules"]),(0,i.Lk)("div",r,[(0,i.bF)(u,{disable:!o.form.email||!o.form.name,loading:o.sendingRequest,class:"q-px-xl",color:"primary",label:"Uitnodiging Versturen",size:"md",type:"submit"},{loading:(0,i.k6)(()=>[(0,i.bF)(v,{class:"on-left"}),n[7]||(n[7]=(0,i.eW)(" Versturen... ",-1))]),_:1},8,["disable","loading"])])]),_:1},8,["onSubmit"]),(0,i.bF)(b,{bordered:"",class:"q-mt-lg q-pa-md bg-blue-1",flat:""},{default:(0,i.k6)(()=>[(0,i.Lk)("div",l,[(0,i.bF)(g,{class:"q-mr-xs",name:"info"}),n[8]||(n[8]=(0,i.eW)(" Tips ",-1))]),n[9]||(n[9]=(0,i.Lk)("ul",{class:"text-body2 text-blue-9 q-ma-none q-pl-md"},[(0,i.Lk)("li",null,"Als je vriend al een account heeft, ontvangt hij/zij direct een vriendschapsverzoek"),(0,i.Lk)("li",null,"Als je vriend nog geen account heeft, wordt er een uitnodiging per email verstuurd"),(0,i.Lk)("li",null,"Je kunt alleen mensen uitnodigen die nog niet in je vriendenlijst staan")],-1))]),_:1})]),_:1})}var d=s(5124),m=s(4004),u=s(3394);const g={name:"FriendsSearch",setup(){const e=(0,m.A)(),n=(0,u.rd)(),{proxy:s}=(0,i.nI)(),a=(0,d.KR)(!1),t=(0,d.KR)({email:"",name:""}),r=e=>{const n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return n.test(e)},l=async()=>{if(t.value.email&&t.value.name&&r(t.value.email)){a.value=!0;try{const i=await s.$axios.post("golfer/friend-request",{email:t.value.email,name:t.value.name});if(console.log(i),!i||!i.success)throw new Error("Onverwacht response format");{let s,a;"existing_user"===i.type?(s="Vriendschapsverzoek verzonden!",a=`Een vriendschapsverzoek is verzonden naar ${t.value.name}.`):"email_invitation"===i.type?(s="Uitnodiging verzonden!",a=`Een uitnodiging is per email verzonden naar ${t.value.email}.`):(s="Uitnodiging verzonden!",a="Je vriendschapsverzoek is succesvol verzonden."),e.notify({type:"positive",message:s,timeout:3e3}),setTimeout(()=>{n.push("/friends")},1500)}}catch(i){console.error("Error sending friend request:",i);let n="Er is een fout opgetreden bij het verzenden van de uitnodiging.";i.response?.data?.message?n=i.response.data.message:422===i.response?.status?n="De ingevoerde gegevens zijn niet geldig.":409===i.response?.status&&(n="Deze persoon is al een vriend of er is al een verzoek verzonden."),e.notify({type:"negative",message:n,timeout:4e3})}finally{a.value=!1}}};return{sendingRequest:a,form:t,isValidEmail:r,sendFriendRequest:l}}};var c=s(6317),v=s(2507),p=s(3178),b=s(8219),f=s(8767),k=s(7316),q=s(8159),h=s(4483),y=s(1082),z=s.n(y);const x=(0,c.A)(g,[["render",o],["__scopeId","data-v-89b3e10e"]]),_=x;z()(g,"components",{QPage:v.A,QBtn:p.A,QIcon:b.A,QForm:f.A,QInput:k.A,QSpinnerHourglass:q.A,QCard:h.A})}}]);