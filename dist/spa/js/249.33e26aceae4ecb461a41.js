"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[249],{1701:(e,s,l)=>{l.d(s,{A:()=>h});var o=l(2852),t=l(3100),n=l(9006);const a={class:"q-mt-xl text-center"};function r(e,s,l,r,i,p){const u=(0,o.g2)("q-btn");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,t.C4)(["q-mt-xl text-h5 text-center",i.emotion])},(0,t.v_)(i.text),3),(0,o.bo)((0,o.Lk)("div",{class:"q-mt-xl text-subtitle1 text-center"},(0,t.v_)(i.subText),513),[[n.aG,i.subText]]),(0,o.bo)((0,o.Lk)("div",a,[(0,o.bF)(u,{label:"Sluiten",onClick:p.onClose},null,8,["onClick"])],512),[[n.aG,"open"!==i.status]])])}const i={props:{id:{type:[String],default:null},url:{type:[String],default:null},textPaid:{type:[String],default:"Het betaalverzoek is verwerkt"},textFailed:{type:[String],default:"Het betaalverzoek is mislukt"},textExpired:{type:[String],default:"Het betaalverzoek is verlopen"},textHalted:{type:[String],default:"Het betaalverzoek is afgebroken"},subTextPaid:{type:[String],default:""},subTextFailed:{type:[String],default:""},subTextExpired:{type:[String],default:""},subTextHalted:{type:[String],default:""}},data(){return{status:"open",counter:0,maxCount:30,text:"Betaling wordt verwerkt",subText:"",emotion:"text-positive"}},created:function(){this.openWindow(this.url),this.handleStatusLoop()},methods:{openWindow:function(e){let s=window.open(e,"_blank");s||(window.location=e)},handleStatusLoop:function(){let e=this;this.counter<this.maxCount&&"open"===this.status?(this.counter++,e.handleStatusCheck(),window.setTimeout((function(){e.handleStatusLoop()}),2e3)):this.handlePaymentDone()},handlePaymentDone:function(){"expired"===this.status?(this.emotion="text-warning",this.text=this.textExpired,this.subText=this.subTextExpired):"failed"===this.status?(this.emotion="text-warning",this.text=this.textFailed,this.subText=this.subTextFailed):"paid"===this.status?(this.text=this.textPaid,this.subText=this.subTextPaid):(this.emotion="text-warning",this.text=this.textHalted,this.subText=this.subTextHalted)},onClose(){this.$emit("handleCloseSubscribe",this.status)},handleStatusCheck:function(){let e=this;this.$http.get(`golfer/payment/status/${this.id}`).then((s=>{e.status=s.opmStatus,e.isDesktop=s.opmIsDesktop}))}}};var p=l(6317),u=l(3178),c=l(1082),d=l.n(c);const m=(0,p.A)(i,[["render",r]]),h=m;d()(i,"components",{QBtn:u.A})},4249:(e,s,l)=>{l.r(s),l.d(s,{default:()=>rs});var o=l(2852);const t={key:0},n={key:1,class:"text-h5 q-mt-xl q-mb-lg text-center"};function a(e,s,l,a,r,i){const p=(0,o.g2)("comp-filter"),u=(0,o.g2)("comp-pros"),c=(0,o.g2)("comp-book"),d=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(d,{class:"q-pa-md"},{default:(0,o.k6)((()=>[null===e.lesson?((0,o.uX)(),(0,o.CE)("div",t,[(0,o.bF)(p,{date:e.date,lessonType:e.lessonType,onUpdateDate:i.updateDate,onUpdateLessonType:i.updateLessonType,onUpdatePer:i.updatePer},null,8,["date","lessonType","onUpdateDate","onUpdateLessonType","onUpdatePer"]),i.hasLessons?((0,o.uX)(),(0,o.Wv)(u,{key:0,lessonType:e.lessonType,lessons:e.lessonArray,per:e.per,onHandleBook:i.handleBook},null,8,["lessonType","lessons","per","onHandleBook"])):((0,o.uX)(),(0,o.CE)("div",n,s[0]||(s[0]=[(0,o.eW)(" Geen lessen gevonden voor vandaag"),(0,o.Lk)("br",null,null,-1),(0,o.eW)(" kies een andere datum ")])))])):((0,o.uX)(),(0,o.Wv)(c,{key:1,date:e.date,lesson:e.lesson,onHandleBack:i.handleBack,onHandleClose:i.handleClose},null,8,["date","lesson","onHandleBack","onHandleClose"]))])),_:1})}const r={class:"row q-mb-md"},i={class:"col-6 q-pr-md"},p={class:"col-6 q-mt-md"},u={class:"col-6 q-pr-md"},c={class:"col-6 q-pr-md"};function d(e,s,l,t,n,a){const d=(0,o.g2)("q-input"),m=(0,o.g2)("q-btn"),h=(0,o.g2)("q-btn-group"),b=(0,o.g2)("q-select");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",i,[(0,o.bF)(d,{modelValue:e.localDate,"onUpdate:modelValue":s[0]||(s[0]=s=>e.localDate=s),label:"Datum",type:"date"},null,8,["modelValue"])]),(0,o.Lk)("div",p,[(0,o.bF)(h,{flat:"",outline:"",spread:""},{default:(0,o.k6)((()=>[(0,o.bF)(m,{label:"dag -",onClick:s[1]||(s[1]=e=>a.setDay(-1))}),(0,o.bF)(m,{label:"dag +",onClick:s[2]||(s[2]=e=>a.setDay(1))})])),_:1})]),(0,o.Lk)("div",u,[(0,o.bF)(b,{modelValue:e.localLessonType,"onUpdate:modelValue":s[3]||(s[3]=s=>e.localLessonType=s),options:e.typeArray,label:"Lessoort","option-label":"pltName","option-value":"pltNr",size:"sm","toggle-color":"primary"},null,8,["modelValue","options"])]),(0,o.Lk)("div",c,[(0,o.bF)(b,{modelValue:e.per,"onUpdate:modelValue":s[4]||(s[4]=s=>e.per=s),options:e.perArray,label:"Periode",size:"sm","toggle-color":"primary"},null,8,["modelValue","options"])])])}const m={props:{date:String},data:function(){return{localDate:this.date,localLessonType:null,typeArray:[],perArray:[{label:"Dag",value:1},{label:"Ochtend",value:2},{label:"Middag",value:3},{label:"Avond",value:4}],per:{value:1,label:"Dag"}}},watch:{date:function(e){this.localDate=e},localDate:function(e){this.$emit("updateDate",e)},localLessonType:function(e){this.$emit("updateLessonType",e)},per:function(e){this.$emit("updatePer",e)}},methods:{setDay:function(e){this.localDate=this.$dayjs(this.localDate).add(e,"days").format("YYYY-MM-DD"),this.$emit("updateDate",this.localDate)}},created(){this.$http.get("public/lessonTypes").then((e=>{this.typeArray=e,this.localLessonType=this.typeArray[0]}))}};var h=l(6317),b=l(7316),f=l(54),v=l(3178),g=l(2013),L=l(1082),y=l.n(L);const k=(0,h.A)(m,[["render",d]]),T=k;y()(m,"components",{QInput:b.A,QBtnGroup:f.A,QBtn:v.A,QSelect:g.A});var P=l(3100);const C={class:"row"},x={class:"col hide-scrollbar",style:{"overflow-x":"scroll"}};function q(e,s,l,t,n,a){const r=(0,o.g2)("pro");return(0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",x,[(0,o.Lk)("div",{style:(0,P.Tr)({width:a.colWidth}),class:"row q-gutter-sm"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.proArray,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"col"},[(0,o.bF)(r,{lessonType:l.lessonType,lessons:l.lessons,per:l.per,pro:e,onHandleBook:a.handleBook},null,8,["lessonType","lessons","per","pro","onHandleBook"])])))),128))],4)])])}l(8251),l(7089);const F={class:"row"},_={class:"col q-pt-sm text-bold text-center"},w={class:"absolute-bottom text-center"},V={class:"row hide-scrollbar",style:{"overflow-y":"scroll"}};function A(e,s,l,t,n,a){const r=(0,o.g2)("q-img"),i=(0,o.g2)("comp-lessons");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",F,[(0,o.Lk)("div",_,[(0,o.bF)(r,{fit:"cover",src:e.image,style:{"max-width":"180px",height:"150px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",w,(0,P.v_)(l.pro.full_name2),1)])),_:1},8,["src"])])]),(0,o.Lk)("div",V,[(0,o.bF)(i,{lessonType:l.lessonType,lessons:l.lessons,per:l.per,pro:l.pro,onHandleBook:a.handleBook},null,8,["lessonType","lessons","per","pro","onHandleBook"])])])}const S=["onClick"];function E(e,s,l,t,n,a){const r=(0,o.g2)("lesson");return(0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.lessonFilter,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"full-width text-left",onClick:s=>a.handleBook(e)},[(0,o.bF)(r,{lesson:e},null,8,["lesson"])],8,S)))),128)}l(3165);const D={class:"col"},N={class:"row"},$={class:"col"},B={class:"float-left"},X={class:"float-right"};function R(e,s,l,t,n,a){return(0,o.uX)(),(0,o.CE)("div",{class:(0,P.C4)([a.bg,"row full-width q-mt-md q-pa-sm"])},[(0,o.Lk)("div",D,[(0,o.Lk)("div",N,[(0,o.Lk)("div",$,[(0,o.Lk)("b",B,(0,P.v_)(e.$filters.minuteToTime(l.lesson.pagTimeFrom)),1),(0,o.Lk)("i",X,"v.a. "+(0,P.v_)(a.price),1)])])])],2)}const z={props:{lesson:Object},watch:{lesson:function(e){}},computed:{max:function(){return this.lesson.pro_lesson_type.pltMaxPers},players:function(){return this.lesson.pagGolfers},slots:function(){return this.max-this.lesson.pagGolfers},price:function(){return console.log(this.lesson.pro_lesson_fee_les[0].lfpPrice),this.$filters.money(this.lesson.pro_lesson_fee_les[0].lfpPrice)},bg:function(){return this.players/this.max>.5?"bg-orange-3":"bg-green-3"}}},O=(0,h.A)(z,[["render",R]]),Q=O,U={components:{Lesson:Q},props:{pro:Object,lessons:Array,per:Object,lessonType:Object},computed:{from:function(){let e=240;return 3===this.per.value?e=720:4===this.per.value&&(e=1080),e},to:function(){let e=1439;return 2===this.per.value?e=720:3===this.per.value&&(e=1080),e},lessonFilter:function(){if(void 0===this.lessons)return[];let e=this.lessons.filter((e=>e.pro.relNr===this.pro.relNr));return e=Object.values(e).filter((e=>e.pagTimeFrom>=this.from&&e.pagTimeFrom+e.pro_lesson_type.pltDuration+e.pro_lesson_type.pltBefore+e.pro_lesson_type.pltAfter<=this.to)),e}},methods:{handleBook:function(e){this.$emit("handleBook",e)},handleClose:function(){}}},j=(0,h.A)(U,[["render",E]]),M=j,H={components:{compLessons:M},props:{pro:Object,lessons:Array,per:Object,lessonType:Object},data:function(){return{image:null}},mounted(){this.$http.get("public/image?name="+this.pro.proImage).then((e=>{this.image="data:image/png;base64,"+e}))},methods:{handleBook:function(e){this.$emit("handleBook",e)}}};var W=l(24);const I=(0,h.A)(H,[["render",A]]),G=I;y()(H,"components",{QImg:W.A});const Y={props:{lessons:Array,per:Object,lessonType:Object},components:{Pro:G},computed:{colWidth:function(){return 180*this.proArray.length+"px"},proArray:function(){if(void 0===this.lessons)return[];let e=[];return this.lessons.reduce(((s,l)=>(e.includes(l.pro.relNr)||(e.push(l.pro.relNr),s.push(l.pro)),s)),[])}},methods:{handleBook:function(e){this.$emit("handleBook",e)}}},K=(0,h.A)(Y,[["render",q]]),Z=K;var J=l(9006);const ee={class:"row text-center q-mb-lg"},se={class:"col q-ml-auto q-mr-auto"};function le(e,s,l,t,n,a){const r=(0,o.g2)("public-lesson-details"),i=(0,o.g2)("public-lesson-pricing"),p=(0,o.g2)("public-lesson-register"),u=(0,o.g2)("public-lesson-confirm"),c=(0,o.g2)("payment"),d=(0,o.g2)("q-btn");return(0,o.uX)(),(0,o.CE)("div",null,[[1,2,3].includes(n.step)?((0,o.uX)(),(0,o.Wv)(r,{key:0,ProLesson:n.ProLesson,step:n.step},null,8,["ProLesson","step"])):(0,o.Q3)("",!0),1===n.step?((0,o.uX)(),(0,o.Wv)(i,{key:1,fee:n.ProLesson.fee,lesson:l.lesson,onSetFee:a.setFee},null,8,["fee","lesson","onSetFee"])):2===n.step?((0,o.uX)(),(0,o.Wv)(p,{key:2,ref:"lessonRegister",lesson:l.lesson,proLesson:n.ProLesson,tab:n.personTab,onSetTab:a.setTab},null,8,["lesson","proLesson","tab","onSetTab"])):3===n.step?((0,o.uX)(),(0,o.Wv)(u,{key:3,lesson:l.lesson,paymentOptions:n.paymentOptions,proLesson:n.ProLesson},null,8,["lesson","paymentOptions","proLesson"])):(0,o.Q3)("",!0),null!==n.mollie?((0,o.uX)(),(0,o.Wv)(c,{key:4,id:n.mollie.opmKey,url:n.mollie.url,onHandleCloseSubscribe:a.onCloseMollie},null,8,["id","url","onHandleCloseSubscribe"])):(0,o.Q3)("",!0),(0,o.Lk)("div",ee,[(0,o.Lk)("div",se,[(0,o.bo)((0,o.bF)(d,{class:"q-mr-sm",color:"primary",label:"Andere datum",onClick:a.onReload},null,8,["onClick"]),[[J.aG,1===n.step]]),(0,o.bo)((0,o.bF)(d,{class:"q-mr-sm",color:"primary",label:"Terug",onClick:s[0]||(s[0]=e=>n.step--)},null,512),[[J.aG,[2,3].includes(n.step)]]),(0,o.bo)((0,o.bF)(d,{class:"q-mr-sm",color:"primary",label:"Deelnemers",onClick:a.onDeelnemers},null,8,["onClick"]),[[J.aG,1===n.step]]),(0,o.bo)((0,o.bF)(d,{label:a.labelRegister,class:"q-mr-sm",color:"primary",onClick:a.onRegisterRelation},null,8,["label","onClick"]),[[J.aG,2===n.step]]),(0,o.bo)((0,o.bF)(d,{label:a.confirmButtonLabel,class:"q-mr-sm",color:"primary",onClick:a.handleSave},null,8,["label","onClick"]),[[J.aG,3===n.step]])])])])}l(3529);const oe={key:0},te={class:"row"},ne={class:"col-8"},ae={class:"col-3"},re={key:1},ie={class:"text-h6"};function pe(e,s,l,t,n,a){const r=(0,o.g2)("q-separator"),i=(0,o.g2)("q-tab"),p=(0,o.g2)("q-tabs"),u=(0,o.g2)("q-input"),c=(0,o.g2)("q-tab-panel"),d=(0,o.g2)("q-tab-panels"),m=(0,o.g2)("q-form");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(r,{class:"q-mb-md q-mt-md"}),s[9]||(s[9]=(0,o.Lk)("div",{class:"q-mb-sm"},"Voer de gegevens van de les deelnemers in",-1)),(0,o.bF)(p,{modelValue:n.localTab,"onUpdate:modelValue":[s[0]||(s[0]=e=>n.localTab=e),a.checkForm],dense:"","indicator-color":"green","inline-label":""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.proLesson.ProLessonClient,((e,s)=>((0,o.uX)(),(0,o.Wv)(i,{key:s,label:a.getTabName(s),name:"person"+s,icon:"person"},null,8,["label","name"])))),128))])),_:1},8,["modelValue","onUpdate:modelValue"]),(0,o.bF)(m,{ref:"formRelation"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:n.localTab,"onUpdate:modelValue":s[6]||(s[6]=e=>n.localTab=e)},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.proLesson.ProLessonClient,((e,l)=>((0,o.uX)(),(0,o.Wv)(c,{key:l,name:"person"+l,class:"q-pa-none q-pt-md"},{default:(0,o.k6)((()=>[0===l?((0,o.uX)(),(0,o.CE)("div",oe,[s[8]||(s[8]=(0,o.Lk)("div",{class:"text-h6"},"Jouw gegevens",-1)),(0,o.Lk)("div",te,[(0,o.Lk)("div",ne,[(0,o.bF)(u,{modelValue:n.relation.relCallName,"onUpdate:modelValue":s[1]||(s[1]=e=>n.relation.relCallName=e),rules:[e=>!!e||"* Required"],class:"q-mb-sm",dense:"",label:"Voornaam","lazy-rules":""},null,8,["modelValue","rules"])]),s[7]||(s[7]=(0,o.Lk)("div",{class:"col-1"}," ",-1)),(0,o.Lk)("div",ae,[(0,o.bF)(u,{modelValue:n.relation.relPrefix,"onUpdate:modelValue":s[2]||(s[2]=e=>n.relation.relPrefix=e),class:"q-mb-lg",dense:"",label:"Tussenvoegsel"},null,8,["modelValue"])])]),(0,o.bF)(u,{modelValue:n.relation.relName,"onUpdate:modelValue":s[3]||(s[3]=e=>n.relation.relName=e),rules:[e=>!!e||"* Required"],class:"q-mb-sm",dense:"",label:"Achternaam","lazy-rules":""},null,8,["modelValue","rules"]),(0,o.bF)(u,{modelValue:n.relation.relEmail,"onUpdate:modelValue":s[4]||(s[4]=e=>n.relation.relEmail=e),rules:[n.emailRule],class:"q-mb-sm",dense:"",label:"E-mailadres","lazy-rules":""},null,8,["modelValue","rules"]),(0,o.bF)(u,{modelValue:n.relation.relPhoneMobile,"onUpdate:modelValue":s[5]||(s[5]=e=>n.relation.relPhoneMobile=e),rules:[e=>!!e||"* Required"],class:"q-mb-lg",dense:"",label:"Telefoonummer","lazy-rules":"",mask:"###############"},null,8,["modelValue","rules"])])):((0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("div",ie,"Deelnemer "+(0,P.v_)(l+1),1),(0,o.bF)(u,{modelValue:e.plcName,"onUpdate:modelValue":s=>e.plcName=s,rules:[e=>!!e||"* Required"],class:"q-mb-sm",dense:"",label:"Naam","lazy-rules":""},null,8,["modelValue","onUpdate:modelValue","rules"]),(0,o.bF)(u,{modelValue:e.plcEmail,"onUpdate:modelValue":s=>e.plcEmail=s,rules:[n.emailRule],class:"q-mb-sm",dense:"",label:"E-mailadres","lazy-rules":""},null,8,["modelValue","onUpdate:modelValue","rules"])]))])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1},512)])}const ue={name:"publicLessonRegister",props:{lesson:Object,proLesson:Object,tab:String},data(){return{prevTab:"person0",localTab:this.tab,relation:{relName:"luder",relPrefix:"",relCallName:"laurens",relGender:1,relEmail:"laurens@intogolf.nl",relPhoneMobile:"06110457700"},emailRule:e=>/.+@.+\..+/.test(e)||"Voer een geldig e-mailadres in",numberRule:e=>{const s=parseFloat(e.replace(",","."));return!isNaN(s)&&s>=-9.9&&s<=54||"Voer een geldig nummer in tussen -9,9 en 54"}}},watch:{tab(e){this.localTab!==e&&(this.localTab=e,this.checkForm(this.localTab))}},methods:{getTabName(e){return e+1},checkForm(e){const s=parseInt(this.prevTab.substring(6,7)),l=parseInt(this.localTab.substring(6,7));if(l-s>1)this.localTab=this.prevTab;else{if("person1"===e&&(!this.relation.relName||!this.relation.relCallName||!this.relation.relEmail||!this.relation.relPhoneMobile))return this.$q.notify({type:"negative",message:"Vul alle velden in!",position:"center",timeout:100}),void(this.localTab="person0");if("person2"===e&&(!this.proLesson.ProLessonClient[1].plcName||!this.proLesson.ProLessonClient[1].plcEmail))return this.$q.notify({type:"negative",message:"Vul alle velden in!",position:"center",timeout:100}),void(this.localTab="person1");if("person3"===e&&(!this.proLesson.ProLessonClient[2].plcName||!this.proLesson.ProLessonClient[2].plcEmail))return this.$q.notify({type:"negative",message:"Vul alle velden in!",position:"center",timeout:100}),void(this.localTab="person2");if("person4"===e&&(!this.proLesson.ProLessonClient[3].plcName||!this.proLesson.ProLessonClient[3].plcEmail))return this.$q.notify({type:"negative",message:"Vul alle velden in!",position:"center",timeout:100}),void(this.localTab="person3");this.$emit("setTab",this.localTab),this.prevTab=this.localTab}}}};var ce=l(1177),de=l(2979),me=l(5415),he=l(8767),be=l(3472),fe=l(6565);const ve=(0,h.A)(ue,[["render",pe]]),ge=ve;y()(ue,"components",{QSeparator:ce.A,QTabs:de.A,QTab:me.A,QForm:he.A,QTabPanels:be.A,QTabPanel:fe.A,QInput:b.A});const Le={key:0,class:"row q-pa-sm"},ye={key:0,class:"col-12"};function ke(e,s,l,t,n,a){const r=(0,o.g2)("q-separator"),i=(0,o.g2)("q-option-group");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(r,{class:"q-mb-md"}),null!==l.lesson.pro_lesson_fee_player?((0,o.uX)(),(0,o.CE)("div",Le,[s[1]||(s[1]=(0,o.Lk)("div",{class:"col-12"},"Kies je tarief:",-1)),a.feeOptions.length>1?((0,o.uX)(),(0,o.CE)("div",ye,[(0,o.bF)(i,{modelValue:n.localFee,"onUpdate:modelValue":s[0]||(s[0]=e=>n.localFee=e),options:a.feeOptions,type:"radio"},null,8,["modelValue","options"])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])}const Te={name:"publicLessonPricing",props:{lesson:Object,fee:Object},data(){return{localFee:this.fee}},mounted(){null===this.localFee&&(this.localFee=this.feeOptions[0].value)},computed:{feeOptions(){return this.lesson.pro_lesson_fee_les.map((e=>{let s=1===e.lfpSizeTo?" persoon ":" personen ",l=e.lfpSizeFrom;return e.lfpSizeFrom!==e.lfpSizeTo&&(l+=" tot "+e.lfpSizeTo),{label:l+s+this.$filters.money(e.lfpPrice),value:e}}))}},watch:{localFee(){this.$emit("setFee",this.localFee)}}};var Pe=l(8615);const Ce=(0,h.A)(Te,[["render",ke]]),xe=Ce;y()(Te,"components",{QSeparator:ce.A,QOptionGroup:Pe.A});const qe={class:"row q-pa-sm",style:{border:"1px solid lightgrey",height:"150px","font-size":"10px","overflow-y":"scroll"}},Fe={class:"row q-mt-md"},_e={class:"row"};function we(e,s,l,t,n,a){const r=(0,o.g2)("q-separator"),i=(0,o.g2)("q-option-group"),p=(0,o.g2)("q-checkbox");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(r,{class:"q-mt-md q-mb-md"}),s[3]||(s[3]=(0,o.Lk)("div",{class:"text-h6"},"Hoe wil je betalen?",-1)),(0,o.bF)(i,{modelValue:n.localProLesson.payMethod,"onUpdate:modelValue":s[0]||(s[0]=e=>n.localProLesson.payMethod=e),options:l.paymentOptions},null,8,["modelValue","options"]),(0,o.bF)(r,{class:"q-mt-md q-mb-md"}),s[4]||(s[4]=(0,o.Lk)("div",{class:"row text-h6"},"Leveringsvoorwaarden:",-1)),(0,o.Lk)("div",qe,(0,P.v_)(e.conditions),1),(0,o.Lk)("div",Fe,[(0,o.bF)(p,{modelValue:n.localProLesson.agreeConditions,"onUpdate:modelValue":s[1]||(s[1]=e=>n.localProLesson.agreeConditions=e),rules:[e=>!!e||"* Required"],class:"q-mb-sm",label:"Ik ga akkoord met de leveringsvoorvaarden","stack-label":""},null,8,["modelValue","rules"])]),(0,o.Lk)("div",_e,[(0,o.bF)(p,{modelValue:n.localProLesson.agreeCommerce,"onUpdate:modelValue":s[2]||(s[2]=e=>n.localProLesson.agreeCommerce=e),rules:[e=>!!e||"* Required"],class:"q-mb-sm",label:"Stuur mij aanbiedingen","stack-label":""},null,8,["modelValue","rules"])])])}const Ve={name:"publicLessonConfirm",props:{date:String,lesson:Object,proLesson:Object,paymentOptions:Array},data(){return{localProLesson:this.proLesson}}};var Ae=l(3203);const Se=(0,h.A)(Ve,[["render",we]]),Ee=Se;y()(Ve,"components",{QSeparator:ce.A,QOptionGroup:Pe.A,QCheckbox:Ae.A});const De={class:"row q-pa-sm bg-green-1"},Ne={class:"col-8"},$e={class:"row q-pa-sm"},Be={class:"col-8"},Xe={class:"row q-pa-sm bg-green-1"},Re={class:"col-8"},ze={class:"row q-pa-sm"},Oe={class:"col-8"},Qe={key:0,class:"row q-pa-sm bg-green-1"},Ue={class:"col-8"},je={key:1},Me={key:0,class:"row q-pa-sm"},He={class:"col-8"},We={key:0,class:"row q-pa-sm"},Ie={class:"col-4 text-bold"},Ge={class:"col-8"};function Ye(e,s,l,t,n,a){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",De,[s[0]||(s[0]=(0,o.Lk)("div",{class:"col-4 text-bold"},"Datum:",-1)),(0,o.Lk)("div",Ne,(0,P.v_)(e.$dayjs(l.ProLesson.lesDate).format("dddd D MMMM")),1)]),(0,o.Lk)("div",$e,[s[1]||(s[1]=(0,o.Lk)("div",{class:"col-4 text-bold"},"Tijd:",-1)),(0,o.Lk)("div",Be,(0,P.v_)(e.$filters.minuteToTime(l.ProLesson.lesBlockedFrom)),1)]),(0,o.Lk)("div",Xe,[s[2]||(s[2]=(0,o.Lk)("div",{class:"col-4 text-bold"},"Les soort:",-1)),(0,o.Lk)("div",Re,(0,P.v_)(l.ProLesson.pro_lesson_type.pltName),1)]),(0,o.Lk)("div",ze,[s[3]||(s[3]=(0,o.Lk)("div",{class:"col-4 text-bold"},"Pro:",-1)),(0,o.Lk)("div",Oe,(0,P.v_)(l.ProLesson.pro.full_name2),1)]),l.ProLesson.fee?((0,o.uX)(),(0,o.CE)("div",Qe,[s[4]||(s[4]=(0,o.Lk)("div",{class:"col-4 text-bold"},"Tarief:",-1)),(0,o.Lk)("div",Ue,(0,P.v_)(a.fee),1)])):(0,o.Q3)("",!0),3===l.step?((0,o.uX)(),(0,o.CE)("div",je,[l.ProLesson.relation?((0,o.uX)(),(0,o.CE)("div",Me,[s[7]||(s[7]=(0,o.Lk)("div",{class:"col-4 text-bold"},"Jouw gegevens:",-1)),(0,o.Lk)("div",He,[(0,o.eW)((0,P.v_)(l.ProLesson.relation.relCallName)+" "+(0,P.v_)(l.ProLesson.relation.relPrefix)+" "+(0,P.v_)(l.ProLesson.relation.relName),1),s[5]||(s[5]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" "+(0,P.v_)(l.ProLesson.relation.relEmail),1),s[6]||(s[6]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" "+(0,P.v_)(l.ProLesson.relation.relMo),1)])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.ProLesson.ProLessonClient,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[l>0?((0,o.uX)(),(0,o.CE)("div",We,[(0,o.Lk)("div",Ie,"Deelnemer "+(0,P.v_)(l+1)+":",1),(0,o.Lk)("div",Ge,[(0,o.eW)((0,P.v_)(e.plcName),1),s[8]||(s[8]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" "+(0,P.v_)(e.plcEmail),1)])])):(0,o.Q3)("",!0)])))),128))])):(0,o.Q3)("",!0)])}const Ke={name:"publicLessonDetails",props:{ProLesson:Object,step:Number},computed:{fee(){const e=this.ProLesson.fee;let s=1===e.lfpSizeTo?" persoon ":" personen ",l=e.lfpSizeFrom;return e.lfpSizeFrom!==e.lfpSizeTo&&(l+=" tot "+e.lfpSizeTo),l+s+this.$filters.money(e.lfpPrice)}}},Ze=(0,h.A)(Ke,[["render",Ye]]),Je=Ze;var es=l(1701);const ss={components:{Payment:es.A,PublicLessonDetails:Je,PublicLessonConfirm:Ee,PublicLessonPricing:xe,PublicLessonRegister:ge},props:{date:String,lesson:Array},data(){return{step:1,personTab:"person0",paymentOptions:[{label:"Op de baan",value:"onCourse"},{label:"via iDeal met 10% korting",value:"iDeal"}],mollie:null,ProLesson:{lesDate:this.date,lesBlockedFrom:this.lesson.pagTimeFrom,lesBlockedTo:null,lesPltNr:null,lesRelNrPro:null,lesSize:null,lesLsfNr:null,lesPrice:null,lesItmNr:null,fee:null,agreeConditions:!0,agreeCommerce:!1,pro_lesson_type:this.lesson.pro_lesson_type,pro:this.lesson.pro,relation:null,payMethod:"onCourse",ProLessonClient:{plcName:"laurens",plcPhone:"0172617000",plcEmail:"laurens+331@intogolf.nl"}}}},mounted(){this.ProLesson.fee=this.feeOptions[0].value},computed:{confirmButtonLabel(){return"onCourse"===this.ProLesson.payMethod?"Reseveren":"Betalen"},feeOptions(){return this.lesson.pro_lesson_fee_les.map((e=>{let s=1===e.lfpSizeTo?" persoon ":" personen ",l=e.lfpSizeFrom;return e.lfpSizeFrom!==e.lfpSizeTo&&(l+=" tot "+e.lfpSizeTo),{label:l+s+this.$filters.money(e.lfpPrice),value:e}}))},conditions:function(){return null===this.$store.state.settings?"":this.$store.state.settings.item.website_payment_conditions},valid:function(){const e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return this.ProLesson.ProLessonClient.plcName.length>3&&this.ProLesson.ProLessonClient.agreeConditions&&e.test(this.ProLesson.ProLessonClient.plcEmail)},labelRegister(){const e="person"+(this.ProLesson.ProLessonClient.length-1);return e!==this.personTab?"Volgende":"Bevestig"}},methods:{async handleSave(){let e=this.ProLesson;e.lesDate=this.$filters.dateToUnix(this.date,"YYYY-MM-DD"),e.lesBlockedFrom=this.lesson.pagTimeFrom,e.lesPltNr=this.lesson.pro_lesson_type.pltNr,e.lesRelNrPro=this.lesson.pro.relNr,e.ProLessonClient.plcLsfNr=this.lesson.pro_lesson_fee_les[0].lfpNr,e.ProLessonClient.plcPrice=this.lesson.pro_lesson_fee_les[0].lfpPrice,e.ProLessonClient.plcItmNr=this.lesson.pro_lesson_fee_les[0].lfpItmNr;let s=await this.$http.post("public/lesson",e);"iDeal"===e.payMethod&&(this.mollie=s.data),this.step=4},handleBack:function(){this.$emit("handleBack")},handleClosePayment:function(){this.$emit("handleClose")},async onSaveRelation(){await this.$http.post("/api/publicLesson/relation",this.relation)},async onRegisterRelation(){if("Volgende"===this.labelRegister){const e=parseInt(this.personTab.substring(6,7));return void(this.personTab="person"+(e+1))}const e=await this.onCheckRelationForm(),s=await this.onSetRelation();e&&s&&this.step++},async onCheckRelationForm(){const e=this.$refs.lessonRegister.$refs.formRelation;return!!e&&await e.validate()},async onSetRelation(){let e=await this.$http.post("public/lesson/relation",this.$refs.lessonRegister.relation);return this.ProLesson.relation=this.$refs.lessonRegister.relation,"ok"===e.data},setFee(e){this.ProLesson.ProLessonClient=[];for(let s=0;s<e.lfpSizeTo;s++)this.ProLesson.ProLessonClient.push({plcName:"test",plcPhone:"",plcEmail:"test@intogolf.nl",plcHandicap:"10"});this.ProLesson.fee=e},onReload(){window.location.reload()},setTab(e){this.personTab=e},onDeelnemers(){this.personTab="person0",this.step++},onCloseMollie(e){this.mollie=null,"paid"===e?this.onReload():this.step=3}}},ls=(0,h.A)(ss,[["render",le]]),os=ls;y()(ss,"components",{QBtn:v.A});const ts={components:{compPros:Z,compFilter:T,compBook:os},data:function(){return{date:null,lessonType:null,lessonArray:[],per:{value:1,label:"Dag"},step:1,lesson:null}},watch:{date:function(){this.handleLoad()},lessonType:function(){this.handleLoad()}},created(){console.log("open public lessons"),this.date=this.$dayjs().format("YYYY-MM-DD")},computed:{hasLessons(){return console.log(this.lessonArray),this.lessonArray.length>0}},methods:{handleLoad:function(){null!==this.date&&null!==this.lessonType&&this.$http.get("public/lessons?date="+this.date+"&pltNr="+this.lessonType.pltNr).then((e=>{this.lessonArray=e}))},updateDate:function(e){this.date=e},updateLessonType:function(e){this.lessonType=e},updatePer:function(e){this.per=e},handleBook:function(e){this.lesson=e},handleClose:function(){this.lesson=null},handleBack:function(){this.lesson=null}}};var ns=l(2507);const as=(0,h.A)(ts,[["render",a]]),rs=as;y()(ts,"components",{QPage:ns.A})}}]);