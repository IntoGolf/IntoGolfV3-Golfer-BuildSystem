"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[179],{179:(t,s,e)=>{e.r(s),e.d(s,{default:()=>P});var r=e(2852),i=e(3100);const a={class:"row q-mb-sm"},o={class:"col"},l={class:"row calendar-row"},h={class:"hour-col"},n={key:0,class:"hour-label"};function u(t,s,e,u,m,d){const c=(0,r.g2)("q-input"),p=(0,r.g2)("q-separator"),y=(0,r.g2)("calendar-loop"),T=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(T,{class:"q-pa-sm"},{default:(0,r.k6)(()=>[(0,r.Lk)("div",a,[(0,r.Lk)("div",o,[(0,r.bF)(c,{modelValue:m.date,"onUpdate:modelValue":s[0]||(s[0]=t=>m.date=t),filled:"",type:"date"},null,8,["modelValue"])])]),(0,r.Lk)("div",l,[(0,r.Lk)("div",h,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(d.hours,(t,s)=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:(0,i.C4)(d.hourRowClass(t)),style:(0,i.Tr)(d.loopStyle)},[t<d.hours?((0,r.uX)(),(0,r.CE)("div",n,(0,i.v_)(d.timeText(t)),1)):(0,r.Q3)("",!0)],6))),128))]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(d.courseLoops,(t,s)=>((0,r.uX)(),(0,r.CE)("div",{key:s,style:(0,i.Tr)({width:d.columnWidth}),class:"calendar-col"},[(0,r.Lk)("div",{class:(0,i.C4)([{"border-left":0!==s},"calendar-header"])},(0,i.v_)(t.crlName),3),(0,r.bF)(p),(0,r.bF)(y,{data:m.data,fact:m.fact,hours:d.hours,loop:t,loopKey:s,minTime:d.minTime},null,8,["data","fact","hours","loop","loopKey","minTime"])],4))),128))])]),_:1})}e(9552),e(696),e(9582),e(2296),e(7391),e(665),e(6564),e(4665),e(1346),e(8329),e(7589);const m={class:"row"};function d(t,s,e,a,o,l){const h=(0,r.g2)("start-time");return(0,r.uX)(),(0,r.CE)("div",m,[(0,r.Lk)("div",{style:(0,i.Tr)(l.loopStyle),class:"col loop-col"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.starts,(t,s)=>((0,r.uX)(),(0,r.Wv)(h,{key:s,aKey:s,fact:e.fact,minTime:e.minTime,start:t,starts:l.starts},null,8,["aKey","fact","minTime","start","starts"]))),128))],4)])}function c(t,s,e,a,o,l){return(0,r.uX)(),(0,r.CE)("div",{style:(0,i.Tr)(l.timeSlotStyle),class:"row slot",onClick:s[0]||(s[0]=(...t)=>l.showBooking&&l.showBooking(...t))},(0,i.v_)(l.text),5)}const p={props:{start:{type:Object,required:!0},starts:{type:Array,required:!0},fact:{type:Number,required:!0},minTime:{type:Number,required:!0},aKey:{type:Number,required:!0}},computed:{top(){let t=Math.floor(this.minTime/60),s=60*t,e=this.minTime-s;return(this.start.sttTimeFrom-this.minTime+e)*this.fact+"px"},prevCount(){let t=0;return void 0!==this.starts[this.aKey-3]&&this.starts[this.aKey-3].sttTimeFrom===this.start.sttTimeFrom&&(t+=this.starts[this.aKey-3].sttMaxPlayers),void 0!==this.starts[this.aKey-2]&&this.starts[this.aKey-2].sttTimeFrom===this.start.sttTimeFrom&&(t+=this.starts[this.aKey-2].sttMaxPlayers),void 0!==this.starts[this.aKey-1]&&this.starts[this.aKey-1].sttTimeFrom===this.start.sttTimeFrom&&(t+=this.starts[this.aKey-1].sttMaxPlayers),t},cellMargin(){return 25*this.prevCount+"%"},cellWidth(){return[0,1].includes(this.start.sttRefType)?25*this.start.sttMaxPlayers+"%":"100%"},showDialog(){return 3===this.$store.getters["currentUser/usrHasCalendar"]},text(){let t=this.$filters.minuteToTime(this.start.sttTimeFrom)+" ";if(null===this.start.sttDescr||this.start.isEvent)return"";if(this.start.sttDescr.length>0)return t+this.start.sttDescr;if(void 0!==this.start.sttPlayerName1)return t+this.start.sttPlayerName1;{let s=null===this.start.sttPlayers?0:this.start.sttPlayers;return t+" spelers: "+s}},timeSlotStyle(){let t=(this.start.sttTimeTo-this.start.sttTimeFrom)*this.fact+"px",s="#FFFFFF",e="white";return 1===this.start.sttRefType?(s=this.start.sttGrpColor1,e=this.start.sttGrpFontColor1):this.start.sttRefType>1?s="blue":this.start.sttRefType<0&&(e="black",s="lightblue"),{backgroundColor:s,height:t,color:e,top:this.top,width:this.cellWidth,marginLeft:this.cellMargin}}},methods:{showBooking(){if(1!==this.start.sttRefType||!this.showDialog)return;let t=this.start.sttDescr.split("|").map(t=>t.trim()),s="- "+t.join("<br> - ");this.$q.dialog({title:"Speler(s) op flight:",message:s,html:!0,persistent:!0}).onOk(()=>{})}}};var y=e(6317);const T=(0,y.A)(p,[["render",c],["__scopeId","data-v-ced99bf0"]]),f=T,g={components:{StartTime:f},props:{data:Array,loop:Object,minTime:Number,fact:Number,loopKey:Number,hours:Number},computed:{starts(){return this.data.filter(t=>t.sttCrlNr===this.loop.sttCrlNr)},lMinTime(){return this.starts.reduce((t,s)=>null===t||s.sttTimeFrom<t?s.sttTimeFrom:t,null)},loopStyle(){let t=Math.floor(this.minTime/60);return{width:"100%",paddingTop:(this.lMinTime-60*t)*this.fact+"px",borderLeft:this.loopKey>0?"1px solid lightgrey":"",height:60*this.hours*this.fact+"px"}}}},v=(0,y.A)(g,[["render",d],["__scopeId","data-v-469a1188"]]),C=v,F={components:{calendarLoop:C},data(){return{fact:3,data:[],date:null}},created(){this.date=this.$dayjs().format("YYYY-MM-DD")},watch:{date(){this.loadCalendar()}},computed:{courseLoops(){if(0===this.data.length)return[];const t=new Set;return this.data.filter(s=>{const e=`${s.sttCrlNr}-${s.crlName}`;return!t.has(e)&&(t.add(e),!0)}).map(t=>({sttCrlNr:t.sttCrlNr,crlName:t.crlName}))},columnWidth(){let t=this.courseLoops.length;return"calc((100% - 40px) / "+t+")"},minTime(){return this.data.reduce((t,s)=>null===t||s.sttTimeFrom<t?s.sttTimeFrom:t,null)},maxTime(){return this.data.reduce((t,s)=>null===t||s.sttTimeFrom>t?s.sttTimeFrom:t,null)},hours(){return Math.ceil((this.maxTime-this.minTime)/60)+1},loopStyle(){return{paddingTop:60*this.fact-8+"px",height:60*this.fact+"px"}},startHour(){return Math.floor(this.minTime/60)}},methods:{async loadCalendar(){this.data=[],this.data=await this.$http.get("calendar?date="+this.date)},hourRowClass(t){return t<this.hours?"hour-row":""},timeText(t){return this.$filters.minuteToTime(60*(this.startHour+t))},closePopup(){this.$refs.myPopup.hide()}}};var b=e(2507),k=e(7316),w=e(1177),x=e(5194),K=e(1082),N=e.n(K);const M=(0,y.A)(F,[["render",u]]),P=M;N()(F,"components",{QPage:b.A,QInput:k.A,QSeparator:w.A,QPopupProxy:x.A})}}]);