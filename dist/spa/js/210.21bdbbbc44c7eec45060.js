"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[210],{9210:(t,e,a)=>{a.r(e),a.d(e,{default:()=>it});var n=a(3673);const s={key:0},r=(0,n._)("div",{class:"text-h5 q-mb-md"},"Betaalkaarten",-1),l={key:1};function i(t,e,a,i,d,o){const m=(0,n.up)("Card"),u=(0,n.up)("CardTransactions"),c=(0,n.up)("q-page"),p=(0,n.up)("q-page-container");return(0,n.wg)(),(0,n.j4)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"q-pa-sm"},{default:(0,n.w5)((()=>[t.selectedCard?((0,n.wg)(),(0,n.iD)("div",l,[t.selectedCard?((0,n.wg)(),(0,n.j4)(u,{key:0,paymentArray:t.paymentArray,selectedCard:t.selectedCard,onHandleCloseCard:e[0]||(e[0]=e=>t.selectedCard=null)},null,8,["paymentArray","selectedCard"])):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",s,[r,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.cardArray,((e,a)=>((0,n.wg)(),(0,n.j4)(m,{key:a,card:e,paymentArray:t.paymentArray,onClick:a=>t.selectedCard=e},null,8,["card","paymentArray","onClick"])))),128))]))])),_:1})])),_:1})}a(4564);var d=a(2323);const o={class:"text-h6"},m={class:"row justify-between"},u=(0,n._)("div",null,"Eerste transactie",-1),c={class:"text-bold"},p={class:"row justify-between"},y=(0,n._)("div",null,"Laatste transactie",-1),w={class:"text-bold"},f={class:"row justify-between"},_=(0,n._)("div",null,"Saldo",-1),h={class:"text-bold"};function v(t,e,a,s,r,l){const i=(0,n.up)("q-card-section"),v=(0,n.up)("q-separator"),g=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(g,{class:"q-mb-md",style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:"bg-light-green-3"},{default:(0,n.w5)((()=>[(0,n._)("div",o,(0,d.zw)(a.card.pmtName),1)])),_:1}),(0,n.Wm)(v),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n._)("div",m,[u,(0,n._)("div",c,(0,d.zw)(l.firstDate),1)]),(0,n._)("div",p,[y,(0,n._)("div",w,(0,d.zw)(l.lastDate),1)]),(0,n._)("div",f,[_,(0,n._)("div",h,(0,d.zw)(t.$filters.money(l.balance)),1)])])),_:1})])),_:1})}const g={props:{card:Object,paymentArray:Array},data:function(){return{}},computed:{payments:function(){return this.paymentArray.filter((t=>t.payPmtNr==this.card.pmtNr))},balance:function(){return this.payments.map((t=>-1*t.payAmount)).reduce((function(t,e){return t+e}))},firstDate:function(){return 0===this.payments.length||null===this.payments[0].sales_transaction.trnTimestamp?"-":this.$dayjs(this.payments[0].sales_transaction.trnTimestamp).format("dddd D MMMM YYYY H:mm")},lastDate:function(){return 0===this.payments.length||null===this.payments[this.payments.length-1].sales_transaction.trnTimestamp?"-":this.$dayjs(this.payments[this.payments.length-1].sales_transaction.trnTimestamp).format("dddd D MMMM YYYY H:mm")}},created(){},methods:{}};var b=a(4260),A=a(151),C=a(5589),j=a(5869),k=a(7518),D=a.n(k);const q=(0,b.Z)(g,[["render",v]]),z=q;D()(g,"components",{QCard:A.Z,QCardSection:C.Z,QSeparator:j.Z});const Y={class:"row justify-between items-center text-h5 q-mb-md"};function N(t,e,a,s,r,l){const i=(0,n.up)("q-icon"),o=(0,n.up)("Transaction");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Y,[(0,n._)("div",null,"Betaalkaart "+(0,d.zw)(a.selectedCard.pmtName),1),(0,n.Wm)(i,{name:"arrow_back",onClick:e[0]||(e[0]=e=>t.$emit("handleCloseCard"))})]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.payments,((t,e)=>((0,n.wg)(),(0,n.j4)(o,{key:e,payment:t,payments:l.payments},null,8,["payment","payments"])))),128))])}var T=a(8880);const x={class:"text-h6"},Z={class:"text-subtitle2"},$={key:0},M=(0,n._)("div",{class:"row justify-between text-bold"},[(0,n._)("div",null,"Artikel"),(0,n._)("div",null,"Prijs")],-1),P={class:"row justify-between text-bold"},W=(0,n._)("div",null,"Totaal",-1),Q={key:1,class:"row justify-between"},H=(0,n._)("div",null,"Opgewaardeerd bedrag",-1),O=(0,n._)("div",{class:"row justify-between text-bold q-mt-md"},[(0,n._)("div",null,"Betaalwijze"),(0,n._)("div",null,"Bedrag")],-1),B={key:2,class:"row text-italic"},K={class:"row justify-between"},S=(0,n._)("div",null,"Oud saldo",-1),E={class:"row justify-between"},F=(0,n._)("div",null,"Betaling",-1),I={class:"row justify-between text-bold"},L=(0,n._)("div",null,"Nieuw saldo",-1);function G(t,e,a,s,r,l){const i=(0,n.up)("q-card-section"),o=(0,n.up)("q-separator"),m=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(m,{class:"q-mb-md",style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:(0,d.C_)("Opwaardering"===l.type?"bg-light-green-3":"bg-light-blue-3")},{default:(0,n.w5)((()=>[(0,n._)("div",x,(0,d.zw)(l.type),1),(0,n._)("div",Z,(0,d.zw)(l.dateTime),1)])),_:1},8,["class"]),(0,n.Wm)(o),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>["Opwaardering"!==l.type?((0,n.wg)(),(0,n.iD)("div",$,[M,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.payment.sales_transaction.sales,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:a,class:"row justify-between"},[(0,n._)("div",null,(0,d.zw)(e.item.itmName),1),(0,n._)("div",null,(0,d.zw)(t.$filters.money(e.salAmount)),1)])))),128)),(0,n._)("div",P,[W,(0,n._)("div",null,(0,d.zw)(t.$filters.money(l.total)),1)])])):((0,n.wg)(),(0,n.iD)("div",Q,[H,(0,n._)("div",null,(0,d.zw)(t.$filters.money(l.amount)),1)])),O,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.payment.sales_transaction.payments,((e,a)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{key:a,class:"row justify-between"},[(0,n._)("div",null,(0,d.zw)(e.pay_method.pmtName),1),(0,n._)("div",null,(0,d.zw)(t.$filters.money(e.payAmount)),1)])),[[T.F8,e.payAmount>0]]))),128)),l.partialPayment?((0,n.wg)(),(0,n.iD)("div",B," De betaling is een deelbetaling, het deel van de betaling dat hier vermeld staat is het deel dat op de betaalkaart is afgeschreven. ")):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n._)("div",K,[S,(0,n._)("div",null,(0,d.zw)(t.$filters.money(l.balance+a.payment.payAmount)),1)]),(0,n._)("div",E,[F,(0,n._)("div",null,(0,d.zw)(t.$filters.money(l.amount)),1)]),(0,n._)("div",I,[L,(0,n._)("div",null,(0,d.zw)(t.$filters.money(l.balance)),1)])])),_:1})])),_:1})}const J={props:{payments:Array,payment:Object},data:function(){return{}},computed:{type:function(){return this.payment.payAmount<0&&0===this.payment.sales_transaction.sales.length?"Opwaardering":"Kassa verkoop"},amount:function(){return this.payment.payAmount<0?-1*this.payment.payAmount:this.payment.payAmount},total:function(){return this.payment.sales_transaction.sales.map((t=>t.salAmount)).reduce((function(t,e){return t+e}))},balance:function(){let t=0,e=!1;return this.payments.forEach((a=>{e||(t+=-1*a.payAmount,e=a.payNr==this.payment.payNr)})),t},partialPayment:function(){return this.payment.payAmount>0&&this.payment.sales_transaction.sales.length>0&&this.payment.sales_transaction.payments.length>1},dateTime:function(){return null===this.payment.sales_transaction.trnTimestamp?"-":this.$dayjs(this.payment.sales_transaction.trnTimestamp).format("dddd D MMMM YYYY H:mm")}},methods:{}},R=(0,b.Z)(J,[["render",G]]),U=R;D()(J,"components",{QCard:A.Z,QCardSection:C.Z,QSeparator:j.Z});const V={components:{Transaction:U},props:{selectedCard:Object,paymentArray:Array},computed:{payments:function(){return this.paymentArray.filter((t=>t.payPmtNr==this.selectedCard.pmtNr))}}};var X=a(4554);const tt=(0,b.Z)(V,[["render",N]]),et=tt;D()(V,"components",{QIcon:X.Z});var at=a(6490);const nt={mixins:[at.Z],components:{CardTransactions:et,Card:z},data:function(){return{paymentArray:[],selectedCard:null}},computed:{cardArray:function(){let t=[];return this.paymentArray.forEach((function(e){if(4!==e.pay_method.pmtPtpNr)return;let a=t.find((t=>t.pmtNr===e.payPmtNr&&4==t.pmtPtpNr));void 0===a&&t.push(e.pay_method)})),t}},mounted(){this.$http.get("golfer/balance").then((t=>{this.paymentArray=t}))}};var st=a(2652),rt=a(4379);const lt=(0,b.Z)(nt,[["render",i]]),it=lt;D()(nt,"components",{QPageContainer:st.Z,QPage:rt.Z})}}]);