"use strict";(globalThis["webpackChunkintogolf_app_golfer"]=globalThis["webpackChunkintogolf_app_golfer"]||[]).push([[595],{1595:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});s(5663);var o=s(3673);const r={key:0,class:"row cordova-hide fixed-bottom"},i={class:"row q-mt-sm"},l={class:"col text-center"},n=(0,o._)("div",{class:"row q-mt-md q-mb-md"},[(0,o._)("div",{class:"col text-center text-h5"},"Login met uw account")],-1),a={class:"text-center"};function c(e,t,s,c,u,p){const d=(0,o.up)("q-btn"),m=(0,o.up)("q-img"),h=(0,o.up)("q-input"),g=(0,o.up)("q-icon"),w=(0,o.up)("q-card-section"),f=(0,o.up)("q-card"),y=(0,o.up)("q-page-container");return(0,o.wg)(),(0,o.j4)(y,null,{default:(0,o.w5)((()=>[null!==e.settings?((0,o.wg)(),(0,o.iD)("div",r,[p.canSignIn?((0,o.wg)(),(0,o.j4)(d,{key:0,color:"primary",flat:"",label:"Inschrijven",onClick:t[0]||(t[0]=t=>e.$router.push("sign-up"))})):(0,o.kq)("",!0),p.canBookPublic?((0,o.wg)(),(0,o.j4)(d,{key:1,color:"primary",flat:"",label:"Starttijd",onClick:t[1]||(t[1]=t=>e.$router.push("teetimes"))})):(0,o.kq)("",!0),p.canBookCourse?((0,o.wg)(),(0,o.j4)(d,{key:2,color:"primary",flat:"",label:"Les",onClick:t[2]||(t[2]=t=>e.$router.push("public_lessons"))})):(0,o.kq)("",!0),p.canBookCourse?((0,o.wg)(),(0,o.j4)(d,{key:3,color:"primary",flat:"",label:"Cursus",onClick:t[3]||(t[3]=t=>e.$router.push("classes"))})):(0,o.kq)("",!0)])):(0,o.kq)("",!0),null!==e.settings?((0,o.wg)(),(0,o.j4)(f,{key:1,class:"login_card q-ml-auto q-mr-auto q-mt-xl"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o._)("div",l,[(0,o.Wm)(m,{fit:"scale-down",src:e.blobUrl,style:{"max-width":"400px","max-height":"100px"}},null,8,["src"])])]),n,(0,o.Wm)(h,{modelValue:e.form.relEmail,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.relEmail=t),rules:[e=>e&&e.length>0||"Voer aub uw e-mailadres in"],filled:"",label:"Uw e-mailadres","lazy-rules":""},null,8,["modelValue","rules"]),(0,o.Wm)(h,{modelValue:e.form.repPassword,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.repPassword=t),rules:[e=>e&&e.length>0||"Voer aub uw e-wachtwoord in"],type:e.isPwd?"password":"text",filled:"",label:"Uw wachtwoord","lazy-rules":""},{append:(0,o.w5)((()=>[(0,o.Wm)(g,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[5]||(t[5]=t=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","rules","type"]),(0,o._)("div",a,[(0,o.Wm)(d,{color:"primary",label:"Inloggen",onClick:p.onlogin},null,8,["onClick"]),(0,o.Wm)(d,{class:"q-mt-md",color:"primary",flat:"",label:"Wachtwoord vergeten",onClick:t[7]||(t[7]=t=>e.$router.push("verify-code"))})])])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})}var u=s(2662),p=s(4398);const d={mixins:[u.Z],name:"Login",data:function(){return{form:{relEmail:"",repPassword:"",repKey:""},isPwd:!0,blobUrl:"",redirect:""}},mounted(){this.$route.query.key&&(this.form.repKey=this.$route.query.key,this.onlogin()),this.form.redirect=this.$route.query.redirect},watch:{settings:function(){console.log("ok"),null!=this.settings&&this.$http.get("golfer/image/"+this.settings.system_logo).then((e=>{this.blobUrl="data:image/png;base64,"+e}))}},computed:{canSignIn:function(){return 1==parseInt(this.settings.website_display_register_button)},canBookPublic:function(){return 1==parseInt(this.settings.website_display_teetime_public)},canBookCourse:function(){return 1==parseInt(this.settings.website_display_lessons_public)}},methods:{async onlogin(){let e=null;if(this.$q.loading.show(),this.$q.platform.is.desktop&&(await this.$recaptchaLoaded(),this.form.captcha=await this.$recaptcha("login")),await this.$http.post("golfer/login",this.form).then((t=>{t&&(e=t,this.$ls.setItem("currentUser",e,864e8))})).catch((e=>{this.$message.error(e)})),await this.$http.get("golfer/settings").then((e=>{this.$ls.setItem("settings",e,864e8),this.settings=e,(0,p.Z)("primary",this.settings.app_primary_color),(0,p.Z)("primary_font",this.settings.app_primary_font_color),(0,p.Z)("secondary",this.settings.app_secondary_color),(0,p.Z)("secondary_font",this.settings.app_secondary_font_color);let t={matchList:{subFilter:0}};this.$ls.setItem("currentUserPref",t,6048e5)})),e.redirect)return window.location=e.redirect+"?key="+e.relation_password.apiToken;this.$q.loading.hide(),this.$router.push("/")}}};var m=s(4260),h=s(2652),g=s(8240),w=s(151),f=s(5589),y=s(4027),_=s(4842),b=s(4554),k=s(7518),q=s.n(k);const $=(0,m.Z)(d,[["render",c]]),C=$;q()(d,"components",{QPageContainer:h.Z,QBtn:g.Z,QCard:w.Z,QCardSection:f.Z,QImg:y.Z,QInput:_.Z,QIcon:b.Z})}}]);